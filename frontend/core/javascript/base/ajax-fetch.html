<!DOCTYPE html>
<html lang="zh-Hans" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>网络请求与远程资源 | wanglei1900 Blog</title>
    <meta name="description" content="Blog">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/assets/style.SATM64uC.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.CoTJZQwk.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.Dtft01Yp.js">
    <link rel="modulepreload" href="/assets/chunks/theme.C3WymVMI.js">
    <link rel="modulepreload" href="/assets/chunks/katex.ChWnQ-fc.js">
    <link rel="modulepreload" href="/assets/chunks/dagre-OKDRZEBW.JQZhdDTM.js">
    <link rel="modulepreload" href="/assets/chunks/c4Diagram-VJAJSXHY.BiRyHsl3.js">
    <link rel="modulepreload" href="/assets/chunks/flowDiagram-4HSFHLVR.BAOXi62O.js">
    <link rel="modulepreload" href="/assets/chunks/erDiagram-Q7BY3M3F.YCwYox2m.js">
    <link rel="modulepreload" href="/assets/chunks/gitGraphDiagram-7IBYFJ6S.C3QpsRTv.js">
    <link rel="modulepreload" href="/assets/chunks/ganttDiagram-APWFNJXF.B7QWp626.js">
    <link rel="modulepreload" href="/assets/chunks/infoDiagram-PH2N3AL5.Drx0ejrQ.js">
    <link rel="modulepreload" href="/assets/chunks/pieDiagram-IB7DONF6.DFPOB5iy.js">
    <link rel="modulepreload" href="/assets/chunks/quadrantDiagram-7GDLP6J5.DLQZLXuq.js">
    <link rel="modulepreload" href="/assets/chunks/xychartDiagram-VJFVF3MP.Cnsznhjt.js">
    <link rel="modulepreload" href="/assets/chunks/requirementDiagram-KVF5MWMF.DmRSJQAT.js">
    <link rel="modulepreload" href="/assets/chunks/sequenceDiagram-X6HHIX6F.vHXq89tM.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-GIVACNV2.xvWpnbot.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-v2-COTLJTTW.xvWpnbot.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-DGXRK772.UmsfhzTT.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-v2-YXO3MK2T.DD-yK41T.js">
    <link rel="modulepreload" href="/assets/chunks/journeyDiagram-U35MCT3I.C6KR74MW.js">
    <link rel="modulepreload" href="/assets/chunks/timeline-definition-BDJGKUSR.CG9RXUVM.js">
    <link rel="modulepreload" href="/assets/chunks/mindmap-definition-ALO5MXBD.DMLRUWGd.js">
    <link rel="modulepreload" href="/assets/chunks/kanban-definition-NDS4AKOZ.CNivIDla.js">
    <link rel="modulepreload" href="/assets/chunks/sankeyDiagram-QLVOVGJD.BMZr-DSy.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-VNBRO52H.5nfFP3PB.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-SSKATNLV.Bu6VZYdo.js">
    <link rel="modulepreload" href="/assets/chunks/blockDiagram-JOT3LUYC.D-V-sL_b.js">
    <link rel="modulepreload" href="/assets/chunks/architectureDiagram-IEHRJDOE.BUnKxzeR.js">
    <link rel="modulepreload" href="/assets/chunks/virtual_mermaid-config.DDnGl6nM.js">
    <link rel="modulepreload" href="/assets/frontend_core_javascript_base_ajax-fetch.md.DOpMmbxF.lean.js">
    <link rel="icon" href="/favicon.ico">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-e6a7cc9a><!--[--><!--]--><!--[--><span tabindex="-1" data-v-bf204e96></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-bf204e96>跳转到内容</a><!--]--><!----><header class="VPNav" data-v-e6a7cc9a data-v-bebdd5e3><div class="VPNavBar" data-v-bebdd5e3 data-v-b947a84d><div class="wrapper" data-v-b947a84d><div class="container" data-v-b947a84d><div class="title" data-v-b947a84d><div class="VPNavBarTitle has-sidebar" data-v-b947a84d data-v-1c235172><a class="title" href="/" data-v-1c235172><!--[--><!--]--><!--[--><img class="VPImage logo" src="/favicon.ico" alt data-v-d64cc87b><!--]--><span data-v-1c235172>wanglei1900 Blog</span><!--[--><!--]--></a></div></div><div class="content" data-v-b947a84d><div class="content-body" data-v-b947a84d><!--[--><!--]--><div class="VPNavBarSearch search" data-v-b947a84d><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-b947a84d data-v-1e0c52c7><span id="main-nav-aria-label" class="visually-hidden" data-v-1e0c52c7> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-1e0c52c7 data-v-4afc9899><!--[--><span data-v-4afc9899>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/frontend/" tabindex="0" data-v-1e0c52c7 data-v-4afc9899><!--[--><span data-v-4afc9899>前端工程化</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/backend/" tabindex="0" data-v-1e0c52c7 data-v-4afc9899><!--[--><span data-v-4afc9899>服务端与架构</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/data/" tabindex="0" data-v-1e0c52c7 data-v-4afc9899><!--[--><span data-v-4afc9899>数据层开发</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/devops/" tabindex="0" data-v-1e0c52c7 data-v-4afc9899><!--[--><span data-v-4afc9899>部署与运维</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/algorithms/" tabindex="0" data-v-1e0c52c7 data-v-4afc9899><!--[--><span data-v-4afc9899>算法与优化</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/iot/" tabindex="0" data-v-1e0c52c7 data-v-4afc9899><!--[--><span data-v-4afc9899>物联网</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/thoughts/" tabindex="0" data-v-1e0c52c7 data-v-4afc9899><!--[--><span data-v-4afc9899>杂谈</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-b947a84d data-v-14de904d><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-14de904d data-v-a2dac252 data-v-7d2b6847><span class="check" data-v-7d2b6847><span class="icon" data-v-7d2b6847><!--[--><span class="vpi-sun sun" data-v-a2dac252></span><span class="vpi-moon moon" data-v-a2dac252></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-b947a84d data-v-01d9b135 data-v-68dde805><!--[--><a class="VPSocialLink no-icon" href="https://github.com/wanglei1900" aria-label="github" target="_blank" rel="noopener" data-v-68dde805 data-v-28313414><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://www.cnblogs.com/wanglei1900" aria-label target="_blank" rel="noopener" data-v-68dde805 data-v-28313414><svg width="150" height="55" id="layer_1" data-name="layer 1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 280 102.66"><defs><style>.cls-1{fill:url(#gradient);}.cls-2{fill:#8dcefc;}.cls-3,.cls-4{fill:none;stroke-miterlimit:10;stroke-width:2px;}.cls-3{stroke:#457ab5;}.cls-4{stroke:url(#gradient_3);}.cls-5{fill:url(#gradient_2);}.cls-6{fill:#2e7acc;}.cls-7{fill:#e33e06;}.cls-8{fill:#8c8c8c;}</style><radialGradient id="gradient" cx="49.22" cy="-6550.95" r="44.62" gradientTransform="matrix(1, 0, 0, -0.07, 0, -359.49)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#8c8c8c"/><stop offset="0.13" stop-color="#919191" stop-opacity="0.95"/><stop offset="0.32" stop-color="#a0a0a0" stop-opacity="0.83"/><stop offset="0.54" stop-color="#b8b8b8" stop-opacity="0.61"/><stop offset="0.78" stop-color="#dadada" stop-opacity="0.32"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></radialGradient><radialGradient id="gradient_3" cx="-147.55" cy="-262.27" r="23.26" gradientTransform="matrix(0.95, -0.32, -0.32, -0.95, 121.5, -275.63)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#fff"/><stop offset="0.21" stop-color="#fff" stop-opacity="0.99"/><stop offset="0.34" stop-color="#fff" stop-opacity="0.96"/><stop offset="0.46" stop-color="#fff" stop-opacity="0.9"/><stop offset="0.56" stop-color="#fff" stop-opacity="0.81"/><stop offset="0.66" stop-color="#fff" stop-opacity="0.71"/><stop offset="0.74" stop-color="#fff" stop-opacity="0.58"/><stop offset="0.83" stop-color="#fff" stop-opacity="0.42"/><stop offset="0.91" stop-color="#fff" stop-opacity="0.24"/><stop offset="0.99" stop-color="#fff" stop-opacity="0.04"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></radialGradient><radialGradient id="gradient_2" cx="61.19" cy="57.93" r="54.56" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#7aacdf"/><stop offset="0.27" stop-color="#70a6dd"/><stop offset="0.73" stop-color="#5496d9"/><stop offset="1" stop-color="#408bd6"/></radialGradient></defs><title>博客园logo</title><g id="layer_2" data-name="layer 2"><g id="layer_1-2" data-name="layer 1-2"><ellipse class="cls-1" cx="49.22" cy="99.44" rx="44.62" ry="3.22"/><path class="cls-2" d="M49.22,1A48.22,48.22,0,1,0,97.44,49.22,48.22,48.22,0,0,0,49.22,1ZM34,77.06A10.46,10.46,0,1,1,44.43,66.6,10.46,10.46,0,0,1,34,77.06Zm25.11-4a6.5,6.5,0,0,1-6.5-6.5c0-9.81-8.51-18.1-18.58-18.1a6.5,6.5,0,0,1,0-13c17.12,0,31.58,14.24,31.58,31.1A6.5,6.5,0,0,1,59.08,73.1ZM79.72,67l-.56,0a6.5,6.5,0,0,1-6.47-6C71.35,45.29,59.57,28.5,40.4,28.5a6.5,6.5,0,0,1,0-13C64,15.5,83.48,34.63,85.65,60A6.51,6.51,0,0,1,79.72,67Z"/><circle class="cls-3" cx="49.22" cy="49.22" r="48.22"/><path class="cls-4" d="M35.2,5.89c23.88-7.78,50,5.36,57.41,29.05"/><path class="cls-5" d="M49.22,4.6A44.62,44.62,0,1,0,93.84,49.22,44.62,44.62,0,0,0,49.22,4.6ZM34,77.06A10.46,10.46,0,1,1,44.43,66.6,10.46,10.46,0,0,1,34,77.06Zm25.11-4a6.5,6.5,0,0,1-6.5-6.5c0-9.81-8.51-18.1-18.58-18.1a6.5,6.5,0,0,1,0-13c17.12,0,31.58,14.24,31.58,31.1A6.5,6.5,0,0,1,59.08,73.1ZM79.72,67l-.56,0a6.5,6.5,0,0,1-6.47-6C71.35,45.29,59.57,28.5,40.4,28.5a6.5,6.5,0,0,1,0-13C64,15.5,83.48,34.63,85.65,60A6.51,6.51,0,0,1,79.72,67Z"/><path class="cls-6" d="M79.72,67l-.56,0a6.5,6.5,0,0,1-6.47-6,39.24,39.24,0,0,0-4.45-15,56.64,56.64,0,0,0-37-13.58A57,57,0,0,0,5.93,38.39,44.61,44.61,0,0,0,85.62,75a51.4,51.4,0,0,0-2.86-9A6.55,6.55,0,0,1,79.72,67ZM34,77.06A10.46,10.46,0,1,1,44.43,66.6,10.46,10.46,0,0,1,34,77.06Zm25.11-4a6.5,6.5,0,0,1-6.5-6.5c0-9.81-8.51-18.1-18.58-18.1a6.5,6.5,0,0,1,0-13c17.12,0,31.58,14.24,31.58,31.1A6.5,6.5,0,0,1,59.08,73.1Z"/><path class="cls-7" d="M115.08,24.88V10.24h4.26V24.88h6.06v4.2h-6.06v36h-4.26v-36H108.6v-4.2ZM150.84,47.8v-3H155v3h7.86v3.84H155V60.4c0,3.12-1.56,4.68-4.62,4.68h-6.6l-.9-4c2.1.18,4.14.3,6.06.3,1.2,0,1.86-.66,1.86-2V51.64h-26V47.8Zm-9-33.36V10.3H146v4.14h7a34.08,34.08,0,0,0-1.74-3.6l3.72-.6a39.19,39.19,0,0,1,1.56,4.2h5.16V18.1H146v4.14h13.6V44h-4V39.82H146V43.6h-4.14V39.82H132.3V44h-4V22.24h13.56V18.1H126.18V14.44ZM142,59.38l-2.7,2.7A56.61,56.61,0,0,0,131,54.34l2.64-2.52A58.52,58.52,0,0,1,142,59.38Zm-.12-29.58V25.6H132.3v4.2Zm0,7.08V32.8H132.3v4.08ZM146,29.8h9.6V25.6H146Zm0,7.08h9.6V32.8H146Z"/><path class="cls-7" d="M192.06,20.68c-.9,1.38-1.8,2.7-2.76,4h22.14v3.48a32.73,32.73,0,0,1-10.62,9.06,74.75,74.75,0,0,0,22,4.74l-1,3.9a70,70,0,0,1-25.5-6.42c-7.08,3.24-16,5.76-26.82,7.62l-1.62-3.84c9.66-1.56,17.7-3.54,24.06-6.06A54.93,54.93,0,0,1,183.48,31a57.2,57.2,0,0,1-7.5,5.64l-2.76-3.36a44.52,44.52,0,0,0,14.64-13.5ZM219.78,26H215.4V18.52h-40V26H171V14.62h22a39.15,39.15,0,0,0-2.22-4.2l4.74-.72c.72,1.44,1.38,3.12,2.1,4.92h22.14Zm-6.72,39.36h-4.2V62.74h-25.8v2.58h-4.2V46.54h34.2Zm-4.2-6.48v-8.4h-25.8v8.4ZM206.28,28.3h-20.1l-.18.18a53.6,53.6,0,0,0,10.38,6.72A36,36,0,0,0,206.28,28.3Z"/><path class="cls-7" d="M280,65.14h-4.32v-2.4H235.2v2.4h-4.32V12.82H280Zm-4.32-6.24V16.78H235.2V58.9Zm-4.2-26.34V36.4h-9.6V48.7c0,1.44.6,2.16,1.92,2.16H266a3.05,3.05,0,0,0,1.92-.54c.72-.42,1.14-2.52,1.38-6.24l3.6,1.2c-.48,4.44-1.08,7.14-1.92,8s-2.16,1.08-4.14,1.14H262.5a4.46,4.46,0,0,1-3.42-1.32,5,5,0,0,1-1.2-3.48V36.4h-5.7c-.54,4.92-1.68,8.7-3.48,11.46-2,3.12-5.22,5.52-9.42,7.32l-2-3.48a16.49,16.49,0,0,0,8.16-6.12,22.43,22.43,0,0,0,2.88-9.18H239.4V32.56Zm-3.4-10.26v3.84H242.82V22.3Z"/><path class="cls-8" d="M123.37,79a6.18,6.18,0,0,1,5.31,2.52l-1.5,1.38a4.32,4.32,0,0,0-3.69-1.9c-3.09,0-5,2.37-5,5.58s1.92,5.61,5,5.61a4.37,4.37,0,0,0,3.69-1.89l1.5,1.38a6.18,6.18,0,0,1-5.31,2.52c-4.32,0-7.23-3.3-7.23-7.62S119.05,79,123.37,79Z"/><path class="cls-8" d="M141.61,84.36c0-2.55-1.29-3.36-3.24-3.36a5.59,5.59,0,0,0-4.29,2.25V93.84h-2.25V79.35h2.25v2.1A7.22,7.22,0,0,1,139.24,79c3,0,4.62,1.53,4.62,4.68V93.84h-2.25Z"/><path class="cls-8" d="M148.36,73.83h2.25v7.71A6,6,0,0,1,155.5,79c3.78,0,6.45,3,6.45,7.62s-2.67,7.59-6.45,7.59a6.11,6.11,0,0,1-4.89-2.52v2.16h-2.25Zm6.57,18.36c2.94,0,4.68-2.37,4.68-5.58S157.87,81,154.93,81a5.39,5.39,0,0,0-4.32,2.34v6.57a5.36,5.36,0,0,0,4.32,2.28Z"/><path class="cls-8" d="M165.61,73.83h2.25v20h-2.25Z"/><path class="cls-8" d="M171.52,86.58c0-4.2,2.76-7.59,7.17-7.59s7.17,3.39,7.17,7.59-2.76,7.62-7.17,7.62S171.52,90.78,171.52,86.58Zm12,0c0-2.94-1.71-5.58-4.8-5.58s-4.83,2.64-4.83,5.58,1.74,5.61,4.83,5.61,4.77-2.64,4.77-5.61Z"/><path class="cls-8" d="M190.63,95.88a5.53,5.53,0,0,0,4.71,2c2.4,0,4.65-1.17,4.65-4.35V91.44A6.06,6.06,0,0,1,195.13,94c-3.78,0-6.45-2.82-6.45-7.5s2.64-7.5,6.45-7.5A6,6,0,0,1,200,81.54V79.35h2.25V93.42c0,4.8-3.36,6.3-6.9,6.3a7.39,7.39,0,0,1-5.85-2.16ZM200,83.34A5.34,5.34,0,0,0,195.67,81c-2.91,0-4.65,2.31-4.65,5.52S192.76,92,195.67,92A5.36,5.36,0,0,0,200,89.67Z"/><path class="cls-8" d="M206.65,90.3a6.54,6.54,0,0,0,4.77,2.07c2.22,0,3.42-1,3.42-2.4,0-1.59-1.77-2.1-3.72-2.58-2.46-.57-5.25-1.23-5.25-4.23,0-2.25,1.95-4.17,5.4-4.17a7.36,7.36,0,0,1,5.37,2.1l-1,1.56a5.62,5.62,0,0,0-4.32-1.83c-2,0-3.21.9-3.21,2.19s1.65,1.86,3.54,2.31c2.52.57,5.43,1.29,5.43,4.5,0,2.43-2,4.38-5.7,4.38a7.71,7.71,0,0,1-5.85-2.28Z"/><path class="cls-8" d="M221.89,90.84a1.65,1.65,0,1,1-1.65,1.65h0A1.66,1.66,0,0,1,221.89,90.84Z"/><path class="cls-8" d="M233.77,79a6.18,6.18,0,0,1,5.31,2.52l-1.5,1.38a4.32,4.32,0,0,0-3.69-1.9c-3.09,0-5,2.37-5,5.58s1.92,5.61,5,5.61a4.37,4.37,0,0,0,3.69-1.89l1.5,1.38a6.18,6.18,0,0,1-5.31,2.52c-4.32,0-7.23-3.3-7.23-7.62S229.45,79,233.77,79Z"/><path class="cls-8" d="M241.39,86.58c0-4.2,2.76-7.59,7.17-7.59s7.17,3.39,7.17,7.59S253,94.2,248.56,94.2,241.39,90.78,241.39,86.58Zm12,0c0-2.94-1.71-5.58-4.8-5.58s-4.83,2.64-4.83,5.58,1.74,5.61,4.83,5.61,4.77-2.64,4.77-5.61Z"/><path class="cls-8" d="M276.88,84c0-1.83-.81-3-2.67-3a5.07,5.07,0,0,0-3.84,2.22V93.84h-2.25V84c0-1.83-.78-3-2.67-3a5.09,5.09,0,0,0-3.81,2.25V93.84h-2.25V79.35h2.25v2.1A6.25,6.25,0,0,1,266.32,79a3.72,3.72,0,0,1,3.9,2.7,6.1,6.1,0,0,1,4.86-2.7c2.64,0,4.05,1.47,4.05,4.38V93.84h-2.25Z"/></g></g></svg></a><a class="VPSocialLink no-icon" href="https://vitepress.dev/zh" aria-label="github" target="_blank" rel="noopener" data-v-68dde805 data-v-28313414><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-b947a84d data-v-0ac197a4 data-v-267248bc><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-267248bc><span class="vpi-more-horizontal icon" data-v-267248bc></span></button><div class="menu" data-v-267248bc><div class="VPMenu" data-v-267248bc data-v-a597def0><!----><!--[--><!--[--><!----><div class="group" data-v-0ac197a4><div class="item appearance" data-v-0ac197a4><p class="label" data-v-0ac197a4>主题</p><div class="appearance-action" data-v-0ac197a4><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-0ac197a4 data-v-a2dac252 data-v-7d2b6847><span class="check" data-v-7d2b6847><span class="icon" data-v-7d2b6847><!--[--><span class="vpi-sun sun" data-v-a2dac252></span><span class="vpi-moon moon" data-v-a2dac252></span><!--]--></span></span></button></div></div></div><div class="group" data-v-0ac197a4><div class="item social-links" data-v-0ac197a4><div class="VPSocialLinks social-links-list" data-v-0ac197a4 data-v-68dde805><!--[--><a class="VPSocialLink no-icon" href="https://github.com/wanglei1900" aria-label="github" target="_blank" rel="noopener" data-v-68dde805 data-v-28313414><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://www.cnblogs.com/wanglei1900" aria-label target="_blank" rel="noopener" data-v-68dde805 data-v-28313414><svg width="150" height="55" id="layer_1" data-name="layer 1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 280 102.66"><defs><style>.cls-1{fill:url(#gradient);}.cls-2{fill:#8dcefc;}.cls-3,.cls-4{fill:none;stroke-miterlimit:10;stroke-width:2px;}.cls-3{stroke:#457ab5;}.cls-4{stroke:url(#gradient_3);}.cls-5{fill:url(#gradient_2);}.cls-6{fill:#2e7acc;}.cls-7{fill:#e33e06;}.cls-8{fill:#8c8c8c;}</style><radialGradient id="gradient" cx="49.22" cy="-6550.95" r="44.62" gradientTransform="matrix(1, 0, 0, -0.07, 0, -359.49)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#8c8c8c"/><stop offset="0.13" stop-color="#919191" stop-opacity="0.95"/><stop offset="0.32" stop-color="#a0a0a0" stop-opacity="0.83"/><stop offset="0.54" stop-color="#b8b8b8" stop-opacity="0.61"/><stop offset="0.78" stop-color="#dadada" stop-opacity="0.32"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></radialGradient><radialGradient id="gradient_3" cx="-147.55" cy="-262.27" r="23.26" gradientTransform="matrix(0.95, -0.32, -0.32, -0.95, 121.5, -275.63)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#fff"/><stop offset="0.21" stop-color="#fff" stop-opacity="0.99"/><stop offset="0.34" stop-color="#fff" stop-opacity="0.96"/><stop offset="0.46" stop-color="#fff" stop-opacity="0.9"/><stop offset="0.56" stop-color="#fff" stop-opacity="0.81"/><stop offset="0.66" stop-color="#fff" stop-opacity="0.71"/><stop offset="0.74" stop-color="#fff" stop-opacity="0.58"/><stop offset="0.83" stop-color="#fff" stop-opacity="0.42"/><stop offset="0.91" stop-color="#fff" stop-opacity="0.24"/><stop offset="0.99" stop-color="#fff" stop-opacity="0.04"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></radialGradient><radialGradient id="gradient_2" cx="61.19" cy="57.93" r="54.56" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#7aacdf"/><stop offset="0.27" stop-color="#70a6dd"/><stop offset="0.73" stop-color="#5496d9"/><stop offset="1" stop-color="#408bd6"/></radialGradient></defs><title>博客园logo</title><g id="layer_2" data-name="layer 2"><g id="layer_1-2" data-name="layer 1-2"><ellipse class="cls-1" cx="49.22" cy="99.44" rx="44.62" ry="3.22"/><path class="cls-2" d="M49.22,1A48.22,48.22,0,1,0,97.44,49.22,48.22,48.22,0,0,0,49.22,1ZM34,77.06A10.46,10.46,0,1,1,44.43,66.6,10.46,10.46,0,0,1,34,77.06Zm25.11-4a6.5,6.5,0,0,1-6.5-6.5c0-9.81-8.51-18.1-18.58-18.1a6.5,6.5,0,0,1,0-13c17.12,0,31.58,14.24,31.58,31.1A6.5,6.5,0,0,1,59.08,73.1ZM79.72,67l-.56,0a6.5,6.5,0,0,1-6.47-6C71.35,45.29,59.57,28.5,40.4,28.5a6.5,6.5,0,0,1,0-13C64,15.5,83.48,34.63,85.65,60A6.51,6.51,0,0,1,79.72,67Z"/><circle class="cls-3" cx="49.22" cy="49.22" r="48.22"/><path class="cls-4" d="M35.2,5.89c23.88-7.78,50,5.36,57.41,29.05"/><path class="cls-5" d="M49.22,4.6A44.62,44.62,0,1,0,93.84,49.22,44.62,44.62,0,0,0,49.22,4.6ZM34,77.06A10.46,10.46,0,1,1,44.43,66.6,10.46,10.46,0,0,1,34,77.06Zm25.11-4a6.5,6.5,0,0,1-6.5-6.5c0-9.81-8.51-18.1-18.58-18.1a6.5,6.5,0,0,1,0-13c17.12,0,31.58,14.24,31.58,31.1A6.5,6.5,0,0,1,59.08,73.1ZM79.72,67l-.56,0a6.5,6.5,0,0,1-6.47-6C71.35,45.29,59.57,28.5,40.4,28.5a6.5,6.5,0,0,1,0-13C64,15.5,83.48,34.63,85.65,60A6.51,6.51,0,0,1,79.72,67Z"/><path class="cls-6" d="M79.72,67l-.56,0a6.5,6.5,0,0,1-6.47-6,39.24,39.24,0,0,0-4.45-15,56.64,56.64,0,0,0-37-13.58A57,57,0,0,0,5.93,38.39,44.61,44.61,0,0,0,85.62,75a51.4,51.4,0,0,0-2.86-9A6.55,6.55,0,0,1,79.72,67ZM34,77.06A10.46,10.46,0,1,1,44.43,66.6,10.46,10.46,0,0,1,34,77.06Zm25.11-4a6.5,6.5,0,0,1-6.5-6.5c0-9.81-8.51-18.1-18.58-18.1a6.5,6.5,0,0,1,0-13c17.12,0,31.58,14.24,31.58,31.1A6.5,6.5,0,0,1,59.08,73.1Z"/><path class="cls-7" d="M115.08,24.88V10.24h4.26V24.88h6.06v4.2h-6.06v36h-4.26v-36H108.6v-4.2ZM150.84,47.8v-3H155v3h7.86v3.84H155V60.4c0,3.12-1.56,4.68-4.62,4.68h-6.6l-.9-4c2.1.18,4.14.3,6.06.3,1.2,0,1.86-.66,1.86-2V51.64h-26V47.8Zm-9-33.36V10.3H146v4.14h7a34.08,34.08,0,0,0-1.74-3.6l3.72-.6a39.19,39.19,0,0,1,1.56,4.2h5.16V18.1H146v4.14h13.6V44h-4V39.82H146V43.6h-4.14V39.82H132.3V44h-4V22.24h13.56V18.1H126.18V14.44ZM142,59.38l-2.7,2.7A56.61,56.61,0,0,0,131,54.34l2.64-2.52A58.52,58.52,0,0,1,142,59.38Zm-.12-29.58V25.6H132.3v4.2Zm0,7.08V32.8H132.3v4.08ZM146,29.8h9.6V25.6H146Zm0,7.08h9.6V32.8H146Z"/><path class="cls-7" d="M192.06,20.68c-.9,1.38-1.8,2.7-2.76,4h22.14v3.48a32.73,32.73,0,0,1-10.62,9.06,74.75,74.75,0,0,0,22,4.74l-1,3.9a70,70,0,0,1-25.5-6.42c-7.08,3.24-16,5.76-26.82,7.62l-1.62-3.84c9.66-1.56,17.7-3.54,24.06-6.06A54.93,54.93,0,0,1,183.48,31a57.2,57.2,0,0,1-7.5,5.64l-2.76-3.36a44.52,44.52,0,0,0,14.64-13.5ZM219.78,26H215.4V18.52h-40V26H171V14.62h22a39.15,39.15,0,0,0-2.22-4.2l4.74-.72c.72,1.44,1.38,3.12,2.1,4.92h22.14Zm-6.72,39.36h-4.2V62.74h-25.8v2.58h-4.2V46.54h34.2Zm-4.2-6.48v-8.4h-25.8v8.4ZM206.28,28.3h-20.1l-.18.18a53.6,53.6,0,0,0,10.38,6.72A36,36,0,0,0,206.28,28.3Z"/><path class="cls-7" d="M280,65.14h-4.32v-2.4H235.2v2.4h-4.32V12.82H280Zm-4.32-6.24V16.78H235.2V58.9Zm-4.2-26.34V36.4h-9.6V48.7c0,1.44.6,2.16,1.92,2.16H266a3.05,3.05,0,0,0,1.92-.54c.72-.42,1.14-2.52,1.38-6.24l3.6,1.2c-.48,4.44-1.08,7.14-1.92,8s-2.16,1.08-4.14,1.14H262.5a4.46,4.46,0,0,1-3.42-1.32,5,5,0,0,1-1.2-3.48V36.4h-5.7c-.54,4.92-1.68,8.7-3.48,11.46-2,3.12-5.22,5.52-9.42,7.32l-2-3.48a16.49,16.49,0,0,0,8.16-6.12,22.43,22.43,0,0,0,2.88-9.18H239.4V32.56Zm-3.4-10.26v3.84H242.82V22.3Z"/><path class="cls-8" d="M123.37,79a6.18,6.18,0,0,1,5.31,2.52l-1.5,1.38a4.32,4.32,0,0,0-3.69-1.9c-3.09,0-5,2.37-5,5.58s1.92,5.61,5,5.61a4.37,4.37,0,0,0,3.69-1.89l1.5,1.38a6.18,6.18,0,0,1-5.31,2.52c-4.32,0-7.23-3.3-7.23-7.62S119.05,79,123.37,79Z"/><path class="cls-8" d="M141.61,84.36c0-2.55-1.29-3.36-3.24-3.36a5.59,5.59,0,0,0-4.29,2.25V93.84h-2.25V79.35h2.25v2.1A7.22,7.22,0,0,1,139.24,79c3,0,4.62,1.53,4.62,4.68V93.84h-2.25Z"/><path class="cls-8" d="M148.36,73.83h2.25v7.71A6,6,0,0,1,155.5,79c3.78,0,6.45,3,6.45,7.62s-2.67,7.59-6.45,7.59a6.11,6.11,0,0,1-4.89-2.52v2.16h-2.25Zm6.57,18.36c2.94,0,4.68-2.37,4.68-5.58S157.87,81,154.93,81a5.39,5.39,0,0,0-4.32,2.34v6.57a5.36,5.36,0,0,0,4.32,2.28Z"/><path class="cls-8" d="M165.61,73.83h2.25v20h-2.25Z"/><path class="cls-8" d="M171.52,86.58c0-4.2,2.76-7.59,7.17-7.59s7.17,3.39,7.17,7.59-2.76,7.62-7.17,7.62S171.52,90.78,171.52,86.58Zm12,0c0-2.94-1.71-5.58-4.8-5.58s-4.83,2.64-4.83,5.58,1.74,5.61,4.83,5.61,4.77-2.64,4.77-5.61Z"/><path class="cls-8" d="M190.63,95.88a5.53,5.53,0,0,0,4.71,2c2.4,0,4.65-1.17,4.65-4.35V91.44A6.06,6.06,0,0,1,195.13,94c-3.78,0-6.45-2.82-6.45-7.5s2.64-7.5,6.45-7.5A6,6,0,0,1,200,81.54V79.35h2.25V93.42c0,4.8-3.36,6.3-6.9,6.3a7.39,7.39,0,0,1-5.85-2.16ZM200,83.34A5.34,5.34,0,0,0,195.67,81c-2.91,0-4.65,2.31-4.65,5.52S192.76,92,195.67,92A5.36,5.36,0,0,0,200,89.67Z"/><path class="cls-8" d="M206.65,90.3a6.54,6.54,0,0,0,4.77,2.07c2.22,0,3.42-1,3.42-2.4,0-1.59-1.77-2.1-3.72-2.58-2.46-.57-5.25-1.23-5.25-4.23,0-2.25,1.95-4.17,5.4-4.17a7.36,7.36,0,0,1,5.37,2.1l-1,1.56a5.62,5.62,0,0,0-4.32-1.83c-2,0-3.21.9-3.21,2.19s1.65,1.86,3.54,2.31c2.52.57,5.43,1.29,5.43,4.5,0,2.43-2,4.38-5.7,4.38a7.71,7.71,0,0,1-5.85-2.28Z"/><path class="cls-8" d="M221.89,90.84a1.65,1.65,0,1,1-1.65,1.65h0A1.66,1.66,0,0,1,221.89,90.84Z"/><path class="cls-8" d="M233.77,79a6.18,6.18,0,0,1,5.31,2.52l-1.5,1.38a4.32,4.32,0,0,0-3.69-1.9c-3.09,0-5,2.37-5,5.58s1.92,5.61,5,5.61a4.37,4.37,0,0,0,3.69-1.89l1.5,1.38a6.18,6.18,0,0,1-5.31,2.52c-4.32,0-7.23-3.3-7.23-7.62S229.45,79,233.77,79Z"/><path class="cls-8" d="M241.39,86.58c0-4.2,2.76-7.59,7.17-7.59s7.17,3.39,7.17,7.59S253,94.2,248.56,94.2,241.39,90.78,241.39,86.58Zm12,0c0-2.94-1.71-5.58-4.8-5.58s-4.83,2.64-4.83,5.58,1.74,5.61,4.83,5.61,4.77-2.64,4.77-5.61Z"/><path class="cls-8" d="M276.88,84c0-1.83-.81-3-2.67-3a5.07,5.07,0,0,0-3.84,2.22V93.84h-2.25V84c0-1.83-.78-3-2.67-3a5.09,5.09,0,0,0-3.81,2.25V93.84h-2.25V79.35h2.25v2.1A6.25,6.25,0,0,1,266.32,79a3.72,3.72,0,0,1,3.9,2.7,6.1,6.1,0,0,1,4.86-2.7c2.64,0,4.05,1.47,4.05,4.38V93.84h-2.25Z"/></g></g></svg></a><a class="VPSocialLink no-icon" href="https://vitepress.dev/zh" aria-label="github" target="_blank" rel="noopener" data-v-68dde805 data-v-28313414><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-b947a84d data-v-9fb016b1><span class="container" data-v-9fb016b1><span class="top" data-v-9fb016b1></span><span class="middle" data-v-9fb016b1></span><span class="bottom" data-v-9fb016b1></span></span></button></div></div></div></div><div class="divider" data-v-b947a84d><div class="divider-line" data-v-b947a84d></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-e6a7cc9a data-v-5bc5da00><div class="container" data-v-5bc5da00><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-5bc5da00><span class="vpi-align-left menu-icon" data-v-5bc5da00></span><span class="menu-text" data-v-5bc5da00>菜单</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-5bc5da00 data-v-30654f6f><button data-v-30654f6f>回到顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-e6a7cc9a data-v-25fb6d97><div class="curtain" data-v-25fb6d97></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-25fb6d97><span class="visually-hidden" id="sidebar-aria-label" data-v-25fb6d97> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-9546f76a><section class="VPSidebarItem level-0 collapsible collapsed has-active" data-v-9546f76a data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h2 class="text" data-v-c93b9050>基础核心</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>Internet基础</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><section class="VPSidebarItem level-2 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h4 class="text" data-v-c93b9050>HTTP协议工作原理</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/internet/http/ajax" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【ajax请求】Xhr → ajax→ axios</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/internet/http/axios" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【axios+ts】class封装axios</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/internet/http/fetch" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【fetch】 fetch</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/internet/http/connect" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【HTTP】HTTP三次握手与四次挥手</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/internet/dns" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>DNS解析机制</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/internet/rendering" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>浏览器渲染原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/internet/https" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>HTTPS与安全传输</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>HTML</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/html/semantic" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>语义化标签</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/html/forms" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>表单与验证</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/html/seo" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>SEO最佳实践</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/html/a11y" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>无障碍访问</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>CSS</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/css/layout" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>布局系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/css/responsive" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>响应式设计</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/css/architecture" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>CSS架构方法论</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/css/modern-css" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>现代CSS方案</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed has-active" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>JavaScript</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><section class="VPSidebarItem level-2 collapsible collapsed has-active" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h4 class="text" data-v-c93b9050>基础</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/base/control-flow-statements" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>流程语句</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/base/operator" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>操作符</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/base/variable-scope-memory" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>变量、作用域与内存</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/base/array" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>数组Array</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/base/iterable-generate" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>迭代器与生成器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/base/function" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>函数Function</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/base/string" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>字符串String</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/base/object" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>对象Object</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/base/math" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Math</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/base/map-set" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>集合和映射</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/base/json" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>JSON</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/base/bom" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>BOM</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/base/promise" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>期约与异步函数</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/base/client-storage" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>客户端存储</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/base/module" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>模块</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/base/api" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>JavaScript Api</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/base/ajax-fetch" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>网络请求与远程资源</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h4 class="text" data-v-c93b9050>高级</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/advance/closure" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>闭包</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/advance/circular-dependency" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>循环依赖</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/advance/promise" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>手写Promise</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/advance/mutationObserver-protect-watermarks" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>mutationObserver 防止用户篡改水印</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h4 class="text" data-v-c93b9050>第三方库</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/library/driver" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【driver.js】 轻量库 实现引导页面</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/library/uglify" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【uglify-js】 js压缩</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/library/big" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【精度库】js 数学计算精度库比 </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/library/face-api" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【face-api.js】 人脸识别库</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/library/echarts" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【echarts.js】echarts库</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/library/jspdf" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【jspdf.js】导出库</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h4 class="text" data-v-c93b9050>其他</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/core/javascript/other/js-files" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>JS文件的几种格式</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-9546f76a><section class="VPSidebarItem level-0 collapsible collapsed" data-v-9546f76a data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h2 class="text" data-v-c93b9050>工程化体系</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>构建工具</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/build/vite" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Vite原理与实践</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/build/webpack" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Webpack高级配置</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/build/rollup" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Rollup打包优化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/build/swc" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>SWC编译器</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>包管理</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/package/pnpm" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【pnpm】新型的包管理工具pnpm</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/package/nvm" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【nvm】 使用问题汇总</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/package/monorepo" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【Monorepo】Monorepo实践</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/package/deps-optimization" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>依赖优化策略</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/package/node-sass" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【node-sass】 安装失败解决办法</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/package/yarn" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【yarn】yarn安装中出现依赖冲突 package.json 中的resolutions 字段了</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>质量保障</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/quality/code" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>代码规范</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/quality/airbnb" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>eslint规范 爱彼迎airbnb</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/quality/unit-testing" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>单元测试(Jest/Vitest)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/quality/e2e" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>E2E测试(Cypress/Playwright)</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>部署优化</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/deploy/base" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>前端性能优化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/deploy/tree-shaking" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Tree Shaking原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/deploy/code-splitting" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>代码分割策略</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/deploy/gzip" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>gzip 压缩</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/deploy/terser" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Terser压缩js代码</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/deploy/perf-metrics" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>性能监控(Lighthouse)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/deploy/pwa" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>PWA实施方案</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/deploy/big-file" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>大文件性能优化方向</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/engineering/deploy/offline-deploy" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>离线部署</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-9546f76a><section class="VPSidebarItem level-0 collapsible collapsed" data-v-9546f76a data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h2 class="text" data-v-c93b9050>框架生态</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>主流框架</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><section class="VPSidebarItem level-2 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h4 class="text" data-v-c93b9050>vue2</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/framework/vue2/methodsToPatch" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【vue2源码】改写数组的方法</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/framework/vue2/nexttick" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【vue2源码】nexttick</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/framework/vue2/vfor-vif" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【vue2源码】v-for和v-if为什么不能一起用</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h4 class="text" data-v-c93b9050>vue3</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/framework/vue3/methodsToPatch" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【vue2源码】vue2 改写数组的方法</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/framework/vue3/source-code" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>vue源码</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h4 class="text" data-v-c93b9050>react</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/framework/react/snippets" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>ES7+ React/Redux/React-Native 代码片段</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/framework/react/redux-toolkit" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>redux-toolkit 完整学习笔记</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/framework/react/style-isolation" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>react样式隔离</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/framework/react/redux-store-in-non-component-files" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>非react组件使用redux</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>高级模式</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/framework/advanced/ssr-ssg" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>SSR/SSG方案</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/framework/advanced/state-management" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>状态管理策略</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/framework/advanced/routing" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>路由解决方案</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>跨平台方案</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/framework/cross-platform/react-native" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>React Native原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/framework/cross-platform/electron" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Electron桌面开发</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/framework/cross-platform/tauri" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Tauri替代方案</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-9546f76a><section class="VPSidebarItem level-0 collapsible collapsed" data-v-9546f76a data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h2 class="text" data-v-c93b9050>网络与通信</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>网络协议</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/network/protocols/rest" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>RESTful设计规范</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/network/protocols/graphql" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>GraphQL实践</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/network/protocols/websocket" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>WebSocket实时通信</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/network/protocols/sse" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Server-Sent Events</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>安全机制</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/network/security/auth" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>认证策略</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/network/security/cors" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>CORS机制详解</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/network/security/csp" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>内容安全策略</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/network/security/owasp" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>OWASP防护实践</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>数据交互</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/network/data/fetch" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Fetch API最佳实践</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/network/data/axios" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Axios高级封装</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/network/data/file-upload" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>文件上传方案</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/network/data/data-compression" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>数据压缩策略</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-9546f76a><section class="VPSidebarItem level-0 collapsible collapsed" data-v-9546f76a data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h2 class="text" data-v-c93b9050>浏览器技术</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>浏览器API</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/browser/api/service-workers" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Service Workers</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/browser/api/storage" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Web Storage</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/browser/api/geolocation" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Geolocation API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/browser/api/web-workers" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Web Workers多线程</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>高级特性</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/browser/advanced/web-components" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Web Components</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/browser/advanced/shadow-dom" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Shadow DOM封装</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/browser/advanced/custom-elements" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Custom Elements</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/browser/advanced/intersection-observer" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Intersection Observer</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>设备交互</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/browser/device/media-devices" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>媒体设备访问</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/browser/device/sensors" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>传感器API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/browser/device/payment-request" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>支付请求API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/browser/device/hardware-integration" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>硬件对接方案</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-9546f76a><section class="VPSidebarItem level-0 collapsible collapsed" data-v-9546f76a data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h2 class="text" data-v-c93b9050>性能优化</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>核心指标</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/performance/core/rail" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>RAIL模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/performance/core/vitals" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Web Vitals监控</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/performance/core/lighthouse" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Lighthouse深度优化</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>优化策略</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/performance/strategies/prpl" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>PRPL模式</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/performance/strategies/preloading" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>资源预加载</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/performance/strategies/rendering" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>渲染性能优化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/performance/strategies/memory" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>内存管理</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>调试工具</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/performance/tools/devtools" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Chrome DevTools高级</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/performance/tools/profiling" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>性能分析技巧</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/performance/tools/network-analysis" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>网络优化分析</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-9546f76a><section class="VPSidebarItem level-0 collapsible collapsed" data-v-9546f76a data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h2 class="text" data-v-c93b9050>类型系统</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>TypeScript</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/typescript/type-system" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>类型系统深入</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/typescript/integration" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>工程集成方案</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/typescript/advanced-types" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>高级类型技巧</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-9546f76a><section class="VPSidebarItem level-0 collapsible collapsed" data-v-9546f76a data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h2 class="text" data-v-c93b9050>媒体处理</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>流媒体技术</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/media/streaming/webrtc" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>WebRTC实时通信</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/media/streaming/streaming-protocols" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>HLS/DASH协议</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/media/streaming/players" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>媒体播放器优化</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>媒体API</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/media/api/video" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Video处理优化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/media/api/canvas" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Canvas高级应用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/media/api/audio" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>Web Audio API</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-9546f76a><section class="VPSidebarItem level-0 collapsible collapsed" data-v-9546f76a data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h2 class="text" data-v-c93b9050>移动端</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>expo框架</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/app/expo/constants" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【expo】 常量</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/app/expo/expo-secure-store" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【expo】 expo-secure-store 安全存储库</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/app/expo/async-storage" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【expo】Async Storage 存储库</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>其他</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/app/other/signature" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>签名</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/app/other/click-delay" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>移动端Click300毫秒点击延迟</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/app/other/1px-error" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>1px误差的原因以及解决方案</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-9546f76a><section class="VPSidebarItem level-0 collapsible collapsed" data-v-9546f76a data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h2 class="text" data-v-c93b9050>地图</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c93b9050 data-v-c93b9050><div class="item" role="button" tabindex="0" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><h3 class="text" data-v-c93b9050>map</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c93b9050><span class="vpi-chevron-right caret-icon" data-v-c93b9050></span></div></div><div class="items" data-v-c93b9050><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/map/cesium/cesium-draw" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【cesium】 Draw标绘类</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c93b9050 data-v-c93b9050><div class="item" data-v-c93b9050><div class="indicator" data-v-c93b9050></div><a class="VPLink link link" href="/frontend/map/cesium/cesium-flyline" data-v-c93b9050><!--[--><p class="text" data-v-c93b9050>【cesium】 FlyLine飞行漫游路线</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-e6a7cc9a data-v-e69ea8b2><div class="VPDoc has-sidebar has-aside" data-v-e69ea8b2 data-v-165a4414><!--[--><!--]--><div class="container" data-v-165a4414><div class="aside" data-v-165a4414><div class="aside-curtain" data-v-165a4414></div><div class="aside-container" data-v-165a4414><div class="aside-content" data-v-165a4414><div class="VPDocAside" data-v-165a4414 data-v-fed9f201><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-fed9f201 data-v-38e7f3e3><div class="content" data-v-38e7f3e3><div class="outline-marker" data-v-38e7f3e3></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-38e7f3e3>本页导航</div><ul class="VPDocOutlineItem root" data-v-38e7f3e3 data-v-33c1d934><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-fed9f201></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-165a4414><div class="content-container" data-v-165a4414><!--[--><!--]--><main class="main" data-v-165a4414><div style="position:relative;" class="vp-doc _frontend_core_javascript_base_ajax-fetch" data-v-165a4414><div><h1 id="网络请求与远程资源" tabindex="-1">网络请求与远程资源 <a class="header-anchor" href="#网络请求与远程资源" aria-label="Permalink to &quot;网络请求与远程资源&quot;">​</a></h1><p>Asynchronous Javascript And XML</p><p>a（async异步）j（JavaScript）a（and）x（XML：与json同级语言格式）</p><p>ajax 作为前端必修课，页面无刷新获取数据。是一种创建动态网页（即前后端交互）的技术。虽然Ajax 这个名称中包含 XML,但实际上Ajax 通信与数据格式无关。</p><p>XHR对象的API被普遍认为比较难用,而 FetchApI 自从诞生以后就迅速成为了 XHR更现代的替代标准。Fetch API支持期约(promise)和服务线程(service worker ),已经成为极其强大的 Web 开发工具</p><h2 id="_1-xmlhttprequest-对象" tabindex="-1">1 XMLHttpRequest 对象 <a class="header-anchor" href="#_1-xmlhttprequest-对象" aria-label="Permalink to &quot;1 XMLHttpRequest 对象&quot;">​</a></h2><p>所有现代浏览器都通过 <strong>XMLHttpRequest</strong> 构造数原生支持 XHR 对象;</p><p><code>let xhr = new XMLHttpRequest();</code></p><hr><h3 id="_1-1-xmlhttprequest" tabindex="-1">1.1 XMLHttpRequest <a class="header-anchor" href="#_1-1-xmlhttprequest" aria-label="Permalink to &quot;1.1 XMLHttpRequest&quot;">​</a></h3><h5 id="_1-1-1-xmlhttprequest-属性" tabindex="-1">1.1.1 XMLHttpRequest 属性 <a class="header-anchor" href="#_1-1-1-xmlhttprequest-属性" aria-label="Permalink to &quot;1.1.1 XMLHttpRequest 属性&quot;">​</a></h5><table tabindex="0"><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td><code>XMLHttpRequest.onreadystatechange</code></td><td>监控事件，当 xhr.readyState 属性发生改变触发</td></tr><tr><td><code>XMLHttpRequest.readyState</code></td><td>xhr的状态0-4共五个请求状态码，请求响应过程的当前活动阶段</td></tr><tr><td><code>XMLHttpRequest.response</code></td><td>返回一个 ArrayBuffer、Blob、Document，或 DOMString，具体是哪种类型取决于 XMLHttpRequest.responseType 的值。其中包含整个响应实体（response entity body）。</td></tr><tr><td><code>XMLHttpRequest.responseText</code></td><td>返回一个 DOMString，该 DOMString 包含对请求的响应，如果请求未成功或尚未发送，则返回 null。</td></tr><tr><td><code>XMLHttpRequest.responseURL</code></td><td>返回经过序列化（serialized）的响应 URL，如果该 URL 为空，则返回空字符串。</td></tr><tr><td><code>XMLHttpRequest.responseXML</code></td><td>返回一个 Document，其中包含该请求的响应，如果请求未成功、尚未发送或是不能被解析为 XML 或 HTML，则返回 null。</td></tr><tr><td><code>XMLHttpRequest.responseType</code></td><td>指定响应体格式</td></tr><tr><td><code>XMLHttpRequest.status</code></td><td>响应的http状态</td></tr><tr><td><code>XMLHttpRequest.statusText</code></td><td>返回一个 DOMString，其中包含 HTTP 服务器返回的响应状态。与 XMLHTTPRequest.status 不同的是，它包含完整的响应状态文本（例如，&quot;200 OK&quot;）。</td></tr><tr><td><code>XMLHttpRequest.timeout</code></td><td>一个无符号长整型（unsigned long）数字，表示该请求的最大请求时间（毫秒），若超出该时间，请求会自动终止。</td></tr><tr><td><code>XMLHttpRequest.upload</code></td><td>XMLHttpRequestUpload，代表上传进度。</td></tr><tr><td><code>XMLHttpRequest.withCredentials</code></td><td>一个布尔值 (en-US)，用来指定跨域 Access-Control 请求是否应当带有授权信息，如 cookie 或授权 header 头。</td></tr></tbody></table><p>XMLHttpRequest 对象的 readyState 属性，表示请求响应过程的当前活动阶段：</p><ul><li>0： 未初始化(Uninitialized)。创建了XMLHttpRequest对象，但未调用open()方法</li><li>1： 已打开(Open)。已经调用open()方法，但未调用send()方法</li><li>2： 已发送(Sent)。已经调用send()方法，但未接收到响应</li><li>3： 接收中(Receiving)。已经接收到部分响应数据</li><li>4： 完成(Complete)。已经接收到全部响应数据，并且可以在客户端使用</li></ul><br><h5 id="_1-1-2-xmlhttprequest-事件处理器" tabindex="-1">1.1.2 XMLHttpRequest 事件处理器 <a class="header-anchor" href="#_1-1-2-xmlhttprequest-事件处理器" aria-label="Permalink to &quot;1.1.2 XMLHttpRequest 事件处理器&quot;">​</a></h5><p>除了onreadystatechange，大部分浏览器还实现了以下事件处理器。除了可以设置 on* 属性外，也提供标准的监听器 addEventListener() API 来监听XMLHttpRequest 事件。除了可以设置 on* 属性外，也提供标准的监听器 addEventListener() API 来监听XMLHttpRequest 事件。</p><table tabindex="0"><thead><tr><th>事件处理器</th><th>描述</th></tr></thead><tbody><tr><td><code>XMLHttpRequest.onprogress</code></td><td>当请求传输数据时，触发该事件。可以通过监听此事件来获取请求的进度信息。</td></tr><tr><td><code>XMLHttpRequest.onload</code></td><td>当请求成功完成时，触发该事件。此事件只会在请求成功（如HTTP状态码为200）时触发。</td></tr><tr><td><code>XMLHttpRequest.onerror</code></td><td>当请求发生错误时，触发该事件。这包括网络错误、服务器错误等。</td></tr><tr><td><code>XMLHttpRequest.onabort</code></td><td>当请求被中止时，触发该事件。这通常是因为用户取消了请求或由于其他原因请求被中止。</td></tr></tbody></table><br><h5 id="_1-1-3-xmlhttprequest-方法" tabindex="-1">1.1.3 XMLHttpRequest 方法 <a class="header-anchor" href="#_1-1-3-xmlhttprequest-方法" aria-label="Permalink to &quot;1.1.3 XMLHttpRequest 方法&quot;">​</a></h5><table tabindex="0"><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td><code>XMLHttpRequest.open(method, url, async?, user?, password?)</code></td><td>打开要发送请求的地址，参数：请求方式、请求的url地址、请求是否异步的布尔值（默认true）</td></tr><tr><td><code>XMLHttpRequest.send(requsetBody?)</code></td><td>发送请求（体）</td></tr><tr><td><code>XMLHttpRequest.setRequestHeader(key, value)</code></td><td>设置请求头</td></tr><tr><td><code>XMLHttpRequest.getResponseHeader(key)</code></td><td>获取响应头</td></tr><tr><td><code>XMLHttpRequest.abort()</code></td><td>请求发出，立刻终止</td></tr></tbody></table><br><h5 id="_1-1-4-xmlhttprequest-使用" tabindex="-1">1.1.4 XMLHttpRequest 使用 <a class="header-anchor" href="#_1-1-4-xmlhttprequest-使用" aria-label="Permalink to &quot;1.1.4 XMLHttpRequest 使用&quot;">​</a></h5><p>只能访问同源 URL,也就是域名相同、端口相同、协议相同。如果请求的URL与发送请求的页面在任何方面有所不同，则会抛出安全错误。</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 打开要发送地址，演示用（实际开发中勿用同步请求）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;get&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;example.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 发送请求</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 收到响应后，XHR对象的属性responseText、responseXML、status和statusText会被填充。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 收到响应后,第一步要检查status 属性以确保响应成功返回。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 一般来说，HTTP 状态码为 2x 表示成功。此时,responseText 或responsexM(如果内容类型正确) 属性中会有内容。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 如果 HTTP状态码是304,则表示资源未修改过,是从浏览器缓存中直接拿取的。当然这也意味着响应有效。为确保收到正确的响应，应该检查这些状态，如下所示:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 304</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xhr.responseText);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Request was unsuccessful: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 初始化 XMLHttpRequest 对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> XMLHttpRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 以下代码使用 DOMLeve0风格为XHR对象添加了事件处理程序,因为并不是所有浏览器都支持DOM Level 2风格。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 与其他事件处理程序不同,onreadystatechange 事件处理程序不会收到event对象。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onreadystatechange</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // XHR对象有一个 readystate 属性,每次readyState 从一个值变成另一个值,都会触发readystatechange事件。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 一般来说,我们唯一关心的 readystate 值是 4.表示数据已就绪。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (xhr.readyState </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 304</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xhr.responseText);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Request was unsuccessful: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 为保证跨浏览器兼容，onreadystatechange 事件处理程应该在调用 open()之前赋值。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;get&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;example.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在收到响应之前如果想取消异步请求,可以调用 abort()方法:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 调用这个方法后,XHR 对象会停止触发事件,并阻止访问这个对象上任何与响应相关的属性。中断请求后，应该取消对 XHR对象的引用。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 由于内存问题,不推荐重用 XHR对象。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">abort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>XMLHttpRequest.open(method, url, async?, user?, password?)</code></p><ul><li>method: 要使用的 HTTP 方法，比如 GET、POST、PUT、DELETE、等。对于非 HTTP(S) URL 被忽略。</li><li>url: 一个 DOMString 表示要向其发送请求的 URL。</li><li>async?: 一个可选的布尔参数，表示是否异步执行操作，默认为 true。如果值为 false，send() 方法直到收到答复前不会返回。如果 true，已完成事务的通知可供事件监听器使用。如果 multipart 属性为 true 则这个必须为 true，否则将引发异常。</li><li>user?: 可选的用户名用于认证用途；默认为 null。</li><li>password?: 可选的密码用于认证用途，默认为 null。</li></ul><p><code>xhr.open()</code> 的第三个参数为true代表异步请求，此方法会在发送会立即返回。如果第三个参数为false代表同步请求，则此方法直到响应到达后才会返回。 <code>XMLHttpRequest.send(requsetBody?)</code> 方法接受一个可选的参数，其作为请求主体；如果请求方法是 GET 或者 HEAD，则应将请求主体设置为 null。requsetBody可以为以下</p><ul><li>可以为 Document, 在这种情况下，它在发送之前被序列化。</li><li>可以是 Blob, BufferSource, FormData, URLSearchParams, 或者 USVString 对象。</li><li>null，默认为null</li></ul><br><h3 id="_1-2-http-头部" tabindex="-1">1.2 HTTP 头部 <a class="header-anchor" href="#_1-2-http-头部" aria-label="Permalink to &quot;1.2 HTTP 头部&quot;">​</a></h3><p>每个 HTTP 请求和响应都会携带一些头部字段,这些字段可能对开发者有用。XHR 对象会通过-些方法暴露与请求和响应相关的头部字段。 默认情况下，XHR请求会发送以下头部字段：</p><table tabindex="0"><thead><tr><th>HTTP头部字段</th><th>描述</th></tr></thead><tbody><tr><td><code>Accept</code></td><td>浏览器可以处理的内容类型。</td></tr><tr><td><code>Accept-Charset</code></td><td>浏览器可以显示的字符集。</td></tr><tr><td><code>Accept-Encoding</code></td><td>浏览器可以处理的压缩编码类型。</td></tr><tr><td><code>Accept-Language</code></td><td>浏览器使用的语言。</td></tr><tr><td><code>Connection</code></td><td>浏览器与服务器的连接类型</td></tr><tr><td><code>Cookie</code></td><td>页面中设置的 Cookie。</td></tr><tr><td><code>Host</code></td><td>发送请求的页面所在的域。</td></tr><tr><td><code>Referer</code></td><td>发送请求的页面的 URI。注意,这个字段在 HTTP 规范中就拼错了,所以考虑到兼容性也必须将错就错。(正确的拼写应该是 Referrer。)</td></tr><tr><td><code>user-Agent</code></td><td>浏览器的用户代理字符串。</td></tr></tbody></table><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> XMLHttpRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onreadystatechange</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (xhr.readyState </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 304</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xhr.responseText);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Request was unsuccessful: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;get&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;example.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 如果需要发送额外的请求头部,可以使用 setRequestHeader()方法。这个方法接收两个参数:头部字段的名称和值。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 必须在 open ()之后、send()之前调用 setRequestHeader ()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 自定义头部一定要区别于浏览器正常发送的头部</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 否则可能影响服务器正常响应。有些浏览器允许重写默认头部，有些浏览器则不允许。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setRequestHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MyHeader&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MyValue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 可以使用 getResponseHeader()方法从 XHR 对象获取响应头部，只要传人要获取头部的名称即可。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> myHeader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getResponseHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MyHeader&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 如果想取得所有响应头部,可以使用 getallResponseHeaders()方法,这个方法会返回包含所有响应头部的字符串。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> allHeaders </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAllResponseHeaders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 通过解析以下头部字段的输出,就可以知道服务器发送的所有头部,而不需要单独去检查了。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Date: Sun,14 Nov 2004 18:04:03 GMT</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Server: Apache/1.3.29 (Unix)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Vary: Accept</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// X-Powered-By: HP/4.3.8</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Connection: close</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Content-Type: text/html; charset=iso-8859-1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><br><h3 id="_1-3-get请求" tabindex="-1">1.3 GET请求 <a class="header-anchor" href="#_1-3-get请求" aria-label="Permalink to &quot;1.3 GET请求&quot;">​</a></h3><p>最常用的请求方法是 GET 请求,用于向服务器查询某些信息。必要时,需要在 GET 请求的 URL后面添加查询字符串参数。对 XHR 而言,查询字符串必须正确编码后添加到 URL 后面,然后再传给 <code>open()</code> 方法。</p><p>查询字符串中的每个名和值都必须使用 <code>encodeURIcomponent()</code> 编码，所有名/值对必须以和号(&amp;)分隔，如下面的例子所示:</p><p><code>xhr.open(&quot;get&quot;,&quot;example.php?name1=valuel&amp;name2=value2&quot;, true);</code></p><p>可以使用以下函数将查询字符串参数添加到现有的 URL 末尾:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@description</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">: 将查询字符串参数添加到现有的 URL 末尾。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> url</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 查询字符串的 URL</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 查询参数</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 参数值</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {*}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addURLParam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 检查 URL中是否已经包含问号(以确定是否已经存在其他参数)。如果没有则加上一个问号;否则就加上一个和号。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> url.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">indexof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;?&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&amp;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 分别对参数名和参数值进行编码,并添加到 URL 末尾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> encodeURIComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;_&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> encodeURIComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 返回更新后的 URL。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> url;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 这里使用adduRLParam()函数可以保证通过 XHR 发送请求的 URL 格式正确</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;example.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 添加参数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addURLParam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Nicholas&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addURLParam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;book&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Professional JavaScript&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 初始化请求</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;get&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, url, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><br><h3 id="_1-4-post请求" tabindex="-1">1.4 POST请求 <a class="header-anchor" href="#_1-4-post请求" aria-label="Permalink to &quot;1.4 POST请求&quot;">​</a></h3><p>第二个最常用的请求是 POST 请求,用于向服务器发送应该保存的数据。每个POST 请求都应该在请求体中携带提交的数据,而GET请求则不然。POST 请求的请求体可以包含非常多的数据,而且数据可以是任意格式。要初始化POST 请求, <code>open()</code> 方法的第一个参数要传&quot;post&quot;,比如:</p><p><code>xhr.open(&quot;post&quot;,&quot;example.php&quot;, true);</code></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> submitData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> XMLHttpRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onreadystatechange</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (xhr.readyState </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 304</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xhr.responseText);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Request was unsuccessful: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;post&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;postexample.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setRequestHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Content-Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;application/x-www-form-urlencoded&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 来自D为&quot;user-info&quot;的表单中的数据被序列化之后发送给了服务器。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> form </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getelementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-info&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">serialize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(form));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>注意 POST 请求相比 GET 请求要占用更多资源。从性能方面说，发送相同数量的数据GET请求比 POST请求要快两倍。</p><br><h3 id="_1-5-xmlhttprequest-level2" tabindex="-1">1.5 XMLHttpRequest Level2 <a class="header-anchor" href="#_1-5-xmlhttprequest-level2" aria-label="Permalink to &quot;1.5 XMLHttpRequest Level2&quot;">​</a></h3><p>并非所有浏览器都实现了 XMLHttpRequest Level2的所有部分,但所有浏览器都实现了其中部分功能。</p><h5 id="_1-5-1-formdata-类型" tabindex="-1">1.5.1 FormData 类型 <a class="header-anchor" href="#_1-5-1-formdata-类型" aria-label="Permalink to &quot;1.5.1 FormData 类型&quot;">​</a></h5><p>现代 Web 应用程序中经常需要对表单数据进行序列化,因此 XMLHtpRequest Level 2 新增了FormData 类型。 FormData 类型便于表单序列化,也便于创建与表单类似格式的数据然后通过 XHR发送。</p><p>下面的代码创建了一个 FormData 对象,并填充了一些数据:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FormData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// append()方法接收两个参数:键和值,相当于表单字段名称和该字段的值。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Nicholas&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>此外,通过直接给 FormData 构造函数传入一个表单元素，也可以将表单中的数据作为键/值对填充进去: <code>let data = new FormData(document.forms[0]);</code></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> XMLHttpRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onreadystatechange</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (xhr.readyState </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 304</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xhr.responseText);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Request was unsuccessful: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;post&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;postexample.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 来自D为&quot;user-info&quot;的表单中的数据被序列化之后发送给了服务器。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> form </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getelementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-info&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FormData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(form));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>使用 FormData 的另一个方便之处是不再需要给 XHR对象显式设置任何请求头部了。XHR对象能够识别作为 FormData 实例传人的数据类型并自动配置相应的头部。</p><br><h5 id="_1-5-2-超时" tabindex="-1">1.5.2 超时 <a class="header-anchor" href="#_1-5-2-超时" aria-label="Permalink to &quot;1.5.2 超时&quot;">​</a></h5><p>XHR对象增加了一个 timeout 属性,用于表示发送请求后等待多少毫秒,如果响应不成功就中断请求。</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> XMLHttpRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onreadystatechange</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (xhr.readyState </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 304</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xhr.responseText);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Request was unsuccessful: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ex) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      //假设由ontimeout 处理</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;get&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;timeout.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 给 timeout 设置1000 毫秒意味着,如果请求没有在)秒钟内返回则会中断。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 此时则会触发 ontimeout 事件处理程序,readystate 仍然会变成4,因此也会调用 onreadystatechange 事件处理程序。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.timeout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 调用 ontimeout 事件处理</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ontimeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Request did not return in a second.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h5 id="_1-5-3-overridemimetype-方法" tabindex="-1">1.5.3 overrideMimeType()方法 <a class="header-anchor" href="#_1-5-3-overridemimetype-方法" aria-label="Permalink to &quot;1.5.3 overrideMimeType()方法&quot;">​</a></h5><p>Firefox 首先引人了 <code>overrideMimeType()</code> 方法用于写 XHR 响应的 MIME 类型。这个特性后来也被添加到了 XMLHtpRequest Level 2。因为响应返回的 MIME 类决定了 XHR 对象如何处理响应,所以如果有办法覆盖服务器返回的类型,那么是有帮助的。</p><p>假设服务器实际发送了 XML数据,但响应头设置的 MIME 类型是 <code>text/plain</code> 。结果就会导致然数据是 XML,但 responseXML 属性是 null。此时调用 <code>overrideMimeType()</code> 可以保证将响应当成 XML 而不是纯文本来处理:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 这个例子强制让 XHR 把响应当成 XML 而不是纯文本来处理。为了正确覆盖响应的 MIME 类型</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 必须在调用 sena()之前调用 overrideMimeType()。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> XMLHttpRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;get&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">overrideMimeType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text /xm1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><br><br><h2 id="_2-进度事件-progress-events" tabindex="-1">2 进度事件 Progress Events <a class="header-anchor" href="#_2-进度事件-progress-events" aria-label="Permalink to &quot;2 进度事件 Progress Events&quot;">​</a></h2><hr><p>ProgressEvent 接口是测量如 HTTP 请求（一个XMLHttpRequest，或者一个 <code>&lt;img&gt;</code>，<code>&lt;audio&gt;</code>，<code>&lt;video&gt;</code>，<code>&lt;style&gt;</code> 或 <code>&lt;link&gt;</code> 等底层资源的加载）等底层流程进度的事件。</p><p>每次请求都会首先触发 <strong>loadstart</strong> 事件,之后是一个或多个 <strong>progress</strong> 事件,接着是 <strong>error</strong>, <strong>abort</strong> 或 <strong>load</strong> 中的一个,最后以 <strong>loadend</strong> 事件结束。</p><table tabindex="0"><thead><tr><th>进度事件</th><th>描述</th></tr></thead><tbody><tr><td><code>loadstart</code></td><td>在接收到响应的第一个字节时触发。</td></tr><tr><td><code>progress</code></td><td>在接收响应期间反复触发。</td></tr><tr><td><code>error</code></td><td>在请求出错时触发。</td></tr><tr><td><code>abort</code></td><td>在调用 abort()终止连接时触发。</td></tr><tr><td><code>loadend</code></td><td>通信完成时,且在 error、abort 或 load 之后触发。</td></tr><tr><td><code>load</code></td><td>在成功接收完响应时触发。</td></tr></tbody></table><h3 id="_2-1-load-事件" tabindex="-1">2.1 load 事件 <a class="header-anchor" href="#_2-1-load-事件" aria-label="Permalink to &quot;2.1 load 事件&quot;">​</a></h3><p>增加了一个 <strong>load</strong> 事件用于替代 <strong>readystatechange</strong> 事件。 <strong>load</strong> 事件在响应接收完成后立即触发,这样就不用检查 <strong>readystate</strong> 属性了。<strong>onload</strong> 事件处理程序会收到一个 <strong>event</strong> 对象,其 <strong>target</strong> 属性设置为 XHR 实例,在这个实例上可以访问所有 XHR对象属性和方法。</p><p>只要是从服务器收到响应,无论状态码是什么,都会发 <strong>load</strong> 事件。这意味着还需要检查 <strong>status</strong> 属性才能确定数据是否有效。Firefox、Opera、Chrome 和 Safari 都支持 load 事件。</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> XMLHttpRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 304</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xhr.responseText);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Request was unsuccessful: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;get&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;altevents.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><br><h3 id="_2-2-progress-事件" tabindex="-1">2.2 progress 事件 <a class="header-anchor" href="#_2-2-progress-事件" aria-label="Permalink to &quot;2.2 progress 事件&quot;">​</a></h3><p>progress 事件,在浏览器接收数据期间,这个事件会反复触发。每次触发时, <code>onprogress</code> 事件处理程序都会收到 <strong>event</strong> 对象,其 <strong>target</strong> 属性是 XHR对象。且包含3个额外属性:</p><ul><li>lengthcomputable: 是一个布尔值,表示进度信息是否可用</li><li>position: 是接收到的字节数</li><li>totalsize: 响应的 Content-Length 头部定义的总字节数</li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> XMLHttpRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 304</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xhr.responseText);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Request was unsuccessful: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 必须在调用open()之前添加 onprogress 事件处理程序。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onprogress</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> divstatus </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 每次触发 progress 事件都会更新 HTML 元素中的信息。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (event.lengthComputable) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 假设响应有 content-Length 头部,就可以利用这些信息计算出已经收到响应的百分比。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    divstatus.innerHTML </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Received&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event.position </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;of&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event.totalSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;bytes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;get&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;altevents.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><br><br><h2 id="_3-跨资源共享-cors" tabindex="-1">3. 跨资源共享（CORS） <a class="header-anchor" href="#_3-跨资源共享-cors" aria-label="Permalink to &quot;3. 跨资源共享（CORS）&quot;">​</a></h2><hr><p>跨源资源享(CORS,Cross-Onigin Resource Sharing)定义了浏览器与服务器如何实现跨源通信。CORS 背后的基本思路就是使用自定义的 HTTP 头部允许浏览器和服务器相互了解,以确实请求或响应应该成功还是失败。</p><p>对于简单的请求，比如 GET 或 POST 请求,没有自定义头部,而且请求体是 text/plain 类型这样的请求在发送时会有一个外的头部叫 origin。origin 头部包含发送请求的页面的源(协议域名和端口),以便服务器确定是否为其提供响应。下面是 origin 头部的一个示例:</p><p><code>Origin: http://www.nczonline.net</code></p><p>如果服务器决定响应请求,那么应该发送 <strong>Access-control-Allow-origin</strong> 头部,包含相同的源或者如果资源是公开的,那么就包含 <code>*</code> 。比如:</p><p><code>Access-Control-Allow-Origin: http://www.nczonline.net</code></p><p>如果没有这个头部,或者有但源不匹配,则表明不会响应浏览器请求。否则,服务器就会处理这个请求。注意,无论请求还是响应都不会包含 cookie 信息。</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 现代浏览器通过 XMLHttpRequest 对象原生支持 CORS。在尝试访问不同源的资源时,这个行为会被自动触发。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> XMLHttpRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 304</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xhr.responseText);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Request was unsuccessful: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xhr.status);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 要向不同域的源发送请求,可以使用标准 XHR对象并给 open ()方法传人一个绝对 URL比如:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;get&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://www.somewhere-else.com/page/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>跨域 XHR 对象允许访问 <strong>status</strong> 和 <strong>statusText</strong> 属性,也允许同步请求。出于安全考虑,跨域 XHR对象也施加了一些额外限制。</p><ul><li>不能使用 <code>setRequestHeader()</code> 设置自定义头部。</li><li>不能发送和接收 cookie。</li><li><code>getAllResponseHeaders()</code> 方法始终返回空字符串。</li></ul><p>因为无论同域还是跨域请求都使用同一个接口,所以最好在访问本地资源时使用相对 URL,在访问远程资源时使用绝对 URL。这样可以更明确地区分使用场景,同时避免出现访问本地资源时出现头部或cookie 信息访问受限的问题。</p><h3 id="_3-1-预检请求" tabindex="-1">3.1 预检请求 <a class="header-anchor" href="#_3-1-预检请求" aria-label="Permalink to &quot;3.1 预检请求&quot;">​</a></h3><p>通常是由浏览器自动发起的请求，开发者无需手动去操作。</p><p>一个 CORS 预检请求是用于检查服务器是否支持 CORS 即跨域资源共享。</p><p>它一般是用了以下几个 HTTP 请求首部的 OPTIONS 请求：Access-Control-Request-Method 和 Access-Control-Request-Headers，以及一个 Origin 首部。</p><ul><li><code>origin</code>: 与简单请求相同。</li><li><code>Access-Contro1-Request-Method</code>: 请求希望使用的方法。</li><li><code>Access-Control-Request-Headers</code>: (可选)要使用的逗号分隔的自定义头部列表。</li></ul><p>一个客户端可能会在实际发送一个 DELETE 请求之前，先向服务器发起一个预检请求，用于询问是否可以向服务器发起一个 DELETE 请求：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>OPTIONS /resource/foo</span></span>
<span class="line"><span>Access-Control-Request-Method: DELETE</span></span>
<span class="line"><span>Access-Control-Request-Headers: origin, x-requested-with</span></span>
<span class="line"><span>Origin: https://foo.bar.org</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>如果服务器允许，那么服务器就会响应这个预检请求。并且其响应首部 Access-Control-Allow-Methods 会将 DELETE 包含在其中：</p><ul><li><code>Access-Contro1-Allow-origin</code>: 与简单请求相同。</li><li><code>Access-Contro1-Allow-Methods</code>: 允许的方法(逗号分隔的列表)。</li><li><code>Access-Contro1-Allow-Headers</code>: 服务器允许的头部(逗号分隔的列表 )。</li><li><code>Access-Contro1-Max-Age</code>: 缓存预检请求的秒数。</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>HTTP/1.1 200 OK</span></span>
<span class="line"><span>Content-Length: 0</span></span>
<span class="line"><span>Connection: keep-alive</span></span>
<span class="line"><span>Access-Control-Allow-Origin: https://foo.bar.org</span></span>
<span class="line"><span>Access-Control-Allow-Methods: POST, GET, OPTIONS, DELETE</span></span>
<span class="line"><span>Access-Control-Max-Age: 86400</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>预检请求返回后,结果会按响应指定的时间缓存一段时间。换句话说,只有第一次发送这种类型的请求时才会多发送一次额外的 HTTP 请求。</p><br><h3 id="_3-2-凭据请求" tabindex="-1">3.2 凭据请求 <a class="header-anchor" href="#_3-2-凭据请求" aria-label="Permalink to &quot;3.2 凭据请求&quot;">​</a></h3><p><strong>XMLHttpRequest.withCredentials</strong> 属性是一个布尔值，它指示了是否该使用类似 <strong>cookie</strong> 、 <strong>Authorization标头</strong> 或者 <strong>TLS客户端证书</strong> 等凭据进行跨站点访问控制（Access-Control）请求。设置 <strong>withCredentials</strong> 对同源请求是无效的。</p><p>默认情况下,跨源请求不提供凭据(cookie、HTTP 认证和客户端 SSL 证书)。可以通过将 <strong>withcredentials</strong> 属性设置为 true 来表明请求会发送凭据。如果服务器允许带凭据的请求,那么可以在响应中包含如下 HTTP 头部:</p><p><code>Access-Control-Allow-Credentials: true</code></p><p>如果发送了凭据请求而服务器返回的响应中没有这个头部,则浏览器不会把响应交给 JavaScript（ <strong>responseText</strong> 是空字符串, <strong>status</strong> 是0, <code>onerror()</code> 被调用）。注意,服务器也可以在预检请求的响应中发送这个 HTTP 头部,以表明这个源允许发送凭据请求。</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> xhr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> XMLHttpRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;GET&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://example.com/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.withCredentials </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><br><br><h2 id="_4-替代性跨源技术" tabindex="-1">4 替代性跨源技术 <a class="header-anchor" href="#_4-替代性跨源技术" aria-label="Permalink to &quot;4 替代性跨源技术&quot;">​</a></h2><hr><p>CORS 出现之前,实现跨源 Ajax 通信是有点麻烦的。开发者需要依赖能够执行跨源请求的 DOM特性,在不使用 XHR对象情况下发送某种类型的请求。虽然CORS 目前已经得到广泛支持,但这些技术仍然没有过时,因为它们不需要修改服务器。</p><h3 id="_4-1-图片探测" tabindex="-1">4.1 图片探测 <a class="header-anchor" href="#_4-1-图片探测" aria-label="Permalink to &quot;4.1 图片探测&quot;">​</a></h3><p>图片探测是利用<code>&lt;img&gt;</code>标签实现跨域通信的最早的一种技术。<strong>任何页面都可以跨域加载图片而不必担心限制,因此这也是在线广告跟踪的主要方式</strong>。可以动态创建图片,然后通过它们的 <code>onload</code> 和 <code>onerror</code> 事件处理程序得知何时收到响应。</p><p>这种动态创建图片的技术经常用于图片探测(imagepings)。图片探测是与服务器之间简单、跨域单向的通信。数据通过查询字符串发送,响应可以随意设置,不过一般是位图图片或值为 204 的状态码浏览器通过图片探测拿不到任何数据,但可以通过监听 <code>onload</code> 和 <code>onerror</code> 事件知道什么时候能接收到响应。</p><p>图片探测频繁用于跟踪用户在页面上的点击操作或动态显示广告。当然,图片探测的缺点是只能发送 GET 请求和无法获取服务器响应的内容。这也是只能利用图片探测实现浏览器与服务器单向通信的原因。</p><p>下面看一个例子:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 创建了一个新的 Image 实例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> img </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 然后为它的 onload 和 onerror 事件处理程序添加了同-个函数。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 这样可以确保请求完成时无论什么响应都会收到通知。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">img.onload </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> img.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onerror</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Done!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置完src 属性之后请求就开始了,这个例子向服务器发送了一个 name 值。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">img.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;http://www.example.com/test?name=Nicholas&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><br><h3 id="_4-2-jsonp" tabindex="-1">4.2 JSONP <a class="header-anchor" href="#_4-2-jsonp" aria-label="Permalink to &quot;4.2 JSONP&quot;">​</a></h3><p>也是一种实现跨域的手段。</p><p>原理：script标签发送不受同源策略影响。前后端不分离已弃用，面试会问。</p><br><br><h2 id="_5-fetch-api" tabindex="-1">5 Fetch API <a class="header-anchor" href="#_5-fetch-api" aria-label="Permalink to &quot;5 Fetch API&quot;">​</a></h2><hr><p>Fetch API 能够执行 <strong>XMLHttpRequest</strong> 对象的所有任务,但更容易使用,接口也更现代化,能够在Web工作线程等现代Web工具中使用。 <strong>XMLHttpRequest</strong> 可以选择异步,而 Fetch API 则必须是异步。</p><p>Fetch API 本身是使用 JavaScript 请求资源的优秀工具,同时这个 API也能够应用在服务线程(service worker) 中,提供拦截、重定向和修改通过 fetch()生成的请求接口。</p><h3 id="_5-1-基本用法" tabindex="-1">5.1 基本用法 <a class="header-anchor" href="#_5-1-基本用法" aria-label="Permalink to &quot;5.1 基本用法&quot;">​</a></h3><p><code>fetch()</code> 方法是暴露在全局作用域中的,包括主页面执行线程、模块和工作线程。调用这个方法浏览器就会向给定 URL 发送请求。</p><h5 id="_5-1-1-分派请求" tabindex="-1">5.1.1 分派请求 <a class="header-anchor" href="#_5-1-1-分派请求" aria-label="Permalink to &quot;5.1.1 分派请求&quot;">​</a></h5><p><code>fetch()</code> 只有一个必需的参数 <strong>input</strong> 。多数情况下,这个参数是要获取资源的 URL 。这个方法返回一个期约。</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// URL 的格式(相对路径、绝对路径等)的解释与 XHR 对象一样。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/bar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Promise &lt;pending&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>请求完成、资源可用时,期约会解决为一个 Response 对象。这个对象是 API的封装,可以通过它取得相应资源。获取资源要使用这个对象的属性和方法,掌握响应的情况并将负载转换为有用的形式,如下所示:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bar.text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Response { type : &quot;basic&quot; , url:...}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><br><h5 id="_5-1-2-读取响应" tabindex="-1">5.1.2 读取响应 <a class="header-anchor" href="#_5-1-2-读取响应" aria-label="Permalink to &quot;5.1.2 读取响应&quot;">​</a></h5><p>读取响应内容的最简单方式是取得纯文本格式的内容,这要用到 <code>text()</code> 方法。这个方法返回一个期约，会解决为取得资源的完整内容:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bar.text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// bar.txt的内容</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bar.text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// bar.txt的内容</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><br><h5 id="_5-1-3-处理状态码和请求失败" tabindex="-1">5.1.3 处理状态码和请求失败 <a class="header-anchor" href="#_5-1-3-处理状态码和请求失败" aria-label="Permalink to &quot;5.1.3 处理状态码和请求失败&quot;">​</a></h5><p>Fetch API支持通过 Response 的 status(状态码) 和 statusText(状态文本) 属性检查响应状态。成功获取响应的请求通常会产生值为 200的状态码，如下所示:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/bar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.status); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 200</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.statusText); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// OK</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>请求不存在的资源通常会产生值为 404 的状态码:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/does-not-exist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.status); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 404</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.statusText); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Not Found</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>请求的 URL 如果抛出服务器错误会产生值为 500 的状态码:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/throw-server-error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.status); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 500)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.statusText); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Internal Server Error</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>可以显式地设置 <code>fetch()</code> 在遇到重定向时的行为(本章后面会介绍),不过默认行为是跟随重定向并返回状态码不是300~399 的响应。跟随重定向时,响应对象的 redirected 属性会被设置为 true,而状态码仍然是 200:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/permanent-redirect&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 默认行为是跟随重定向直到最终 URL</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 这个例子会出现至少两轮网络请求</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // &lt;origin url&gt;/permanent-redirect   -&gt;   &lt;redirect url&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.status); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 200</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.statusText); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// OK</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.redirected); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>在前面这几个例子中,虽然请求可能失败(如状态码为500),但都只执行了期约的解决处理函数事实上,只要服务器返回了响应, <code>fetch()</code> 期约都会解决。这个行为是合理的:系统级网络协议已经成功完成消息的一次往返传输。至于真正的“成功”请求,则需要在处理响应时再定义。</p><p><strong>通常状态码为200时就会被认为成功了,其他情况可以被认为未成功。为区分这两种情况,可以在状态码非 200~299 时检查 Response 对象的 ok 属性</strong>:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/bar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.status); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 200</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.ok); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/does-not-exist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.status); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 404</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.ok); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>因为服务器没有响应而导致浏览器超时,这样真正的 fetch()失败会导致期约被拒绝:</p><p>违反 CORS、无网络连接、HTTPS 错配及其他浏览器/网络策略问题都会导致期约被拒绝。</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/hangs-forever&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//(浏览器超时后)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError: &quot;NetworkError when attempting to fetch resource.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>可以通过 url 属性检查通过 fetch() 发送请求时使用的完整URL</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// foo.com/bar/baz发送的请求</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(window.location.href); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// https://foo.com/bar/baz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;qux&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.url)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// https://foo.com/bar/qux</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/qux&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.url)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// https://foo.com/qux</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;//qux.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.url)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// https://qux.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://qux.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.url)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// https://qux.com</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><br><h5 id="_5-1-4-自定义选项" tabindex="-1">5.1.4 自定义选项 <a class="header-anchor" href="#_5-1-4-自定义选项" aria-label="Permalink to &quot;5.1.4 自定义选项&quot;">​</a></h5><p>只使用 URL时, <strong>fetch()</strong> 会发送 GET 请求,只包含最低限度的请求头。<strong>要进一步配置如何发送请求,需要传入可选的第二个参数 init 对象。init 对象要按照下表中的键/值进行填充。</strong></p><table tabindex="0"><thead><tr><th>键</th><th>值</th></tr></thead><tbody><tr><td><code>method</code></td><td>请求使用的方法，<br>如 GET、 POST。</td></tr><tr><td><code>headers</code></td><td>请求的头信息，形式为 Headers 的对象或包含 ByteString 值的对象字面量。</td></tr><tr><td><code>body</code></td><td>指定使用请求体时请求体的内容：<br>必须是 Blob、BufferSource、FormData、URLSearchparams、ReadableStream 或 String 的实例。<br>注意 GET 或 HEAD 方法的请求不能包含 body 信息。</td></tr><tr><td><code>mode</code></td><td>请求的模式，如 cors、no-cors 或者 same-origin。</td></tr><tr><td><code>credentials</code></td><td>请求的 credentials，如 omit、same-origin 或者 include。为了在当前域名内自动发送 cookie，必须提供这个选项，从 Chrome 50 开始，这个属性也可以接受 FederatedCredential (en-US) 实例或是一个 PasswordCredential (en-US) 实例。</td></tr><tr><td><code>cache</code></td><td>用于控制浏览器与 HTTP 缓存的交互。要跟踪缓存的重定向,请求的redirect 属性值必须是&quot;follow&quot;,而且必须符合同源策略限制。必须是下列值之一。<br>请求的 cache 模式：default、 no-store、 reload 、 no-cache、 force-cache 或者 only-if-cached。</td></tr><tr><td><code>redirect</code></td><td>可用的 redirect 模式：follow (自动重定向), error (如果产生重定向将自动终止并且抛出一个错误），或者 manual (手动处理重定向)。在 Chrome 中默认使用 follow)</td></tr><tr><td><code>referrer</code></td><td>一个 USVString 可以是 no-referrer、client 或一个 URL。默认是 client。</td></tr><tr><td><code>referrerPolicy</code></td><td>指定了 HTTP 头部 referer 字段的值。可能为以下值之一：no-referrer、 no-referrer-when-downgrade、origin、origin-when-cross-origin、 unsafe-url。</td></tr><tr><td><code>integrity</code></td><td>包括请求的 subresource integrity 值（例如： sha256-BpfBw7ivV8q2jLiT13fxDYAe2tJllusRSZ273h2nFSE=）。</td></tr></tbody></table><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Example POST method implementation:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> postData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Default options are marked with *</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// *GET, POST, PUT, DELETE, etc.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cors&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// no-cors, *cors, same-origin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cache: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;no-cache&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// *default, no-cache, reload, force-cache, only-if-cached</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    credentials: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;same-origin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// include, *same-origin, omit</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    headers: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;Content-Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;application/json&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // &#39;Content-Type&#39;: &#39;application/x-www-form-urlencoded&#39;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    redirect: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;follow&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// manual, *follow, error</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    referrerPolicy: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;no-referrer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    body: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// body data type must match &quot;Content-Type&quot; header</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// parses JSON response into native JavaScript objects</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://example.com/answer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { answer: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">42</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// JSON data parsed by `data.json()` call</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><br><h3 id="_5-2-常见fetch请求模式" tabindex="-1">5.2 常见Fetch请求模式 <a class="header-anchor" href="#_5-2-常见fetch请求模式" aria-label="Permalink to &quot;5.2 常见Fetch请求模式&quot;">​</a></h3><p>与 XMLHttpRequest 一样, <code>fetch()</code> 既可以发送数据也可以接收数据。使用 <strong>init</strong> 对象参数,可以配置 <code>fetch()</code> 在请求体中发送各种序列化的数据。</p><h5 id="_5-2-1-发送json-数据" tabindex="-1">5.2.1 发送JSON 数据 <a class="header-anchor" href="#_5-2-1-发送json-数据" aria-label="Permalink to &quot;5.2.1 发送JSON 数据&quot;">​</a></h5><p>可以像下面这样发送简单 JSON 字符串:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> payload </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ foo: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jsonHeaders </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Content-Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;application/json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/send-me-json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  body: payload,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  headers: jsonHeaders</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><br><h5 id="_5-2-2-在请求体中发送参数" tabindex="-1">5.2.2 在请求体中发送参数 <a class="header-anchor" href="#_5-2-2-在请求体中发送参数" aria-label="Permalink to &quot;5.2.2 在请求体中发送参数&quot;">​</a></h5><p>因为请求体支持任意字符串值,所以可以通过它发送请求参数</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> payload </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;foo=bar&amp;baz=gux&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> paramHeaders </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Content-Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;application/x-www-form-urlencoded; charset=UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/send-me-json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  body: payload,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  headers: paramHeaders</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><br><h5 id="_5-2-3-发送文件" tabindex="-1">5.2.3 发送文件 <a class="header-anchor" href="#_5-2-3-发送文件" aria-label="Permalink to &quot;5.2.3 发送文件&quot;">​</a></h5><p>因为请求体支持 FormData 实现,所以 <code>fetch()</code> 也可以序列化并发送文件字段中的文件</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imageFormData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FormData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imageInput </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input[type=&#39;file&#39;]&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">imageFormData.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, imageInput.files[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/img-upload&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  body: imageFormData</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>这个 <code>fetch()</code> 实现可以支持多个文件.</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imageFormData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FormData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imageInput </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queryselector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input [type=&#39;file&#39;][multiple]&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imageInput.files.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  imageFormData.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, imageInput.files[i]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/img-upload&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  body: imageFormData</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><br><h5 id="_5-2-4-加载-blob-文件" tabindex="-1">5.2.4 加载 Blob 文件 <a class="header-anchor" href="#_5-2-4-加载-blob-文件" aria-label="Permalink to &quot;5.2.4 加载 Blob 文件&quot;">​</a></h5><p>FetchAPI 也能提供 <strong>Blob</strong> 类型的响应,而 <strong>Blob</strong> 又可以兼容多种浏览器API。一种常见的做法是明确将图片文件加载到内存,然后将其添加到HTML图片元素。为此,可以使用响应对象上暴露的 <code>blob()</code> 方法。这个方法返回一个期约,解决为一个 <strong>Blob</strong> 的实例。然后,可以将这个实例传给 <code>URL.createobjectur1()</code> 以生成可以添加给图片元素 src 属性的值:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> imageElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;img&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my-image.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">blob</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    imageElement.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createObjectURL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(blob);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><br><h5 id="_5-2-5-发送跨源请求" tabindex="-1">5.2.5 发送跨源请求 <a class="header-anchor" href="#_5-2-5-发送跨源请求" aria-label="Permalink to &quot;5.2.5 发送跨源请求&quot;">​</a></h5><p>从不同的源请求资源,响应要包含 <strong>CORS</strong> 头部才能保证浏览器收到响应。没有这些头部,跨源请求会失败并抛出错误。</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;//cross-origin.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError: Failed to fetch</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果代码不需要访问响应,也可以发送 no-cors 请求。此时响应的 type 属性值为 opaque,因此无法读取响应内容。这种方式适合发送探测请求或者将响应缓存起来供以后使用</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;//cross-origin.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;no-cors&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.type));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// opaque</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><br><h5 id="_5-2-6-中断请求" tabindex="-1">5.2.6 中断请求 <a class="header-anchor" href="#_5-2-6-中断请求" aria-label="Permalink to &quot;5.2.6 中断请求&quot;">​</a></h5><p>Fetch API 支持通过 <strong>AbortController/Abortsignal</strong> 对中断请求。调用 <code>AbortControllerabort()</code> 会中断所有网络传输,特别适合希望停止传输大型负载的情况。中断进行中的fetch()请求会导致包含错误的拒绝。</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> abortController </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbortController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;wikipedia.zip&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { signal: abortController.signal }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;aborted&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//10毫秒后中断请求</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> abortController.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">abort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 已经中断</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><br><h3 id="_5-3-headers对象" tabindex="-1">5.3 Headers对象 <a class="header-anchor" href="#_5-3-headers对象" aria-label="Permalink to &quot;5.3 Headers对象&quot;">​</a></h3><p>Headers 对象是所有外发请求和人站响应头部的容器。每个外发的 <strong>Request</strong> 实例都包含一个空的 <strong>Headers</strong> 实例,可以通过 <code>Request.prototype.headers</code> 访问,每个人站 <strong>Response</strong> 实例也可以通过 <code>Response.prototype.headers</code> 访问包含着响应头部的 Headers 对象。这两个属性都是可修改属性。另外，使用<code> new Headers()</code> 也可以创建一个新实例。</p><h5 id="_5-3-1-headers与map-的相似之处" tabindex="-1">5.3.1 Headers与Map 的相似之处 <a class="header-anchor" href="#_5-3-1-headers与map-的相似之处" aria-label="Permalink to &quot;5.3.1 Headers与Map 的相似之处&quot;">​</a></h5><p>Headers 对象与 Map 对象极为相似。这是合理的,因为 HTTP 头部本质上是序列化后的键/值对它们的 JavaScript 表示则是中间接口。Headers 与 Map 类型都有 <code>get()</code> 、 <code>set()</code> 、 <code>has()</code> 和 <code>delete()</code> 等实例方法,如下面的代码所示:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> h </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置键</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">h.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//检查键</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(h.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">has</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">has</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(h.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">has</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;qux&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">has</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;qux&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 获取值</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(h.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// bar</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// bar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 更新值</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">h.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;baz&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;baz&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 取得更新的值</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(h.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// baz</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// baz</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 删除值</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">h.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 确定值已经删除</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(h.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// undefined</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// undefined</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>Headers 和 Map 都可以使用一个可迭代对象来初始化，比如</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> seed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> h </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(seed);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(seed);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(h.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// bar</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// bar</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>而且,它们也都有相同的 <code>keys()</code> 、 <code>values()</code> 和 <code>entries()</code> 迭代器接口</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> seed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;baz&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;qux&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> h </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(seed);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(seed);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">h.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// foo, baz</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// foo, baz</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">h.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">values</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// bar, qux</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">values</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// bar, qux</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">h.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">entries</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//[&#39;foo&#39;,&#39;bar&#39;], [&#39;baz&#39;!&#39;qux&#39;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">entries</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [&#39;foo&#39;, &#39;bar&#39;], [&#39;baz&#39;,&#39;qux&#39;]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><br><h5 id="_5-3-2-headers-独有的特性" tabindex="-1">5.3.2 Headers 独有的特性 <a class="header-anchor" href="#_5-3-2-headers-独有的特性" aria-label="Permalink to &quot;5.3.2 Headers 独有的特性&quot;">​</a></h5><p>Headers 并不是与 Map 处处都一样。在初始化 Headers 对象时,也可以使用键/值对形式的对象，而 Map 则不可以</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> seed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { foo: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> h </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(seed);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(h.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// bar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(seed); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError: object is not iterable</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>一个 HTTP 头部字段可以有多个值,而 Headers 对象通过 <code>append()</code> 方法支持添加多个值。在 Headers 实例中还不存在的头部上调用 <code>append()</code> 方法相当于调用 <code>set()</code> 。后续调用会以逗号为分隔符拼接多个值:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> h </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">h.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(h.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;bar&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">h.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;baz&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(h.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;bar, baz&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><br><h5 id="_5-3-3-头部护卫" tabindex="-1">5.3.3 头部护卫 <a class="header-anchor" href="#_5-3-3-头部护卫" aria-label="Permalink to &quot;5.3.3 头部护卫&quot;">​</a></h5><p>某些情况下,并非所有 HTTP 头部都可以被客户端修改,而 Headers 对象使用护卫来防止不被允许的修改。不同的护卫设置会改变 <code>set()</code> 、 <code>append()</code> 和 <code>delete()</code> 的行为。违反护卫限制会抛出TypeError。</p><p><strong>Headers</strong> 实例会因来源不同而展现不同的行为,它们的行为由护卫来控制。JavaScript 可以决定 <strong>Headers</strong> 实例的护卫设置。下表列出了不同的护卫设置和每种设置对应的行为。</p><table tabindex="0"><thead><tr><th>护卫</th><th>适用情形</th><th>限制</th></tr></thead><tbody><tr><td>none</td><td>在通过构造函数创建 Headers 实例时激活</td><td>无</td></tr><tr><td>request</td><td>在通过构造函数初始化Request 对象,且mode值为非 no-cors 时激活</td><td>不允许修改禁止修改的头部(参见MDN 文档中的 forbidden header name 词条 )不允许修改非简单头部(参见 MDN)</td></tr><tr><td>request-no-cors</td><td>在通过构造函数初始化Request 对象,且mode值为 no-cors 时激活</td><td>不允许修改非简单头部(参见 MDN 文档中的simple header 词条 )</td></tr><tr><td>response</td><td>在通过构造函数初始化 Response 对象时激活</td><td>不允许修改禁止修改的响应头部(参见 MDN 文档中的 forbidden response header name词条)</td></tr><tr><td>immutable</td><td>在通过 error()或 redirect()静态方法初始化 Response 对象时激活</td><td>不允许修改任何头部</td></tr></tbody></table><br><h3 id="_5-4-request-对象" tabindex="-1">5.4 REQUEST 对象 <a class="header-anchor" href="#_5-4-request-对象" aria-label="Permalink to &quot;5.4 REQUEST 对象&quot;">​</a></h3><p>顾名思义,Request 对象是获取资源请求的接口。这个接口暴露了请求的相关信息,也暴露了使用请求体的不同方式。</p><h5 id="_5-4-1-创建request-对象" tabindex="-1">5.4.1 创建Request 对象 <a class="header-anchor" href="#_5-4-1-创建request-对象" aria-label="Permalink to &quot;5.4.1 创建Request 对象&quot;">​</a></h5><p>可以通过构造函数初始化 Request 对象。为此需要传入一个 input 参数,一般是 URL。</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Request {...]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Request 构造数也接收第二个参数一个 <strong>init</strong> 对象。这个 <strong>init</strong> 对象与前面介绍的 <code>fetch()</code> 的 <strong>init</strong> 对象一样。没有在 <strong>init</strong> 对象中涉及的值则会使用默认值.</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 用所有默认值创建 Request 对象</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Request {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	bodyUsed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	cache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	credentials</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;same-origin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	destination</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	integrity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	keepalive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;GET&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cors&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	redirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;follow&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	referrer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;about:client&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	referrerPolicy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	signal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Abortsignal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (aborted: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, onabort: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;current URL&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 用置顶初始值创建 Request 对象</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }));</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Request {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	bodyUsed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	cache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	credentials</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;same-origin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	destination</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	integrity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	keepalive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cors&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	redirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;follow&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	referrer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;about:client&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	referrerPolicy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	signal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Abortsignal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(aborted: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, onabort: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;current URL&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><br><h5 id="_5-4-2-克隆-request-对象" tabindex="-1">5.4.2 克隆 Request 对象 <a class="header-anchor" href="#_5-4-2-克隆-request-对象" aria-label="Permalink to &quot;5.4.2 克隆 Request 对象&quot;">​</a></h5><p>Fetch API提供了两种不太一样的方式用于创建 <strong>Request</strong> 对象的副本: 使用 <strong>Request</strong> 构造函数和使用 <code>clone()</code> 方法。</p><p>将 <strong>Request</strong> 实例作为 input 参数传给 <strong>Request</strong> 构造函数,会得到该请求的一个副本:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r1);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r2.url); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// https://foo.com/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>如果再传人 <strong>init</strong> 对象,则 <strong>init</strong> 对象的值会盖源对象中同名的值</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r1, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;posT&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r1.method); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// GET</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r2.method); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// POST</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这种克隆方式并不总能得到一模一样的副本。最明显的是,第一个请求的请求体会被标记为“已使用”</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, body: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foobar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r1);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r1.bodyUsed); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r2.bodyUsed); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// false</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>如果源对象与创建的新对象不同源,则 <strong>referrer</strong> 属性会被清除。此外,如果源对象的 <strong>mode</strong> 为 <strong>navigate</strong> ，则会被转换为 <strong>same-origin</strong> 。</p><p>第二种克隆 Request 对象的方式是使用 <code>clone()</code> 方法,这个方法会创建一模一样的副本,任何值都不会被覆盖。与第一种方式不同,这种方法不会将任何请求的请求体标记为“已使用”:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, body: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foobar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r1.bodyUsed); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r2.bodyUsed); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// false</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>如果请求对象的 <strong>bodyUsed</strong> 属性为 true (即请求体已被读取), 那么上述任何一种方式都不能用来创建这个对象的副本。在请求体被读取之后再克隆会导致抛出 TypeError。</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 没有错误</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置 bodyUsed为true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError: Failed to execute &#39;clone&#39; on &#39;Request&#39;: Request body is already used</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError: Failed to construct &#39;Request&#39;: Cannot construct a Request with a Request object that has already been used.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><br><h5 id="_5-4-3-在fetch-中使用-request-对象" tabindex="-1">5.4.3 在fetch()中使用 Request 对象 <a class="header-anchor" href="#_5-4-3-在fetch-中使用-request-对象" aria-label="Permalink to &quot;5.4.3 在fetch()中使用 Request 对象&quot;">​</a></h5><p><code>fetch() </code>和 <strong>Request</strong> 构造函数拥有相同的函数签名并不是巧合。在调用 <code>fetch()</code> 时,可以传人已经创建好的 <strong>Request</strong> 实例而不是 URL。与 <strong>Request</strong> 构造函数一样,传给 <code>fetch()</code> 的 <strong>init</strong> 对象会覆盖传人请求对象的值:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//向foo.com 发送GET请求</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//向foo.com 发送 POST 请求</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;posT&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>fetch()</code> 会在内部克隆传人的 <strong>Request</strong> 对象。与克隆 <strong>Request</strong> 一样, <code>fetch()</code> 也不能拿请求体已经用过的 <strong>Request</strong> 对象来发送请求:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, body: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foobar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError: Cannot construct a Request with a Request object that has already been used.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>关键在于,通过 <code>fetch</code> 使用 <strong>Request</strong> 会将请求体标记为已使用。也就是说,有请求体的 <strong>Request</strong> 只能在一次 <code>fetch</code> 中使用。(不包含请求体的请求不受此限制。)演示如下:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, body: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foobar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError: Cannot construct a Request with a Request object that has already been used.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>要想基于包含请求体的相同 <strong>Request</strong> 对象多次调用 <code>fetch()</code> ,必须在第一次发送 <code>fetch()</code> 请求前调用 <code>clone()</code> :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, body: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foobar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3个都会成功</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><br><h3 id="_5-5-response-对象" tabindex="-1">5.5 RESPONSE 对象 <a class="header-anchor" href="#_5-5-response-对象" aria-label="Permalink to &quot;5.5 RESPONSE 对象&quot;">​</a></h3><p>顾名思义, <strong>Response</strong> 对象是获取资源响应的接口。这个接口暴露了响应的相关信息,也暴露了使用响应体的不同方式。</p><h5 id="_5-5-1-创建response-对象" tabindex="-1">5.5.1 创建Response 对象 <a class="header-anchor" href="#_5-5-1-创建response-对象" aria-label="Permalink to &quot;5.5.1 创建Response 对象&quot;">​</a></h5><p>可以通过构造函数初始化 <strong>Response</strong> 对象且不需要参数。此时响应实例的属性均为默认值,因为它并不代表实际的 HTTP 响应:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 用所有默认值创建 Request 对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Response {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	bodyUsed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	ok</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	redirected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	statusText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OK&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;default&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>Response</strong> 构造函数接收一个可选的 <strong>body</strong> 参数。这个 <strong>body</strong> 可以是 null ,等同于 <code>fetch()</code> 参数 <strong>init</strong> 中的 <strong>body</strong> 。还可以接收一个可选的 <strong>init</strong> 对象,这个对象可以包含下表所列的键和值。</p><table tabindex="0"><thead><tr><th>键</th><th>值</th></tr></thead><tbody><tr><td><code>headers</code></td><td>必须是 Headers 对象实例或包含字符串键/值对的常规对象实例<br> 默认为没有键/值对的 Headers 对象</td></tr><tr><td><code>status</code></td><td>表示 HTTP 响应状态码的整数<br> 默认为 200</td></tr><tr><td><code>statusText</code></td><td>表示 HTTP 响应状态的字符串<br> 默认为空字符串</td></tr></tbody></table><p>可以像下面这样使用 <strong>body</strong> 和 <strong>init</strong> 来构建 <strong>Response</strong> 对象:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foobar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  status: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">418</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  statusText: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m a teapot&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Response {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	bodyUsed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	ok</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	redirected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">418</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	statusText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I&#39;m a teapot&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;default&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>大多数情况下,产生 <strong>Response</strong> 对象的主要方式是调用 <code>fetch()</code> ,它返回一个最后会解决为 <strong>Response</strong> 对象的期约,这个 <strong>Response</strong> 对象代表实际的 HTTP 响应。下面的代码展示了这样得到的 <strong>Response</strong> 对象:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Response {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	bodyUsed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	ok</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	redirected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	statusText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OK&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;basic&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>Response</strong> 类还有两个用于生成 <strong>Response</strong> 对象的静态方法: <code>Response.redirect()</code> 和 <code>Response.error()</code> 。前者接收一个 URL 和一个重定向状态码(301、302、303、307 或308), 返回重定向的 <strong>Response</strong> 对象:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://foo.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">301</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Response {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	bodyUsed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	ok</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	redirected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">301</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	statusText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;default&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>提供的状态码必须对应重定向,否则会抛出错误</p><p>提供的状态码必须对应重定向,否则会抛出错误</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// RangeError: Failed to execute &#39;redirect&#39; on &#39;Response&#39;: Invalid status code</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>另一个静态方法 <code>Response.error()</code> 用于产生表示网络错误的 <strong>Response</strong> 对象(网络错误会导致 <code>fetch()</code> 期约被拒绝)。</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Response {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	bodyUsed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	ok</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	redirected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	statusText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;error&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><br><h5 id="_5-5-2-读取响应状态信息" tabindex="-1">5.5.2 读取响应状态信息 <a class="header-anchor" href="#_5-5-2-读取响应状态信息" aria-label="Permalink to &quot;5.5.2 读取响应状态信息&quot;">​</a></h5><p><strong>Response</strong> 对象包含一组只读属性,描述了请求完成后的状态，如下表所示。</p><table tabindex="0"><thead><tr><th>属性</th><th>值</th></tr></thead><tbody><tr><td><code>headers</code></td><td>响应包含的 Headers 对象</td></tr><tr><td><code>ok</code></td><td>布尔值,表示 HTTP 状态码的含义。200~299 的状态码返回 true,其他状态码返回 false</td></tr><tr><td><code>redirected</code></td><td>布尔值，表示响应是否至少经过一次重定向</td></tr><tr><td><code>status</code></td><td>整数，表示响应的 HTTP 状态码</td></tr><tr><td><code>statusText</code></td><td>字符串,包含对 HTTP 状态码的正式描述。这个值派生自可选的 HTTP Reason-Phrase 字段<br>因此如果服务器以 Reason-Phrase为由拒绝响应，这个字段可能是空字符串</td></tr><tr><td><code>type</code></td><td>字符串，包含响应类型。可能是下列字符串值之一 <br> basic:表示标准的同源响应 <br> cors:表示标准的跨源响应 <br> error: 表示响应对象是通过 <code>Response.error()</code> 创建的 <br> opaque: 表示 no-cors 的fetch()返回的跨源响应 <br> opaqueredirect:表示对redirect 设置为 manual 的请求的响应</td></tr><tr><td><code>url</code></td><td>包含响应 URL的字符串。对于重定向响应,这是最终的 URL,非重定向响应就是它产生的</td></tr></tbody></table><p>以下代码演示了返回 200、302、404和 500 状态码的 URL 对应的响应</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;//foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Response {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	bodyUsed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	ok</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	redirected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	statusText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OK&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;basic&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com/&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;//foo.com/redirect-me&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Response {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	bodyUsed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	ok</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	redirected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	statusText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OK&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;basic&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com/redirected-url/&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;//foo.com/does-not-exist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Response {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	bodyUsed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	ok</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	redirected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">404</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	statusText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Not Found&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;basic&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com/does-not-exist/&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;//foo.com/throws-error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Response {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	bodyUsed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	ok</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	redirected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	statusText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Internal Server Error&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;basic&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com/throws-error/&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><br><h5 id="_5-5-3-克隆-response-对象" tabindex="-1">5.5.3 克隆 Response 对象 <a class="header-anchor" href="#_5-5-3-克隆-response-对象" aria-label="Permalink to &quot;5.5.3 克隆 Response 对象&quot;">​</a></h5><p>克隆 <strong>Response</strong> 对象的主要方式是使用 <code>clone()</code> 方法,这个方法会创建一个一模一样的副本,不会盖任何值。这样不会将任何请求的请求体标记为已使用</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foobar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r1.bodyUsed); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r2.bodyUsed); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// false</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>如果响应对象的 <strong>bodyUsed</strong> 属性为 true(即响应体已被读取),则不能再创建这个对象的副本。在响应体被读取之后再克隆会导致抛出 TypeError。</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foobar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 没有错误</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置bodyUsed为true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError: Failed to execute &#39;clone&#39; on &#39;Response&#39;: Response body is already used</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>有响应体的 <strong>Response</strong> 对象只能读取一次。( 不包含响应体的 <strong>Response</strong> 对象不受此限制。) 比如:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foobar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.log); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// foobar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.log);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError: Failed to execute &#39;text&#39; on &#39;Response&#39;: body stream is locked</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>要多次读取包含响应体的同一个 <strong>Response</strong> 对象,必须在第一次读取前调用 <code>clone()</code>:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foobar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.log); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// foobar</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.log); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// foobar</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.log); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// foobar</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>此外,通过创建带有原始响应体的 <strong>Response</strong> 实例,可以执行伪克隆操作。关键是这样不会把第一个 <strong>Response</strong> 实例标记为已读,而是会在两个响应之间共享:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foobar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r1.body);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r1.bodyUsed); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r2.bodyused); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.log); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// foobar</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.log);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError: Failed to execute &#39;text&#39; on &#39;Response&#39;: body stream is locked</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><br><h3 id="_5-6-request、response-和-body的混入" tabindex="-1">5.6 REQUEST、RESPONSE 和 BODY的混入 <a class="header-anchor" href="#_5-6-request、response-和-body的混入" aria-label="Permalink to &quot;5.6 REQUEST、RESPONSE 和 BODY的混入&quot;">​</a></h3><p><strong>Request</strong> 和 <strong>Response</strong> 都使用了 Fetch API 的 Body 混人,以实现两者承担有效载荷的能力。这个混人为两个类型提供了只读的 body 属性( 实现为 <strong>Readablestream</strong> )、只读的 <strong>bodyUsed</strong> 布尔值(表示 body 流是否已读) 和一组方法,用于从流中读取内容并将结果转换为某种 JavaScript对象类型。</p><p>通常,将 <strong>Request</strong> 和 <strong>Response</strong> 主体作为流来使用主要有两个原因。一个原因是有效载荷的大小可能会导致网络延迟,另一个原因是流 API本身在处理有效载荷方面是有优势的。除此之外,最好是一次性获取资源主体。</p><p>Body 混入提供了5个方法,用于将 <strong>Readablestream</strong> 转存到缓冲区的内存里,将缓冲区转换为某种 JavaScript 对象类型,以及通过期约来产生结果。在解决之前,期约会等待主体流报告完成及缓冲被解析。这意味着客户端必须等待响应的资源完全加载才能访问其内容。</p><h5 id="_5-6-1-body-text" tabindex="-1">5.6.1 Body.text() <a class="header-anchor" href="#_5-6-1-body-text" aria-label="Permalink to &quot;5.6.1 Body.text()&quot;">​</a></h5><p><code>Body.text()</code> 方法返回期约,解决为将缓冲区转存得到的 UTF-8 格式字符串。下面的代码展示了在 <strong>Response</strong> 对象上使用 <code>Body.text()</code> :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.log);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &lt;!doctype html&gt;&lt;htm1 lang=&quot;en&quot;&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &lt;head&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &lt;meta charset=&quot;utf-8&quot;&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>以下代码展示了在 <strong>Request</strong> 对象上使用 <code>Body.text()</code> :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;posT&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, body: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;barbazqux&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.log); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// barbazqux</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><br><h5 id="_5-6-2-body-json" tabindex="-1">5.6.2 Body.json() <a class="header-anchor" href="#_5-6-2-body-json" aria-label="Permalink to &quot;5.6.2 Body.json()&quot;">​</a></h5><p><code>Body.json()</code> 方法返回期约,解决为将缓冲区转存得到的 JSON。下面的代码展示了在 Response对象上使用 <code>Body.json()</code> :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com/foo.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ison</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.log);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// (&quot;foo&quot;: &quot;bar&quot;)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>以下代码展示了在 Request 对象上使用 <code>Body.json()</code>:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, body: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSONN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ bar: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;baz&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.log);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// {bar: &#39;baz&#39;)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><br><h5 id="_5-6-3-body-formdata" tabindex="-1">5.6.3 Body.formData() <a class="header-anchor" href="#_5-6-3-body-formdata" aria-label="Permalink to &quot;5.6.3 Body.formData()&quot;">​</a></h5><p>浏览器可以将 <strong>FormData</strong> 对象序列化/反序列化为主体。例如，下面这个 <strong>FormData</strong> 实例:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> myFormData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FormData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">myFormData.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在通过 HTTP 传送时,WebKit浏览器会将其序列化为下列内容</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>-----WebKitFormBoundarydR902kOzE6nbN7eR</span></span>
<span class="line"><span>Content-Disposition: form-data; name=&quot;foo&quot;</span></span>
<span class="line"><span>bar</span></span>
<span class="line"><span>------WebKitFormBoundarydR9Q2kOzE6nbN7eR--</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>Body.formData() </code>方法返回期约,解决为将缓冲区转存得到的 <strong>FormData</strong> 实例。下面的代码展示了在 <strong>Response</strong> 对象上使用 <code>Body.formData()</code> :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com/form-data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">formData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">formData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(formData.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// bar</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>以下代码展示了在 <strong>Request</strong> 对象上使用 <code>Body.formData()</code> :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> myFormData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FormData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">myFormData.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, body: myFormData });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">formData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">formData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(formData.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// bar</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><br><h5 id="_5-6-4-body-arraybuffer" tabindex="-1">5.6.4 Body.arrayBuffer() <a class="header-anchor" href="#_5-6-4-body-arraybuffer" aria-label="Permalink to &quot;5.6.4 Body.arrayBuffer()&quot;">​</a></h5><p>有时候,可能需要以原始二进制格式查看和修改主体。为此,可以使用 <code>Body.arrayBuffer()</code> 将主体内容转换为 <strong>ArrayBuffer</strong> 实例。 <code>Body.arrayBuffer()</code> 方法返回期约,解决为将缓冲区转存得到的 <strong>ArrayBuffer</strong> 实例。下面的代码展示了在 Response 对象上使用 <code>Body.arrayBuffer()</code>:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">arrayBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.log);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ArrayBuffer(...) {)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>以下代码展示了在 <strong>Request</strong> 对象上使用 <code>Body.arrayBuffer()</code> :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, body: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;abcdefg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 以整数形式打印二进制编码的字符串</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">arrayBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">buf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Int8Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(buf)));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Int8Array(7) [97,98,99,100，101,102，103]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><br><h5 id="_5-6-5-body-blob" tabindex="-1">5.6.5 Body.blob() <a class="header-anchor" href="#_5-6-5-body-blob" aria-label="Permalink to &quot;5.6.5 Body.blob()&quot;">​</a></h5><p>有时候,可能需要以原始二进制格式使用主体,不用查看和修改。为此,可以使用 <code>Body.blob()</code>将主体内容转换为 <strong>Blob</strong> 实例。 <code>Body.blob()</code> 方法返回期约,解决为将缓冲区转存得到的 <strong>Blob</strong> 实例.</p><p>下面的代码展示了在 <strong>Response</strong> 对象上使用 <code>Body.blob()</code> :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.log);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Blob(...) {size:..., type: &quot;...&quot;)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>以下代码展示了在 <strong>Request</strong> 对象上使用 <code>Body.blob()</code> :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, body: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;abcdefg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.log);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Blob(7) (size: 7, type: &quot;text/plain;charset=utf-8&quot;)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><br><h5 id="_5-6-6-一次性流" tabindex="-1">5.6.6 一次性流 <a class="header-anchor" href="#_5-6-6-一次性流" aria-label="Permalink to &quot;5.6.6 一次性流&quot;">​</a></h5><p>因为 Body 混人是构建在 <strong>ReadableStream</strong> 之上的,所以主体流只能使用一次。这意味着所有主体混入方法都只能调用一次,再次调用就会抛出错误。</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError: Failed to execute &#39;blob&#39; on &#39;Response&#39;: body stream is locked</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, body: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foobar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError: Failed to execute &#39;blob&#39; on &#39;Request&#39;: body stream is locked</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>即使是在读取流的过程中,所有这些方法也会在它们被调用时给 <strong>ReadableStream</strong> 加锁,以阻止其他读取器访问:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 第一次调用给流加锁</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//第二次调用再次加锁会失败</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError: Failed to execute &#39;blob&#39; on &#39;Response&#39;: body stream is locked</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, body: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foobar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 第一次调用给流加锁</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 第二次调用再次加锁会失败</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError: Failed to execute &#39;blob&#39; on &#39;Request&#39;: body stream is locked</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>作为 Body 混人的一部分, <strong>bodyUsed</strong> 布尔值属性表示 <strong>ReadableStream</strong> 是否已摄受(disturbed),意思是读取器是否已经在流上加了锁。这不一定表示流已经被完全读取。下面的代码演示了这个属性:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://foo.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, body: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foobar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foobar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(request.bodyUsed); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.bodyUsed); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.log); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// foobar</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.log); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// foobar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(request.bodyUsed); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.bodyUsed); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><br><h5 id="_5-6-7-使用-readablestream-主体" tabindex="-1">5.6.7 使用 ReadableStream 主体 <a class="header-anchor" href="#_5-6-7-使用-readablestream-主体" aria-label="Permalink to &quot;5.6.7 使用 ReadableStream 主体&quot;">​</a></h5><p>JavaScript 编程逻辑很多时候会将访问网络作为原子操作，比如请求是同时创建和发送的,响应数据也是以统一的格式一次性暴露出来的。这种约定隐藏了底层的混乱,让涉及网络的代码变得很清晰。从 TCP/IP 角度来看,传输的数据是以分块形式抵达端点的,而且速度受到网速的限制。接收端点会为此分配内存,并将收到的块写人内存。Fetch API 通过 <strong>ReadableStream</strong> 支持在这些块到达时就实时读取和操作这些数据。</p><p>正如Stream API所定义的, <strong>ReadableStream</strong> 暴露了 <code>getReader()</code> 方法,用于产生 <strong>ReadableStreamDefaultReader</strong> ,这个读取器可以用于在数据到达时异步获取数据块。数据流的格式是 <strong>Uint8Array</strong></p><p>下面的代码调用了读取器的 <code>read()</code> 方法,把最早可用的块打印了出来:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://fetch.spec.whatwg.org/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.body)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">body</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(reader); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ReadablestreamDefaultReader (}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    reader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">read</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.log);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// { value: Uint8Array{), done: false ]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>在随着数据流的到来取得整个有效载荷,可以像下面这样递归调用 <code>read()</code> 方法:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://fetch.spec.whatwg.org/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.body)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">body</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> processNextChunk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">done</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (done) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">read</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(processNextChunk);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">read</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(processNextChunk);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// { value: Uint8Array{), done: false ]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// { value: Uint8Array{), done: false ]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// { value: Uint8Array{), done: false ]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>异步函数非常适合这样的 <code>fetch()</code> 操作。可以通过使用 <strong>async/await</strong> 将上面的递归调用打平,</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://fetch.spec.whatwg.org/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.body)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> body</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { value, done } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">read</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (done) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// { value: Uint8Array{), done: false ]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// { value: Uint8Array{), done: false ]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// { value: Uint8Array{), done: false ]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>另外, <code>read()</code> 方法也可以直接封装到 Iterable 接口中。因此就可以在 <strong>for-await-of</strong> 循环中方便地实现这种转换:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://fetch.spec.whatwg.org/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.body)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> body</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncIterable </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      [Symbol.asyncIterator]() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">          next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">read</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (chunk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncIterable) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chunk);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// { value: Uint8Array{), done: false ]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// { value: Uint8Array{), done: false ]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// { value: Uint8Array{), done: false ]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>通过将异步逻辑包装到一个生成器函数中,还可以进一步简化代码。而且,这个实现通过支持只读取部分流也变得更稳健。如果流因为耗尽或错误而终止,读取器会释放锁,以允许不同的流读取器继续操作:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> streamGenerator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">stream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> reader</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">done</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">read</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (done) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      yield</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    reader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">releaseLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://fetch.spec.whatwg.org/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.body)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> body</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (chunk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">of</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> streamGenerator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(body)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chunk);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>在这些例子中,当读取完 <strong>Uint8Array</strong> 块之后,浏览器会将其标记为可以被垃圾回收。对于需要在不连续的内存中连续检查大量数据的情况，这样可以节省很多内存空间。</p><p>不连续的内存中连续检查大量数据的情况，这样可以节省很多内存空间。缓冲区的大小,以及浏览器是否等待缓冲区被填充后才将其推到流中,要根据 JavaScript 运行时的实现。浏览器会控制等待分配的缓冲区被填满,同时会尽快将缓冲区数据(有时候可能未填充数据)发送到流。</p><p>不同浏览器中分块大小可能不同,这取决于带宽和网络延迟。此外,浏览器如果决定不等待网络。也可以将部分填充的缓冲区发送到流。。最终,我们的代码要准备好处理以下情况:</p><ul><li>不同大小的 uint8Array 块;</li><li>部分填充的 uint8Array 块;</li><li>块到达的时间间隔不确定。</li></ul><p>默认情况下,块是以 <strong>Uint8Array</strong> 格式抵达的。因为块的分割不会考虑编码,所以会出现某些值作为多字节字符被分散到两个连续块中的情况。手动处理这些情况是很麻烦的,但很多时候可以使用 Encoding API 的可插拔方案。</p><p>要将 <strong>Uint8Array</strong> 转换为可读文本,可以将缓冲区传给 <strong>TextDecoder</strong> ,返回转换后的值。通过设置 <code>stream:true</code> ,可以将之前的缓冲区保留在内存,从而让跨越两个块的内容能够被正确解码:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> decoder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TextDecoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> streamGenerator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">stream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> reader</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">done</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">read</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (done) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      yield</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    reader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">releaseLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://fetch.spec.whatwg.org/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.body)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> body</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (chunk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">of</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> streamGenerator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(body)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(decoder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">decode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chunk, { stream: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &lt;!doctype html&gt;&lt;html lang=&quot;en&quot;&gt; ...</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// whether a &lt;a data-link-type=&quot;dfn&quot; href=&quot;#concept-header&quot; ...</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// result to &lt;var&gt;rangeValue&lt;/var&gt; ...</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>因为可以使用 <strong>ReadableStream</strong> 创建 <strong>Response</strong> 对象,所以就可以在读取流之后,将其通过管道导人另一个流。然后在这个新流上再使用 Body 的方法,如 <code>text()</code> 。这样就可以随着流的到达实时检查和操作流内容。</p><p>下面的代码展示了这种双流技术:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://fetch.spec.whatwg.org/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.body)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> body</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> reader</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 创建第二个流</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ReadableStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">controller</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { value, done } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">read</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (done) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">              break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 将主体流的块推到第二个流</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            controller.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">enqueue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          controller.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          reader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">releaseLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">secondaryStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(secondaryStream))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.log);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &lt;!doctype html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt; ..</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><br><br><h2 id="_6-beacon-api" tabindex="-1">6 Beacon API <a class="header-anchor" href="#_6-beacon-api" aria-label="Permalink to &quot;6 Beacon API&quot;">​</a></h2><hr><p>为了把尽量多的页面信息传到服务器,很多分析工具需要在页面生命周期中尽量晚的时候向服务器发送遥测或分析数据。因此,理想的情况下是通过浏览器的,unload 事件发送网络请求。这个事件表示用户要离开当前页面,不会再生成别的有用信息了。</p><p>在 unload 事件触发时,分析工具要停止收集信息并把收集到的数据发给服务器。这时候有一个问题因为 unload 事件对浏览器意味着没有理由再发送任何结果未知的网络请求(因为页面都要被销毁了)。例如,在unload 事件处理程序中创建的任何异步请求都会被浏览器取消。为此,异步 XMLHttpRequest或 fetch ()不适合这个任务。分析工具可以使用同步 xMLHttpRequest 强制发送请求,但这样做会导 致用户体验问题。浏览器会因为要等待 unload 事件处理程序完成而延迟导航到下一个页面。</p><p>为解决这个问题,W3C 引人了补充性的 Beacon API。这个 API 给navigator 对象增加了一个sendBeacon()方法。这个简单的方法接收一个 URL 和一个数据有效载荷参数,并会发送一个 POST请求。可选的数据有效载荷参数有ArrayBufferView、Blob、DoMstring、FormData 实例。如果请求成功进入了最终要发送的任务队列，则这个方法返回true,否则返回 false。</p><p>可以像下面这样使用这个方法:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 发送POST请求</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// URL: &#39;https://example.com/analytics-reporting-url&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 请求负载:&quot;{foo:&quot;bar&quot;]&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">navigator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sendBeacon</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://example.com/analytics-reporting-url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{foo: &quot;bar&quot;}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这个方法虽然看起来只不过是 POST 请求的一个语法糖,但它有几个重要的特性。</p><ul><li><code>sendBeacon()</code> 并不是只能在页面生命周期末尾使用，而是任何时候都可以使用。</li><li>调用 <code>sendBeacon()</code> 后,浏览器会把请求添加到一个内部的请求队列。浏览器会主动地发送队列中的请求。</li><li>浏览器保证在原始页面已经关闭的情况下也会发送请求。</li><li>状态码、超时和其他网络原因造成的失败完全是不透明的,不能通过编程方式处理。</li><li>信标(beacon) 请求会携带调用 <code>sendBeacon()</code> 时所有相关的cookie。</li></ul><p>常用于页面性能监控、异常日志记录、用户行为跟踪（埋点）</p><br><br><h2 id="_7-web-socket" tabindex="-1">7 Web Socket <a class="header-anchor" href="#_7-web-socket" aria-label="Permalink to &quot;7 Web Socket&quot;">​</a></h2><hr><p>Web Socket(套接字)的目标是通过一个长时连接实现与服务器全双工、双向的通信。在 JavaScrip中创建 Web Socket时,一个 HTTP 请求会发送到服务器以初始化连接。服务器响应后,连接使用 HTTP 的 Upgrade 头部从 HTTP协议切换到 Web Socket 协议。这意味着 Web Socket不能通过标准 HTTP 服务器实现，而必须使用支持该协议的专有服务器。</p><p>因为 Web Socket 使用了自定义协议,所以 URL方案(scheme) 稍有变化:不能再使用 <code>http://</code> 或 <code>https:/</code> ,而要使用 <code>ws://</code> 和 <code>wss://</code> 。前者是不安全的连接,后者是安全连接。在指定 Web Socket URL时，必须包含 URL 方案,因为将来有可能再支持其他方案。</p><p>使用自定义协议而非 HTTP 协议的好处是,客户端与服务器之间可以发送非常少的数据，不会对 HTTP 造成任何负担。使用更小的数据包让 Web Socket 非常适合带宽和延迟问题比较明显的移动应用。使用自定义协议的缺点是,定义协议的时间比定义 JavaScript API要长。Web Socket得到了所有主流览器支持。</p><h3 id="_7-1-api" tabindex="-1">7.1 API <a class="header-anchor" href="#_7-1-api" aria-label="Permalink to &quot;7.1 API&quot;">​</a></h3><p>要创建一个新的 Web Socket,就要实例化一个 websocket 对象并传人提供连接的 URL</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WebSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ws://www.example.com/server.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>注意,必须给 WebSocket 构造函数传人一个绝对 URL。同源策略不适用于 Web Socket ,因此可以打开到任意站点的连接。至于是否与来自特定源的页面通信,则完全取决于服务器。(在握手阶段就可以确定请求来自哪里。)</strong></p><p>浏览器会在初始化 WebSocket 对象之后立即创建连接。与 XHR 类似,WebSocket 也有一个 readyState 属性表示当前状态。不过，这个值与 XHR中相应的值不一样。</p><ul><li>Websocket.OPENING(0):连接正在建立。</li><li>Websocket.OPEN(1):连接已经建立。</li><li>Websocket.CLOSING(2):连接正在关闭。</li><li>Websocket.CLOSE(3):连接已经关闭。</li></ul><p>WebSocket 对象没有 <strong>readystatechange</strong> 事件,而是有与上述不同状态对应的其他事件 readyState 值从 0 开始。</p><p>任何时候都可以调用 <code>close()</code> 方法关闭 Web Socket 连接:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">socket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>调用 <code>close()</code> 之后, <strong>readyState</strong> 立即变为2(连接正在关闭),并会在关闭后变为3(连接已经关闭)。</p><br><h3 id="_7-2-发送和接受数据" tabindex="-1">7.2 发送和接受数据 <a class="header-anchor" href="#_7-2-发送和接受数据" aria-label="Permalink to &quot;7.2 发送和接受数据&quot;">​</a></h3><p>打开 Web Socket 之后，可以通过连接发送和接收数据。</p><p><strong>要向服务器发送数据,使用 <code>send()</code> 方法并传人一个字符串、ArrayBuffer或Blob</strong>，如下所示:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WebSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ws://www.example.com/server.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> stringData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Hello world!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> arrayBufferData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Uint8Array.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;f&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;o&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;o&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> blobData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Blob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;f&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;o&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;o&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">socket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(stringData);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">socket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(arrayBufferData.buffer);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">socket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(blobData);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>服务器向客户端发送消息时，Websocket 对象上会触发 message 事件</strong>。这个 <code>message</code> 事件与其他消息协议类似，可以通过 <code>event.data</code> 属性访问到有效载荷:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">socket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onmessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event.data; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//对数据执行某些操作</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>与通过 <code>send()</code> 方法发送的数据类似, <code>event.data</code> 返回的数据也可能是 ArrayBuffer 或Blob。这由 WebSocket 对象的 binaryType 属性决定,该属性可能是&quot;blob&quot;或&quot;arraybuffer&quot;。</p><br><h3 id="_7-3-其他事件" tabindex="-1">7.3 其他事件 <a class="header-anchor" href="#_7-3-其他事件" aria-label="Permalink to &quot;7.3 其他事件&quot;">​</a></h3><p>WebSocket 对象在连接生命周期中有可能触发3个其他事件</p><table tabindex="0"><thead><tr><th>事件</th><th>描述</th></tr></thead><tbody><tr><td>open</td><td>在连接成功建立时触发</td></tr><tr><td>error</td><td>在发生错误时触发。连接无法存续</td></tr><tr><td>close</td><td>在连接关闭时触发。</td></tr></tbody></table><p>websocket 对象不支持 DOM Level 2 事件监听器,因此需要使用 DOM Level 0 风格的事件处理程序来监听这些事件:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Websocket</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ws://www.example.com/server.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">socket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onopen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Connection established.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">socket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onerror</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Connection error.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">socket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onclose</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Connection closed.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>在这些事件中,只有 <code>close</code> 事件的 <code>event</code> 对象上有额外信息。这个对象上有 3 个额外属性: wasClean 、 code 和 reason 。其中, wasClean 是一个布尔值,表示连接是否干净地关闭; code 是一个来自服务器的数值状态码;reason 是一个字符串,包含服务器发来的消息。可以将这些信息显示给用户或记录到日志:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">socket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onclose</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`as clean? ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">event</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wasclean</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} Code=${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">event</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} Reason=${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">event</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">reason</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><br><br><h2 id="_8-安全" tabindex="-1">8 安全 <a class="header-anchor" href="#_8-安全" aria-label="Permalink to &quot;8 安全&quot;">​</a></h2><p>探讨 Ajax安全的文章已经有了很多,事实上也出版了很多专门讨论这个话题的书。大规模 Ajax应用程序需要考虑的安全问题非常多,但在通用层面上一般需要考虑以下几个问题。</p><p>首先，任何 Ajax 可以访问的 URL,也可以通过浏览器或服务器访问，例如下面这个 URL:</p><p><code>/getuserinfo.php?id=23</code></p><p>请求这个 URL,可以假定返回 ID 为 23 的用户信息。访问者可以将 23 改为 24或 56,甚至其他任何值。 getuserinfo.php 文件必须知道访问者是否拥有访问相应数据的权限。否则,服务器就会大门敞开泄露所有用户的信息。</p><p>在未授权系统可以访问某个资源时,可以将其视为跨站点请求伪造(CSRF,cross-site request forgery )攻击。未授权系统会按照处理请求的服务器的要求伪装自己。Ajax 应用程序,无论大小,都会受到 CSRF攻击的影响，包括无害的漏洞验证攻击和恶意的数据盗窃或数据破坏攻击。</p><p>关于安全防护 Ajax 相关 URL 的一般理论认为,需要验证请求发送者拥有对资源的访问权限。可以通过如下方式实现。</p><ul><li>要求通过 SSL访问能够被 Ajax 访问的资源。</li><li>要求每个请求都发送一个按约定算法计算好的令牌(token ).</li></ul><p>注意，以下手段对防护CSRF 攻击是无效的。</p><ul><li>要求 POST 而非 GET 请求(很容易修改请求方法)。</li><li>使用来源 URL 验证来源(来源 URL 很容易伪造)。</li><li>基于 cookie 验证(同样很容易伪造)。</li></ul></div></div></main><footer class="VPDocFooter" data-v-165a4414 data-v-6e0368bf><!--[--><!--]--><div class="edit-info" data-v-6e0368bf><!----><div class="last-updated" data-v-6e0368bf><p class="VPLastUpdated" data-v-6e0368bf data-v-f109f35b>更新于: <time datetime="2025-07-08T09:25:58.000Z" data-v-f109f35b></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-6e0368bf><span class="visually-hidden" id="doc-footer-aria-label" data-v-6e0368bf>Pager</span><div class="pager" data-v-6e0368bf><a class="VPLink link pager-link prev" href="/frontend/core/javascript/base/api" data-v-6e0368bf><!--[--><span class="desc" data-v-6e0368bf>上一页</span><span class="title" data-v-6e0368bf>JavaScript Api</span><!--]--></a></div><div class="pager" data-v-6e0368bf><a class="VPLink link pager-link next" href="/frontend/core/javascript/advance/closure" data-v-6e0368bf><!--[--><span class="desc" data-v-6e0368bf>下一页</span><span class="title" data-v-6e0368bf>闭包</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-e6a7cc9a data-v-d124946e><div class="container" data-v-d124946e><p class="message" data-v-d124946e>基于 MIT 许可发布</p><p class="copyright" data-v-d124946e>版权所有 © 2023-2025 王磊</p></div></footer><!--[--><div class="busuanzi"> 本站访客数 <span id="busuanzi_value_site_uv"></span> 人次 本站总访问量 <span id="busuanzi_value_site_pv"></span> 次 </div><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"algorithms_index.md\":\"CxrWHVHm\",\"api-examples.md\":\"BDyuj05i\",\"backend_api_graphql_dataloader.md\":\"BwTyTc2n\",\"backend_api_graphql_error-handling.md\":\"mu7hWq6e\",\"backend_api_graphql_monitoring.md\":\"B-xE99jV\",\"backend_api_graphql_query-optimization.md\":\"DVOE4Lsa\",\"backend_api_graphql_resolvers.md\":\"ejgQ3zHJ\",\"backend_api_graphql_schema.md\":\"DmRSuKEl\",\"backend_api_graphql_security.md\":\"CsMUgaIa\",\"backend_api_graphql_subscriptions.md\":\"kPOXR6AF\",\"backend_api_rest_auth.md\":\"B3wGbrj5\",\"backend_api_rest_http-methods.md\":\"Cazv5kNu\",\"backend_api_rest_hypermedia.md\":\"B0N1RLFX\",\"backend_api_rest_resource-design.md\":\"D4QyJU9Q\",\"backend_api_rest_status-codes.md\":\"79SF3iCP\",\"backend_api_rest_versioning.md\":\"BWiPSOar\",\"backend_architecture_event-sourcing_concepts.md\":\"DePQIUcu\",\"backend_architecture_event-sourcing_cqrs.md\":\"CA4fHNIk\",\"backend_architecture_event-sourcing_replay.md\":\"CX6X8wEN\",\"backend_architecture_event-sourcing_snapshots.md\":\"JeJr6Vjl\",\"backend_architecture_event-sourcing_storage.md\":\"tal4Y4Cw\",\"backend_architecture_microservices_api-gateway.md\":\"DcyKtHOH\",\"backend_architecture_microservices_communication.md\":\"DtPJbNEo\",\"backend_architecture_microservices_configuration.md\":\"CEOUQ2P_\",\"backend_architecture_microservices_decomposition.md\":\"ikj5yV3_\",\"backend_architecture_microservices_principles.md\":\"CpqIZ1h8\",\"backend_architecture_microservices_resilience.md\":\"CmDEFt4G\",\"backend_architecture_microservices_service-discovery.md\":\"CwIvdFBc\",\"backend_architecture_microservices_transactions.md\":\"Dg4uBQoM\",\"backend_architecture_service-mesh_envoy.md\":\"CxzlN_mD\",\"backend_architecture_service-mesh_istio.md\":\"Bl9LjBmr\",\"backend_architecture_service-mesh_observability.md\":\"DwFM-gEY\",\"backend_architecture_service-mesh_security.md\":\"WBBbJToF\",\"backend_architecture_service-mesh_traffic.md\":\"CBK1Qgkr\",\"backend_auth_jwt_algorithms.md\":\"CbrgCwEx\",\"backend_auth_jwt_lifecycle.md\":\"BKN6Jqo3\",\"backend_auth_jwt_refresh-tokens.md\":\"CKaCEYHz\",\"backend_auth_jwt_stateless.md\":\"Cav2jwjL\",\"backend_auth_jwt_storage.md\":\"BtBPemOy\",\"backend_auth_jwt_structure.md\":\"bAEbpsCH\",\"backend_auth_oauth_concepts.md\":\"BXVz2ES7\",\"backend_auth_oauth_flows.md\":\"CIOYj-5r\",\"backend_auth_oauth_jwt.md\":\"BxbB6uzF\",\"backend_auth_oauth_oidc.md\":\"DJnNu4dY\",\"backend_auth_oauth_patterns.md\":\"BuA5m4li\",\"backend_auth_oauth_pkce.md\":\"C8IAn-bI\",\"backend_auth_oauth_security.md\":\"BiP9mg_s\",\"backend_auth_oauth_vulnerabilities.md\":\"BWyAnj1z\",\"backend_index.md\":\"CyM-mca2\",\"backend_internet_dns_cdn.md\":\"Btx_iap8\",\"backend_internet_dns_edns.md\":\"C11dJ0KI\",\"backend_internet_dns_load-balancing.md\":\"DuM4GJk0\",\"backend_internet_dns_record-types.md\":\"D9nhG9GV\",\"backend_internet_dns_resolution.md\":\"CO79QBcw\",\"backend_internet_dns_security.md\":\"CDs9np51\",\"backend_internet_grpc_error-handling.md\":\"BfjtixOV\",\"backend_internet_grpc_interceptors.md\":\"WkSMwNbn\",\"backend_internet_grpc_load-balancing.md\":\"DvVegkS-\",\"backend_internet_grpc_performance.md\":\"BaJ76cQI\",\"backend_internet_grpc_protobuf.md\":\"CQb8hjpk\",\"backend_internet_grpc_service-definition.md\":\"Dx-anqmm\",\"backend_internet_grpc_streaming.md\":\"D1hTY5nx\",\"backend_internet_http_caching.md\":\"BbbgAc5z\",\"backend_internet_http_headers.md\":\"0H6NE_T3\",\"backend_internet_http_http2.md\":\"DMhJhX71\",\"backend_internet_http_http3.md\":\"DVlP9zEb\",\"backend_internet_http_https.md\":\"U631qQkB\",\"backend_internet_http_methods.md\":\"vqpwxr68\",\"backend_internet_http_status-codes.md\":\"Cytk9H1E\",\"backend_languages_go_concurrency.md\":\"CtRfJ9JW\",\"backend_languages_go_gc.md\":\"DFw5WjvM\",\"backend_languages_go_networking.md\":\"DnzTuG28\",\"backend_languages_go_performance.md\":\"DboZZcF6\",\"backend_languages_go_std-lib.md\":\"CHIWzhOJ\",\"backend_languages_go_syntax.md\":\"KlbZGgW9\",\"backend_languages_go_testing.md\":\"BD_4pkTy\",\"backend_languages_java_bytecode.md\":\"BxxmaZZD\",\"backend_languages_java_collections.md\":\"HCIxanAa\",\"backend_languages_java_concurrency.md\":\"DjHOlL3c\",\"backend_languages_java_features.md\":\"B2Skv1LQ\",\"backend_languages_java_jvm.md\":\"D_SrL15r\",\"backend_languages_java_performance.md\":\"BHGhriZW\",\"backend_languages_java_spring.md\":\"D142nfyX\",\"backend_languages_java_syntax.md\":\"C9wDNPWI\",\"backend_languages_python_advanced.md\":\"9pwWGSHS\",\"backend_languages_python_async.md\":\"8NJKoOht\",\"backend_languages_python_django.md\":\"B1T4hwVX\",\"backend_languages_python_flask.md\":\"KU20k69u\",\"backend_languages_python_jvm.md\":\"DgwFSpkW\",\"backend_languages_python_metaprogramming.md\":\"MpVx1W1A\",\"backend_languages_python_performance.md\":\"Ccaicgp_\",\"backend_languages_python_scientific.md\":\"DiVeH8bs\",\"backend_messaging_kafka_architecture.md\":\"CWFkTpmk\",\"backend_messaging_kafka_consumer-groups.md\":\"y1YRt3y8\",\"backend_messaging_kafka_partitioning.md\":\"QoE2vASf\",\"backend_messaging_kafka_producers.md\":\"P0jRhMd4\",\"backend_messaging_kafka_replication.md\":\"CDnB9kSy\",\"backend_messaging_kafka_streams.md\":\"DH4TULPC\",\"backend_messaging_rabbitmq_ack.md\":\"BTFrFJRO\",\"backend_messaging_rabbitmq_clustering.md\":\"y7BrUNsQ\",\"backend_messaging_rabbitmq_exchanges.md\":\"CXlr9uaP\",\"backend_messaging_rabbitmq_persistence.md\":\"BSYwSzhv\",\"backend_messaging_rabbitmq_queues.md\":\"BYdDPps0\",\"backend_observability_logging_analysis.md\":\"D3aYWGCe\",\"backend_observability_logging_collection.md\":\"IROQfjy3\",\"backend_observability_logging_rotation.md\":\"Cp2dgH1c\",\"backend_observability_logging_structured.md\":\"BUNe2P5n\",\"backend_observability_logging_tracing.md\":\"DyAtsk1U\",\"backend_observability_profiling_cpu.md\":\"C1AQ7SRw\",\"backend_observability_profiling_flamegraphs.md\":\"CHQGx25I\",\"backend_observability_profiling_io.md\":\"DfG1MCSb\",\"backend_observability_profiling_memory.md\":\"CdBrs2iY\",\"backend_observability_profiling_tracing.md\":\"DQsJ7oVL\",\"backend_observability_tracing_context-propagation.md\":\"BSZLLyBY\",\"backend_observability_tracing_opentelemetry.md\":\"CTVd5wut\",\"backend_observability_tracing_performance.md\":\"BBV0AQco\",\"backend_observability_tracing_sampling.md\":\"vTKWa7AS\",\"backend_os_io_blocking.md\":\"Bxt_bApY\",\"backend_os_io_buffers.md\":\"lKmQSkFR\",\"backend_os_io_filesystems.md\":\"or9R1Zk4\",\"backend_os_io_multiplexing.md\":\"BAcnfL6L\",\"backend_os_io_sync.md\":\"sDNnrEKJ\",\"backend_os_io_zero-copy.md\":\"BtSGF3a5\",\"backend_os_ipc_allocation.md\":\"DTGP1wJ2\",\"backend_os_ipc_mq.md\":\"DbW2pseY\",\"backend_os_ipc_pipes.md\":\"BL9-RoTm\",\"backend_os_ipc_rpc.md\":\"L6ZcSl8e\",\"backend_os_ipc_shared-memory.md\":\"CfcZ8qUN\",\"backend_os_ipc_signals.md\":\"DIDvyxhk\",\"backend_os_ipc_sockets.md\":\"BvSEbtLn\",\"backend_os_memory_allocation.md\":\"CGwcZuvD\",\"backend_os_memory_caching.md\":\"Bu3nyzM1\",\"backend_os_memory_gc.md\":\"Cgqb2NQb\",\"backend_os_memory_leaks.md\":\"BCoz2SJ-\",\"backend_os_memory_paging.md\":\"B0dJdJL9\",\"backend_os_memory_virtual.md\":\"CsskSCPM\",\"backend_principles_ddd_aggregates.md\":\"sYfy2YwD\",\"backend_principles_ddd_bounded-contexts.md\":\"DwG1NV2w\",\"backend_principles_ddd_entities.md\":\"CMEYpZwk\",\"backend_principles_ddd_events.md\":\"C88eoLsp\",\"backend_principles_ddd_services.md\":\"BYdiZ-fw\",\"backend_principles_patterns_anti-patterns.md\":\"BOUmhg8n\",\"backend_principles_patterns_behavioral.md\":\"Bcu_AB7M\",\"backend_principles_patterns_concurrency.md\":\"BShjL-46\",\"backend_principles_patterns_creational.md\":\"fgxrC9zF\",\"backend_principles_patterns_structural.md\":\"Dt1-IPmi\",\"backend_scaling_strategies_autoscaling.md\":\"BhCkpGWx\",\"backend_scaling_strategies_capacity.md\":\"C5pEP3oY\",\"backend_scaling_strategies_horizontal.md\":\"vO7QgXSY\",\"backend_scaling_strategies_load-testing.md\":\"DBx5WsJo\",\"backend_scaling_strategies_vertical.md\":\"Ckc-__-3\",\"backend_scaling_throttling_adaptive.md\":\"DczATShX\",\"backend_scaling_throttling_distributed.md\":\"GI0myOJK\",\"backend_scaling_throttling_leaky-bucket.md\":\"BrWyYN88\",\"backend_scaling_throttling_token-bucket.md\":\"CZULryz9\",\"backend_security_https_certificates.md\":\"D2Rytv6P\",\"backend_security_https_hsts.md\":\"4qy0KfwQ\",\"backend_security_https_key-exchange.md\":\"CQ4qCIT1\",\"backend_security_https_ocsp.md\":\"DYjPmu9b\",\"backend_security_https_tls-config.md\":\"UH-c4a8W\",\"backend_security_owasp_access-control.md\":\"CsJbKgdb\",\"backend_security_owasp_configuration.md\":\"DKnqAVo3\",\"backend_security_owasp_csrf.md\":\"BFVYi282\",\"backend_security_owasp_injection.md\":\"CC3iqCAR\",\"backend_security_owasp_xss.md\":\"BvC0CmDg\",\"backend_testing_integration_contract.md\":\"DX0JPeoi\",\"backend_testing_integration_e2e.md\":\"08X94dDj\",\"backend_testing_integration_environments.md\":\"C09CXLKX\",\"backend_testing_integration_test-data.md\":\"4Fn3D8ES\",\"backend_testing_unit_coverage.md\":\"DaICC07T\",\"backend_testing_unit_mocking.md\":\"DyugLNpZ\",\"backend_testing_unit_parameterized.md\":\"D9X1armr\",\"backend_testing_unit_tdd.md\":\"BgXW_V2H\",\"backend_testing_unit_test-doubles.md\":\"BWo2PdVm\",\"data_accss_connection-pooling_druid.md\":\"DB4K4dxb\",\"data_accss_connection-pooling_hikaricp.md\":\"bMiukfkQ\",\"data_accss_connection-pooling_pgbouncer.md\":\"iYSRYJY8\",\"data_accss_connection-pooling_proxysql.md\":\"DsWY4VAk\",\"data_accss_optimization_advanced_materialized-views.md\":\"0ad8pG74\",\"data_accss_optimization_advanced_pagination.md\":\"DI-CSbnB\",\"data_accss_optimization_advanced_parameterized.md\":\"C7zQqTc0\",\"data_accss_optimization_advanced_rewriting.md\":\"Balr9TGc\",\"data_accss_optimization_execution_explain.md\":\"CZsJh2MN\",\"data_accss_optimization_execution_indexing.md\":\"DnbkDYNJ\",\"data_accss_optimization_execution_joins.md\":\"BPAE-CUz\",\"data_accss_optimization_execution_statistics.md\":\"DXzaywV8\",\"data_accss_optimization_solutions_hotspots.md\":\"9MBoOo_7\",\"data_accss_optimization_solutions_locking.md\":\"Czg8iaIv\",\"data_accss_optimization_solutions_nplusone.md\":\"CL4mJsxT\",\"data_accss_optimization_solutions_slow-query.md\":\"DexKDOiW\",\"data_accss_orm_go_bun.md\":\"C1DjE6DQ\",\"data_accss_orm_go_ent.md\":\"Bv_J2QXn\",\"data_accss_orm_go_gorm.md\":\"88WkdAv1\",\"data_accss_orm_go_sqlx.md\":\"rhxUMSIL\",\"data_accss_orm_java_hibernate.md\":\"h_BFzc7m\",\"data_accss_orm_java_jpa.md\":\"C1XVW7p7\",\"data_accss_orm_java_mybatis.md\":\"BiVVzxJn\",\"data_accss_orm_java_querydsl.md\":\"arAJavFC\",\"data_accss_orm_java_spring-data.md\":\"BYMahXlM\",\"data_accss_orm_nodejs_knex.md\":\"IMACEo__\",\"data_accss_orm_nodejs_prisma.md\":\"C0svddIa\",\"data_accss_orm_nodejs_sequelize.md\":\"3h48lPaV\",\"data_accss_orm_nodejs_typeorm.md\":\"C0CDjBYG\",\"data_accss_orm_python_django-orm.md\":\"D-VBE9Um\",\"data_accss_orm_python_peewee.md\":\"BotnsNZq\",\"data_accss_orm_python_pony.md\":\"9WSWpwP4\",\"data_accss_orm_python_sqlalchemy.md\":\"jdSq3XrB\",\"data_accss_transactions_acid_atomicity.md\":\"CdG0ajh7\",\"data_accss_transactions_acid_consistency.md\":\"CqsaAheM\",\"data_accss_transactions_acid_durability.md\":\"DheRA_js\",\"data_accss_transactions_acid_isolation.md\":\"X8LYd6Lh\",\"data_accss_transactions_concurrency_locking.md\":\"BSAAzcG1\",\"data_accss_transactions_concurrency_mvcc.md\":\"DhJNBdet\",\"data_accss_transactions_concurrency_optimistic.md\":\"ClWtQ8r4\",\"data_accss_transactions_concurrency_timestamp.md\":\"B8C67Iz4\",\"data_accss_transactions_patterns_local-message.md\":\"D3dOtXFL\",\"data_accss_transactions_patterns_outbox.md\":\"DkCsl0zQ\",\"data_accss_transactions_patterns_saga.md\":\"DyZy1FGe\",\"data_accss_transactions_patterns_tcc.md\":\"iJI61rfI\",\"data_architecture_dw_data-mesh_autonomy.md\":\"CzQaqETT\",\"data_architecture_dw_data-mesh_domain-driven.md\":\"jreo6t6X\",\"data_architecture_dw_data-mesh_federated.md\":\"CJ53EYmm\",\"data_architecture_dw_design_galaxy.md\":\"BwWIBp0n\",\"data_architecture_dw_design_materialized.md\":\"C1rNcoh6\",\"data_architecture_dw_design_snowflake.md\":\"DkYGOpNN\",\"data_architecture_dw_design_star.md\":\"DGj23FEq\",\"data_architecture_dw_modern-stack_bigquery.md\":\"0evSMRXD\",\"data_architecture_dw_modern-stack_databricks.md\":\"DQElB2zq\",\"data_architecture_dw_modern-stack_redshift.md\":\"DmIZM1f3\",\"data_architecture_dw_modern-stack_snowflake.md\":\"XeIsw049\",\"data_architecture_governance_mdm_entity-resolution.md\":\"C2tf-HVz\",\"data_architecture_governance_mdm_golden-record.md\":\"BviHOrev\",\"data_architecture_governance_mdm_model.md\":\"Bcnw4NZP\",\"data_architecture_governance_metadata_atlas.md\":\"BUrxTuXK\",\"data_architecture_governance_metadata_catalog.md\":\"DMa-ZSXk\",\"data_architecture_governance_metadata_datahub.md\":\"C7_UvaEj\",\"data_architecture_governance_metadata_lineage.md\":\"Bu69UETW\",\"data_architecture_governance_quality_anomaly.md\":\"C7T5X-ru\",\"data_architecture_governance_quality_cleansing.md\":\"B21bYiy0\",\"data_architecture_governance_quality_monitoring.md\":\"BoyOG5Yn\",\"data_architecture_governance_quality_profiling.md\":\"HlG2UuiC\",\"data_architecture_governance_security_access-control.md\":\"B1WX2VVQ\",\"data_architecture_governance_security_encryption.md\":\"CXvkRCWB\",\"data_architecture_governance_security_gdpr.md\":\"DDQj_8Vc\",\"data_architecture_governance_security_masking.md\":\"Bp-AcAU-\",\"data_architecture_migration_strategies_blue-green.md\":\"CaHLVYKB\",\"data_architecture_migration_strategies_dual-write.md\":\"C8JMMt4g\",\"data_architecture_migration_strategies_phased.md\":\"DgAerp2l\",\"data_architecture_migration_strategies_zero-downtime.md\":\"c9gDQbhD\",\"data_architecture_migration_tools_airbyte.md\":\"CxtG8IGc\",\"data_architecture_migration_tools_debezium.md\":\"0As_VcY4\",\"data_architecture_migration_tools_dms.md\":\"BA30lPsQ\",\"data_architecture_migration_tools_fivetran.md\":\"jOKwIIX6\",\"data_architecture_migration_validation_benchmark.md\":\"CIhtkTKt\",\"data_architecture_migration_validation_consistency.md\":\"BSYJzf-n\",\"data_architecture_migration_validation_quality.md\":\"C9q9jJfT\",\"data_architecture_modeling_ddd_aggregates.md\":\"WSnnfOoA\",\"data_architecture_modeling_ddd_cqrs.md\":\"ouTaXwQr\",\"data_architecture_modeling_ddd_domain-events.md\":\"iWnSWP4F\",\"data_architecture_modeling_ddd_value-objects.md\":\"C1etlpx4\",\"data_architecture_modeling_methodologies_anchor.md\":\"3b_n0OOy\",\"data_architecture_modeling_methodologies_datavault.md\":\"iStv35-b\",\"data_architecture_modeling_methodologies_dimensional.md\":\"ChvlNLBe\",\"data_architecture_modeling_methodologies_relational.md\":\"BfEvxjNE\",\"data_architecture_modeling_multimodel_document.md\":\"Ccc2-irU\",\"data_architecture_modeling_multimodel_graph.md\":\"BKAOzz3A\",\"data_architecture_modeling_multimodel_time-series.md\":\"CZHpnJ6a\",\"data_architecture_modeling_multimodel_wide-column.md\":\"CjGtPNVz\",\"data_database_bigdata_datalake_delta.md\":\"CuMxIEer\",\"data_database_bigdata_datalake_hudi.md\":\"CRET8qmY\",\"data_database_bigdata_datalake_iceberg.md\":\"Cp0WV_1N\",\"data_database_bigdata_datalake_lakehouse.md\":\"BdsTEyPN\",\"data_database_bigdata_hadoop_columnar.md\":\"MLrAWL4Y\",\"data_database_bigdata_hadoop_hbase.md\":\"BXAQXPGi\",\"data_database_bigdata_hadoop_hdfs.md\":\"C0HE-QA2\",\"data_database_bigdata_hadoop_zookeeper.md\":\"CtEo5zUN\",\"data_database_nosql_document_couchdb_fauxton.md\":\"6lLXQVUz\",\"data_database_nosql_document_couchdb_mapreduce.md\":\"BdyHoZzW\",\"data_database_nosql_document_couchdb_mvcc.md\":\"fz8L3J4R\",\"data_database_nosql_document_couchdb_pouchdb.md\":\"PW4XwRuo\",\"data_database_nosql_document_couchdb_replication.md\":\"BACgETcL\",\"data_database_nosql_document_mongodb_aggregation.md\":\"CZpIzp-K\",\"data_database_nosql_document_mongodb_atlas.md\":\"DFUmk1hu\",\"data_database_nosql_document_mongodb_change-streams.md\":\"Bx6D5UxD\",\"data_database_nosql_document_mongodb_data-modeling.md\":\"DfRjoNs6\",\"data_database_nosql_document_mongodb_indexing.md\":\"DmnkLCRB\",\"data_database_nosql_document_mongodb_replication.md\":\"Bd1MUsZo\",\"data_database_nosql_document_mongodb_sharding.md\":\"C3Z723jF\",\"data_database_nosql_document_mongodb_transactions.md\":\"DzuhI6I4\",\"data_database_nosql_graph_dgraph_acid.md\":\"BcU_5joj\",\"data_database_nosql_graph_dgraph_distributed.md\":\"AStoE57B\",\"data_database_nosql_graph_dgraph_graphql.md\":\"CCrBeZGb\",\"data_database_nosql_graph_dgraph_rdf.md\":\"9eZLbDnF\",\"data_database_nosql_graph_neo4j_apoc.md\":\"4uf2ieFf\",\"data_database_nosql_graph_neo4j_cypher.md\":\"BF8gpwvj\",\"data_database_nosql_graph_neo4j_indexing.md\":\"BPjXd_oW\",\"data_database_nosql_graph_neo4j_property-graph.md\":\"BKHA4HGn\",\"data_database_nosql_graph_neo4j_traversal.md\":\"9dUKm4ku\",\"data_database_nosql_keyvalue_etcd_leases.md\":\"B017Jln2\",\"data_database_nosql_keyvalue_etcd_raft.md\":\"BD4G6D6N\",\"data_database_nosql_keyvalue_etcd_transactions.md\":\"BqzfJgOw\",\"data_database_nosql_keyvalue_etcd_watch.md\":\"BmLu_q-J\",\"data_database_nosql_keyvalue_redis_cluster.md\":\"BS5x6B3E\",\"data_database_nosql_keyvalue_redis_data-structures.md\":\"CaU_vpnV\",\"data_database_nosql_keyvalue_redis_lua.md\":\"C6XIrtQ1\",\"data_database_nosql_keyvalue_redis_persistence.md\":\"DiqMtSR9\",\"data_database_nosql_keyvalue_redis_redisearch.md\":\"CdUiIqnn\",\"data_database_nosql_keyvalue_redis_streams.md\":\"BbT8rd18\",\"data_database_nosql_timeseries_influxdb_cq.md\":\"DIopOvzF\",\"data_database_nosql_timeseries_influxdb_flux.md\":\"D7isNcA5\",\"data_database_nosql_timeseries_influxdb_retention.md\":\"BajqO03C\",\"data_database_nosql_timeseries_influxdb_telegraf.md\":\"CDB_FIsd\",\"data_database_nosql_timeseries_influxdb_tsm.md\":\"YokJPysu\",\"data_database_nosql_timeseries_prometheus_data-model.md\":\"BeKhPmqL\",\"data_database_nosql_timeseries_prometheus_database.md\":\"3v3yAE0t\",\"data_database_nosql_timeseries_prometheus_promql.md\":\"DnQsu_K-\",\"data_database_nosql_timeseries_prometheus_remote-write.md\":\"Te8zP7P8\",\"data_database_nosql_timeseries_timescaledb_compression.md\":\"DJMXROjx\",\"data_database_nosql_timeseries_timescaledb_continuous-aggs.md\":\"BHGVfmJm\",\"data_database_nosql_timeseries_timescaledb_distributed.md\":\"BTxAxOAX\",\"data_database_nosql_timeseries_timescaledb_hypertables.md\":\"CceO8sab\",\"data_database_relational_distributed_cockroachdb.md\":\"D8ZngN5b\",\"data_database_relational_distributed_distributed-tx.md\":\"BC13-CNR\",\"data_database_relational_distributed_mvcc.md\":\"CQk2XgFO\",\"data_database_relational_distributed_spanner.md\":\"C47YZJob\",\"data_database_relational_distributed_tidb.md\":\"CjzSuLIe\",\"data_database_relational_distributed_yugabytedb.md\":\"pIpgRN3-\",\"data_database_relational_mysql_high-availability.md\":\"CLlbgOHq\",\"data_database_relational_mysql_index-optimization.md\":\"AX6AIz5N\",\"data_database_relational_mysql_innodb.md\":\"BWunfF_j\",\"data_database_relational_mysql_optimizer.md\":\"CdlPED13\",\"data_database_relational_mysql_performance.md\":\"DGyVSv_g\",\"data_database_relational_mysql_replication.md\":\"CSHhJ7KM\",\"data_database_relational_mysql_sharding.md\":\"Dap2q56O\",\"data_database_relational_mysql_transactions.md\":\"Dezre3En\",\"data_database_relational_postgres_architecture.md\":\"5FnEkVQA\",\"data_database_relational_postgres_fdw.md\":\"DlJkMxbM\",\"data_database_relational_postgres_fulltext-search.md\":\"DJhOOBgd\",\"data_database_relational_postgres_indexing.md\":\"DD_8Ltgx\",\"data_database_relational_postgres_jsonb.md\":\"BuVqC2iu\",\"data_database_relational_postgres_mvcc.md\":\"Dk3xCoHx\",\"data_database_relational_postgres_partitioning.md\":\"Djefr5df\",\"data_database_relational_postgres_performance.md\":\"cQzvaUSc\",\"data_database_relational_postgres_replication.md\":\"DBCfX0Bs\",\"data_index.md\":\"inDU1vsG\",\"data_performance_batching_batch-processing.md\":\"B15rPAKq\",\"data_performance_batching_bulk-loading.md\":\"BwfKgJ0Q\",\"data_performance_batching_pipelining.md\":\"B-iE9CZ5\",\"data_performance_batching_prefetching.md\":\"CiFW2Pv3\",\"data_performance_caching_patterns_cache-aside.md\":\"BwrHcl9_\",\"data_performance_caching_patterns_read-write-through.md\":\"BfgyNalq\",\"data_performance_caching_patterns_refresh-ahead.md\":\"CTGm2TR1\",\"data_performance_caching_patterns_write-behind.md\":\"B6HRXVy_\",\"data_performance_caching_problems_avalanche.md\":\"BabOxq3u\",\"data_performance_caching_problems_breakdown.md\":\"CQ1re1ia\",\"data_performance_caching_problems_consistency.md\":\"CsobPq4Z\",\"data_performance_caching_problems_penetration.md\":\"D28wKUBs\",\"data_performance_caching_technologies_caffeine.md\":\"C4jt4hEo\",\"data_performance_caching_technologies_ehcache.md\":\"CJDBEWUX\",\"data_performance_caching_technologies_memcached.md\":\"BunmjITk\",\"data_performance_caching_technologies_redis.md\":\"DNoVWa35\",\"data_performance_read-write-split_consistency_eventual.md\":\"n1I-c2Rm\",\"data_performance_read-write-split_consistency_monotonic.md\":\"DWx1gCfN\",\"data_performance_read-write-split_consistency_read-your-writes.md\":\"CiV_Pbpy\",\"data_performance_read-write-split_patterns_client.md\":\"D60BmCRQ\",\"data_performance_read-write-split_patterns_middleware.md\":\"Cn-tWUe4\",\"data_performance_read-write-split_patterns_proxy.md\":\"dFpjnCXr\",\"data_performance_read-write-split_replication_lag.md\":\"C_hsFnQT\",\"data_performance_read-write-split_replication_master-slave.md\":\"C32HLCBF\",\"data_performance_read-write-split_replication_multi-source.md\":\"AwMExPec\",\"data_performance_read-write-split_replication_三semi-sync.md\":\"wdxs93kz\",\"data_performance_sharding_management_cross-shard.md\":\"DCY5l3qk\",\"data_performance_sharding_management_monitoring.md\":\"DFeFOYtP\",\"data_performance_sharding_management_rebalancing.md\":\"DZPK_Sxb\",\"data_performance_sharding_management_routing.md\":\"CRFi8Cu3\",\"data_performance_sharding_strategies_directory.md\":\"DwiG3x09\",\"data_performance_sharding_strategies_geo.md\":\"FGCBnrNw\",\"data_performance_sharding_strategies_hash.md\":\"C1i5Rm-p\",\"data_performance_sharding_strategies_range.md\":\"3XfcdjME\",\"data_performance_sharding_tools_citus.md\":\"BPsS3tcx\",\"data_performance_sharding_tools_shardingsphere.md\":\"C-ZV-Jbi\",\"data_performance_sharding_tools_vitess.md\":\"D90GyP3K\",\"data_processing_batch_frameworks_flink-batch.md\":\"Bcsi5PlO\",\"data_processing_batch_frameworks_hive.md\":\"PPbLiobP\",\"data_processing_batch_frameworks_mapreduce.md\":\"Cs3227Lt\",\"data_processing_batch_frameworks_spark.md\":\"BDeEPj6n\",\"data_processing_batch_optimization_fault-tolerance.md\":\"Dg0frYRe\",\"data_processing_batch_optimization_memory.md\":\"BLIz8x0W\",\"data_processing_batch_optimization_partitioning.md\":\"DCOVo7Lk\",\"data_processing_batch_optimization_skew.md\":\"CY5qzNdo\",\"data_processing_batch_use-cases_etl.md\":\"DvY0930c\",\"data_processing_batch_use-cases_feature-engineering.md\":\"CVq57bjD\",\"data_processing_batch_use-cases_reporting.md\":\"DXFOda0A\",\"data_processing_etl_elt_cloud-dw.md\":\"8WdqirTX\",\"data_processing_etl_elt_data-lake.md\":\"REKS2sum\",\"data_processing_etl_elt_serverless.md\":\"DpGcqWT_\",\"data_processing_etl_patterns_cleansing.md\":\"CTlQd15a\",\"data_processing_etl_patterns_incremental.md\":\"CxmaNnnH\",\"data_processing_etl_patterns_quality.md\":\"CO1gh5wx\",\"data_processing_etl_patterns_scd.md\":\"Bayu7h_h\",\"data_processing_etl_tools_airflow.md\":\"Cp4JpEo8\",\"data_processing_etl_tools_dbt.md\":\"DURsbqBz\",\"data_processing_etl_tools_informatica.md\":\"C_q_1q4t\",\"data_processing_etl_tools_talend.md\":\"MKNu-795\",\"data_processing_streaming_frameworks_flink.md\":\"Ca7r-5B9\",\"data_processing_streaming_frameworks_kafka-streams.md\":\"KJJ5YUB2\",\"data_processing_streaming_frameworks_ksql.md\":\"DXTRl1dl\",\"data_processing_streaming_frameworks_spark-streaming.md\":\"CQr7Uu1e\",\"data_processing_streaming_patterns_cep.md\":\"pz2gq_ne\",\"data_processing_streaming_patterns_exactly-once.md\":\"N1k9Fno-\",\"data_processing_streaming_patterns_state.md\":\"CCs-Q42E\",\"data_processing_streaming_patterns_windowing.md\":\"C_6wT5cP\",\"data_processing_streaming_use-cases_fraud.md\":\"BPSn7LHz\",\"data_processing_streaming_use-cases_monitoring.md\":\"CVXauXGH\",\"data_processing_streaming_use-cases_recommendation.md\":\"CpFrwcsL\",\"data_search_engines_elasticsearch_aggregations.md\":\"Br153eXS\",\"data_search_engines_elasticsearch_analysis.md\":\"CB9clVnm\",\"data_search_engines_elasticsearch_architecture.md\":\"B1lNpH8c\",\"data_search_engines_elasticsearch_cluster.md\":\"B3maP_up\",\"data_search_engines_elasticsearch_dsl.md\":\"ryeRVES7\",\"data_search_engines_elasticsearch_indexing.md\":\"CYXZdsbw\",\"data_search_engines_elasticsearch_performance.md\":\"Divjl7Hz\",\"data_search_engines_elasticsearch_security.md\":\"D7lNrhoR\",\"data_search_engines_meilisearch_fault-tolerant.md\":\"C587dg5R\",\"data_search_engines_meilisearch_instant.md\":\"DmJu77aN\",\"data_search_engines_meilisearch_synonyms.md\":\"B1N0Ku62\",\"data_search_engines_opensearch_comparison.md\":\"vnqjUBLj\",\"data_search_engines_opensearch_observability.md\":\"BUD8AF7G\",\"data_search_engines_opensearch_security.md\":\"BevUejSH\",\"data_search_engines_solr_architecture.md\":\"fVNmcg6D\",\"data_search_engines_solr_cloud.md\":\"CZkuZCy8\",\"data_search_engines_solr_faceting.md\":\"D3qNGnBT\",\"data_search_engines_solr_query.md\":\"DRfAMGKb\",\"data_search_indexing_maintenance_defrag.md\":\"C7Nmlycq\",\"data_search_indexing_maintenance_rebuild.md\":\"CHz6MJ5X\",\"data_search_indexing_maintenance_statistics.md\":\"BqjNOMej\",\"data_search_indexing_strategies_composite.md\":\"D2vo-83D\",\"data_search_indexing_strategies_covering.md\":\"CUXlmceO\",\"data_search_indexing_strategies_merge.md\":\"DxvtICd0\",\"data_search_indexing_strategies_pushdown.md\":\"BON5UnSp\",\"data_search_indexing_strategies_selectivity.md\":\"C2NQNmKZ\",\"data_search_indexing_types_bitmap.md\":\"Bs1v7h16\",\"data_search_indexing_types_btree.md\":\"BWDMfBsy\",\"data_search_indexing_types_fulltext.md\":\"BJz57SAE\",\"data_search_indexing_types_hash.md\":\"BXyWFIux\",\"data_search_indexing_types_inverted.md\":\"C23Zne8j\",\"data_search_indexing_types_spatial.md\":\"ITIoWS22\",\"data_search_multimodel_federated.md\":\"cAvbbM-o\",\"data_search_multimodel_graph.md\":\"BjuLOtnK\",\"data_search_multimodel_hybrid.md\":\"3tvkYrKb\",\"data_search_multimodel_vector.md\":\"zcGigKyv\",\"data_sql_bug_view-missing-field.md\":\"C5EabCle\",\"data_sql_optimization_index-optimization.md\":\"p-VeYQke\",\"data_sql_sqlite_base.md\":\"CnTGG3Ku\",\"devops_blog_emoji.md\":\"R7d0zfQo\",\"devops_blog_githubpage-vitepress.md\":\"D8sgTIXv\",\"devops_blog_group.md\":\"DU2fbI2x\",\"devops_blog_mermaid.md\":\"CRQr7Zg3\",\"devops_blog_other.md\":\"Cex1S38p\",\"devops_blog_timeline.md\":\"dWhc5rQV\",\"devops_cicd_jenkins_docker.md\":\"Cno5mJGT\",\"devops_cicd_jenkins_freestyle.md\":\"BHWzgK8R\",\"devops_cicd_jenkins_pipeline.md\":\"BxmhLuLh\",\"devops_cloud_aws_ec2.md\":\"CS6ZzOAV\",\"devops_cloud_aws_eks.md\":\"DmFSQypf\",\"devops_cloud_aws_iam.md\":\"BfxHFcH3\",\"devops_cloud_aws_lambda.md\":\"BBpgcrFy\",\"devops_cloud_aws_rds.md\":\"CXzuqBNB\",\"devops_cloud_aws_s3.md\":\"CBl9tfyW\",\"devops_cloud_aws_vpc.md\":\"BUgHyzZG\",\"devops_cloud_azure_ad.md\":\"CYzVQdVr\",\"devops_cloud_azure_aks.md\":\"18_LJOGS\",\"devops_cloud_azure_blob.md\":\"Bf7ywL1u\",\"devops_cloud_azure_functions.md\":\"ihOua045\",\"devops_cloud_azure_vmss.md\":\"LPbeIhst\",\"devops_cloud_azure_vnet.md\":\"Me4Pepsj\",\"devops_cloud_gcp_compute.md\":\"VEoz0XYT\",\"devops_cloud_gcp_functions.md\":\"KtWgVzyI\",\"devops_cloud_gcp_gke.md\":\"DPDc2CL9\",\"devops_cloud_gcp_iam.md\":\"CmShJwKl\",\"devops_cloud_gcp_storage.md\":\"DaylSvEa\",\"devops_cloud_gcp_vpc.md\":\"DkbpTUQ4\",\"devops_cloud_multi-cloud_cost-optimization.md\":\"C51bh-Fx\",\"devops_cloud_multi-cloud_disaster-recovery.md\":\"ROn1CkyL\",\"devops_cloud_multi-cloud_identity.md\":\"Di7tDfZS\",\"devops_cloud_multi-cloud_networking.md\":\"Gupb_7P-\",\"devops_container_docker_architecture.md\":\"CxGNmIrg\",\"devops_container_docker_image-build.md\":\"iq-hGFXU\",\"devops_container_docker_multi-stage.md\":\"Bh2GhDu0\",\"devops_container_docker_networking.md\":\"DYlN9CFm\",\"devops_container_docker_resource-limits.md\":\"BAzBrc-4\",\"devops_container_docker_security.md\":\"CwmdbU4V\",\"devops_container_docker_storage.md\":\"Dolqs_zP\",\"devops_container_docker_swarm.md\":\"BlFgEYqc\",\"devops_container_kubernetes_architecture.md\":\"TZ5ByO1S\",\"devops_container_kubernetes_autoscaling.md\":\"Ca06VR4w\",\"devops_container_kubernetes_config.md\":\"DgekyHhc\",\"devops_container_kubernetes_network-policies.md\":\"B68noMK3\",\"devops_container_kubernetes_operators.md\":\"DbLc6Hh4\",\"devops_container_kubernetes_pods.md\":\"CmFBNuTW\",\"devops_container_kubernetes_services.md\":\"CVa_H_0V\",\"devops_container_kubernetes_upgrades.md\":\"QaKmAwEB\",\"devops_container_kubernetes_volumes.md\":\"eEt66bRt\",\"devops_container_orchestration_helm.md\":\"ChXJ4rwb\",\"devops_container_orchestration_kustomize.md\":\"BJ785Fnc\",\"devops_container_orchestration_serverless.md\":\"DP0O3uNm\",\"devops_container_orchestration_service-mesh.md\":\"DFKJkYxA\",\"devops_deployment_cicd-tools_github-actions_custom-actions.md\":\"kW6JLHon\",\"devops_deployment_cicd-tools_github-actions_workflows.md\":\"DAKHjCe-\",\"devops_deployment_cicd-tools_gitlab-ci_configuration.md\":\"ChN06qqL\",\"devops_deployment_cicd-tools_gitlab-ci_runners.md\":\"DapKaxzQ\",\"devops_deployment_cicd-tools_gitlab-ci_stages.md\":\"DAjYPeOO\",\"devops_deployment_cicd-tools_jenkins_distributed-builds.md\":\"iRpe7v96\",\"devops_deployment_cicd-tools_jenkins_pipelines.md\":\"CK13WHww\",\"devops_deployment_cicd-tools_jenkins_security.md\":\"C9lWknp9\",\"devops_deployment_cicd-tools_jenkins_shared-libraries.md\":\"D7MRkKGL\",\"devops_deployment_strategies_gitops_argo-cd.md\":\"BoF7KGZb\",\"devops_deployment_strategies_gitops_flux.md\":\"BsYVB-6P\",\"devops_deployment_strategies_gitops_multi-cluster.md\":\"DI3A5nxw\",\"devops_deployment_strategies_gitops_sync-strategies.md\":\"Dw5uFtfg\",\"devops_deployment_strategies_strategies_blue-green.md\":\"DI026GHK\",\"devops_deployment_strategies_strategies_canary.md\":\"Df5HsQnV\",\"devops_deployment_strategies_strategies_feature-flags.md\":\"DtIKawdk\",\"devops_deployment_strategies_strategies_progressive.md\":\"DFqkW-Z5\",\"devops_deployment_strategies_strategies_rolling.md\":\"TwjuSYUA\",\"devops_index.md\":\"MO796zdU\",\"devops_infrastructure_configuration_ansible_dynamic-inventory.md\":\"BHl9FC8n\",\"devops_infrastructure_configuration_ansible_playbooks.md\":\"DZF1U_I5\",\"devops_infrastructure_configuration_ansible_roles.md\":\"BpcMq9ew\",\"devops_infrastructure_configuration_chef_cookbooks.md\":\"D4gNlxBl\",\"devops_infrastructure_configuration_chef_policies.md\":\"nb4uLT8M\",\"devops_infrastructure_configuration_chef_test-kitchen.md\":\"C5cEds-1\",\"devops_infrastructure_configuration_saltstack_reactor.md\":\"CP6PtyOo\",\"devops_infrastructure_configuration_saltstack_salt-cloud.md\":\"KkZ42C2h\",\"devops_infrastructure_configuration_saltstack_states.md\":\"N_iIQaWO\",\"devops_infrastructure_iac_crossplane_compositions.md\":\"C7G-vlqP\",\"devops_infrastructure_iac_crossplane_crds.md\":\"BJRE9cXv\",\"devops_infrastructure_iac_crossplane_multi-cloud.md\":\"DT7wY1RI\",\"devops_infrastructure_iac_pulumi_components.md\":\"DWVK-Tpk\",\"devops_infrastructure_iac_pulumi_k8s.md\":\"C9lSfkJP\",\"devops_infrastructure_iac_pulumi_multi-language.md\":\"BWjjmeun\",\"devops_infrastructure_iac_terraform_concepts.md\":\"D5mV7h63\",\"devops_infrastructure_iac_terraform_modules.md\":\"CO_y-cOv\",\"devops_infrastructure_iac_terraform_multi-cloud.md\":\"DHZ0Nu4O\",\"devops_infrastructure_iac_terraform_state.md\":\"BdozPNio\",\"devops_linux_commands.md\":\"D3d2JgBe\",\"devops_linux_vim.md\":\"DUFW7QHA\",\"devops_linux_wsl.md\":\"CIYdl1Tz\",\"devops_monitoring_logging_efk_fluent-bit.md\":\"0h6eKL-V\",\"devops_monitoring_logging_efk_fluentd.md\":\"CplsWJcg\",\"devops_monitoring_logging_elk_elasticsearch.md\":\"DyNhg2_n\",\"devops_monitoring_logging_elk_kibana.md\":\"_BdQZyt0\",\"devops_monitoring_logging_elk_logstash.md\":\"eIURS-ZC\",\"devops_monitoring_logging_loki_architecture.md\":\"BVjSvJ5a\",\"devops_monitoring_logging_loki_labels.md\":\"Dk5Mb9Pz\",\"devops_monitoring_logging_loki_promtail.md\":\"CkCEDZEa\",\"devops_monitoring_metrics_cloud_azure-monitor.md\":\"Cz1Erg7Z\",\"devops_monitoring_metrics_cloud_cloudwatch.md\":\"BENdOrrE\",\"devops_monitoring_metrics_cloud_stackdriver.md\":\"qDX2Xe_s\",\"devops_monitoring_metrics_grafana_alerts.md\":\"D9NnQwcX\",\"devops_monitoring_metrics_grafana_dashboards.md\":\"DwHGB9Pp\",\"devops_monitoring_metrics_grafana_plugins.md\":\"BquhUank\",\"devops_monitoring_metrics_prometheus_alertmanager.md\":\"B9v6Lkd5\",\"devops_monitoring_metrics_prometheus_data-model.md\":\"BdlzCd76\",\"devops_monitoring_metrics_prometheus_exporters.md\":\"BU7VRahP\",\"devops_monitoring_metrics_prometheus_long-term-storage.md\":\"D5SFpgEq\",\"devops_monitoring_tracing_jaeger.md\":\"C0yISe10\",\"devops_monitoring_tracing_opentelemetry.md\":\"fQjVVAF9\",\"devops_monitoring_tracing_zipkin.md\":\"hIChiLh8\",\"devops_performance_application_caching.md\":\"D2BQAbN8\",\"devops_performance_application_connection-pooling.md\":\"l6c0l_Rr\",\"devops_performance_application_gc.md\":\"Cpq__Qzn\",\"devops_performance_application_profiling.md\":\"SzBOxkg-\",\"devops_performance_database_connections.md\":\"C2FVFLv9\",\"devops_performance_database_indexing.md\":\"CpQWu6Nd\",\"devops_performance_database_query-optimization.md\":\"CR7wcHA_\",\"devops_performance_database_sharding.md\":\"BvuHki9p\",\"devops_performance_system_filesystems.md\":\"BH-ro4ba\",\"devops_performance_system_kernel-params.md\":\"DF0EWkaf\",\"devops_performance_system_memory.md\":\"DER4pgsD\",\"devops_performance_system_networking.md\":\"kvqqOO2V\",\"devops_security_application_compliance.md\":\"DHIbFwhO\",\"devops_security_application_secrets.md\":\"BNeOdLpg\",\"devops_security_application_tls.md\":\"DriXlDwn\",\"devops_security_application_vulnerability-scanning.md\":\"C28FgV1r\",\"devops_security_authentication_oauth.md\":\"DJO4vCR0\",\"devops_security_authentication_oidc.md\":\"NJae150d\",\"devops_security_authentication_rbac.md\":\"B9rqABrg\",\"devops_security_authentication_sso.md\":\"DN9LEriy\",\"devops_security_network_ddos.md\":\"DrlilfYq\",\"devops_security_network_firewalls.md\":\"CWOvfjR1\",\"devops_security_network_load-balancing.md\":\"J-963wMc\",\"devops_security_network_vpn.md\":\"ICEFa-tD\",\"devops_security_network_waf.md\":\"BmxLrKVa\",\"devops_sso_no-hash.md\":\"xHXhmTSC\",\"devops_tools_cli_cli_container.md\":\"DKF32u7-\",\"devops_tools_cli_cli_kubectl.md\":\"DC5uDPQt\",\"devops_tools_cli_cli_linux.md\":\"DUVX2vBb\",\"devops_tools_cli_cli_networking.md\":\"BYCZULWz\",\"devops_tools_infrastructure_consul.md\":\"B_bTHsZi\",\"devops_tools_infrastructure_packer.md\":\"DpWj3b3w\",\"devops_tools_infrastructure_vagrant.md\":\"-99McmtB\",\"devops_tools_infrastructure_vault.md\":\"Dy6U9ghA\",\"devops_tools_vcs_git_branching.md\":\"CgZVEU6l\",\"devops_tools_vcs_git_hooks.md\":\"BacAw00o\",\"devops_tools_vcs_git_rebase-merge.md\":\"CqQmkYZS\",\"devops_tools_vcs_git_submodules.md\":\"DBqq3Sna\",\"devops_tools_vcs_platforms_bitbucket.md\":\"CM4vfuEI\",\"devops_tools_vcs_platforms_github.md\":\"CU8Q63nS\",\"devops_tools_vcs_platforms_gitlab.md\":\"D0yiTKmE\",\"devops_web-servers_apache_htaccess.md\":\"BrXOWs6p\",\"devops_web-servers_apache_modules.md\":\"4bDr2B5t\",\"devops_web-servers_apache_mpm.md\":\"B0V9FwoA\",\"devops_web-servers_apache_performance.md\":\"BZ2kYVnE\",\"devops_web-servers_apache_vhosts.md\":\"BW-fDj8o\",\"devops_web-servers_caddy_auto-https.md\":\"6lr09tzE\",\"devops_web-servers_caddy_caddyfile.md\":\"BHswWLxk\",\"devops_web-servers_caddy_plugins.md\":\"Cmn_ANUb\",\"devops_web-servers_nginx_caching.md\":\"CYfUj_Xx\",\"devops_web-servers_nginx_configuration.md\":\"DhTvL8BV\",\"devops_web-servers_nginx_load-balancing.md\":\"Cojw3nlm\",\"devops_web-servers_nginx_lua.md\":\"Czm-xMK7\",\"devops_web-servers_nginx_performance.md\":\"DtpopZVP\",\"devops_web-servers_nginx_reverse-proxy.md\":\"CZ42_A-O\",\"devops_web-servers_nginx_security.md\":\"CfntLBiF\",\"frontend_app_expo_async-storage.md\":\"CRyEMG74\",\"frontend_app_expo_constants.md\":\"CM2LgJVG\",\"frontend_app_expo_expo-secure-store.md\":\"BrLeHb4l\",\"frontend_app_other_1px-error.md\":\"DdPpgSP6\",\"frontend_app_other_click-delay.md\":\"CTX-75mc\",\"frontend_app_other_signature.md\":\"B5q918tQ\",\"frontend_browser_advanced_custom-elements.md\":\"BE1OYm5M\",\"frontend_browser_advanced_intersection-observer.md\":\"eSKjAjTA\",\"frontend_browser_advanced_shadow-dom.md\":\"x1FM-9Us\",\"frontend_browser_advanced_web-components.md\":\"CoMfGEPC\",\"frontend_browser_api_geolocation.md\":\"B4GjN5u0\",\"frontend_browser_api_service-workers.md\":\"w6_MCiMg\",\"frontend_browser_api_storage.md\":\"CqrqH7YK\",\"frontend_browser_api_web-workers.md\":\"eX2huUcp\",\"frontend_browser_cors.md\":\"bO2OM86f\",\"frontend_browser_cross-tab-communication.md\":\"BVBmesdV\",\"frontend_browser_device_hardware-integration.md\":\"DVqZh9kP\",\"frontend_browser_device_media-devices.md\":\"CA1ETv29\",\"frontend_browser_device_payment-request.md\":\"DCb89cPq\",\"frontend_browser_device_sensors.md\":\"El-ZG7mL\",\"frontend_core_css_architecture.md\":\"C2Zih-VS\",\"frontend_core_css_layout.md\":\"uayV4eZh\",\"frontend_core_css_modern-css.md\":\"CTCXylkm\",\"frontend_core_css_responsive.md\":\"CBMgIgiy\",\"frontend_core_html_a11y.md\":\"CruyG4gg\",\"frontend_core_html_forms.md\":\"CAiga6PP\",\"frontend_core_html_semantic.md\":\"DmgDKNip\",\"frontend_core_html_seo.md\":\"CBrpvHNi\",\"frontend_core_internet_dns.md\":\"DwMbHlV_\",\"frontend_core_internet_http_ajax.md\":\"CqwdooR1\",\"frontend_core_internet_http_axios.md\":\"ChZZVQrX\",\"frontend_core_internet_http_connect.md\":\"CdMx91Ts\",\"frontend_core_internet_http_fetch.md\":\"oEk-1AyV\",\"frontend_core_internet_https.md\":\"BmKNIwfQ\",\"frontend_core_internet_rendering.md\":\"C4fnhqBa\",\"frontend_core_javascript_advance_circular-dependency.md\":\"C6zaa5ne\",\"frontend_core_javascript_advance_closure.md\":\"CYR9OERm\",\"frontend_core_javascript_advance_mutationobserver-protect-watermarks.md\":\"C9prZS_p\",\"frontend_core_javascript_advance_promise.md\":\"DRwNUVEj\",\"frontend_core_javascript_base_ajax-fetch.md\":\"DOpMmbxF\",\"frontend_core_javascript_base_api.md\":\"CFhCovc2\",\"frontend_core_javascript_base_array.md\":\"DgTS-7tI\",\"frontend_core_javascript_base_bom.md\":\"CS1ot0Xh\",\"frontend_core_javascript_base_client-storage.md\":\"DrimUVUI\",\"frontend_core_javascript_base_control-flow-statements.md\":\"DA4Kbhu6\",\"frontend_core_javascript_base_function.md\":\"GEGaMaEb\",\"frontend_core_javascript_base_iterable-generate.md\":\"DkmyeYIw\",\"frontend_core_javascript_base_json.md\":\"DBCOzsPg\",\"frontend_core_javascript_base_map-set.md\":\"C5Va9xpe\",\"frontend_core_javascript_base_math.md\":\"je2sF-MC\",\"frontend_core_javascript_base_module.md\":\"SPnZhcSj\",\"frontend_core_javascript_base_object.md\":\"DpV393ZY\",\"frontend_core_javascript_base_operator.md\":\"DVZxlpFo\",\"frontend_core_javascript_base_promise.md\":\"BVmqjTnx\",\"frontend_core_javascript_base_string.md\":\"BlThMjPw\",\"frontend_core_javascript_base_variable-scope-memory.md\":\"C7lUOAg9\",\"frontend_core_javascript_es6_import.md\":\"C4rWyqHZ\",\"frontend_core_javascript_library_big.md\":\"BN-G1_my\",\"frontend_core_javascript_library_driver.md\":\"DiXzfkOn\",\"frontend_core_javascript_library_echarts.md\":\"z9NAIqM2\",\"frontend_core_javascript_library_face-api.md\":\"CZP80Tis\",\"frontend_core_javascript_library_jspdf.md\":\"D_YnDtMp\",\"frontend_core_javascript_library_uglify.md\":\"CEJaqMK1\",\"frontend_core_javascript_other_js-files.md\":\"Da3-Kznd\",\"frontend_engineering_build_rollup.md\":\"B0zN4ViI\",\"frontend_engineering_build_swc.md\":\"IfDfaaiG\",\"frontend_engineering_build_vite.md\":\"CN8XbFSD\",\"frontend_engineering_build_webpack.md\":\"MzoE0tjE\",\"frontend_engineering_deploy_base.md\":\"CNqbSgQg\",\"frontend_engineering_deploy_big-file.md\":\"CIdCWBiB\",\"frontend_engineering_deploy_code-splitting.md\":\"BktCkut0\",\"frontend_engineering_deploy_gzip.md\":\"By3ctBcm\",\"frontend_engineering_deploy_offline-deploy.md\":\"DlmyzNlN\",\"frontend_engineering_deploy_perf-metrics.md\":\"DJP5VGU1\",\"frontend_engineering_deploy_pwa.md\":\"Csmo6MQo\",\"frontend_engineering_deploy_terser.md\":\"e6FhRd3A\",\"frontend_engineering_deploy_tree-shaking.md\":\"BB1uz2ze\",\"frontend_engineering_package_deps-optimization.md\":\"CZzqUE1N\",\"frontend_engineering_package_monorepo.md\":\"BpORKiLW\",\"frontend_engineering_package_node-sass.md\":\"CTFaNWaf\",\"frontend_engineering_package_nvm.md\":\"CBYb0usb\",\"frontend_engineering_package_package-managers.md\":\"CKsEhZCX\",\"frontend_engineering_package_pnpm.md\":\"C-EBRjsK\",\"frontend_engineering_package_yarn.md\":\"BlQm8PMU\",\"frontend_engineering_quality_airbnb.md\":\"rdgZ7SQI\",\"frontend_engineering_quality_code.md\":\"STVmtwNl\",\"frontend_engineering_quality_e2e.md\":\"BlcpyHWi\",\"frontend_engineering_quality_eslint.md\":\"mstVKEiT\",\"frontend_engineering_quality_prettier.md\":\"DYhVbz-_\",\"frontend_engineering_quality_unit-testing.md\":\"BSGXAy6M\",\"frontend_framework_advanced_routing.md\":\"QESMrvMW\",\"frontend_framework_advanced_ssr-ssg.md\":\"CE38l8w0\",\"frontend_framework_advanced_state-management.md\":\"BvVUgEdD\",\"frontend_framework_cross-platform_electron.md\":\"BJ-q_iLY\",\"frontend_framework_cross-platform_react-native.md\":\"Duhfz5iz\",\"frontend_framework_cross-platform_tauri.md\":\"DdaLZ-VL\",\"frontend_framework_react_redux-store-in-non-component-files.md\":\"Dsfd6RWj\",\"frontend_framework_react_redux-toolkit.md\":\"DLOWl122\",\"frontend_framework_react_snippets.md\":\"Bx8gzBp5\",\"frontend_framework_react_style-isolation.md\":\"B326GvEc\",\"frontend_framework_vue2_methodstopatch.md\":\"E3v8NOYz\",\"frontend_framework_vue2_nexttick.md\":\"Byv_yCl1\",\"frontend_framework_vue2_vfor-vif.md\":\"T4xKWsO7\",\"frontend_index.md\":\"CFIsEk7Z\",\"frontend_map_cesium_cesium-draw.md\":\"COacPJRA\",\"frontend_map_cesium_cesium-flyline.md\":\"oqdDSBhT\",\"frontend_media_api_audio.md\":\"BMDKIO-X\",\"frontend_media_api_canvas.md\":\"CdPx5j1f\",\"frontend_media_api_video.md\":\"BMPOx29i\",\"frontend_media_live_protocol.md\":\"DwexC1PO\",\"frontend_media_streaming_players.md\":\"DC2UCIkY\",\"frontend_media_streaming_streaming-protocols.md\":\"BChArJw8\",\"frontend_media_streaming_webrtc.md\":\"D5KvglD9\",\"frontend_media_video_video-cache.md\":\"D_h-r7jS\",\"frontend_network_protocols_graphql.md\":\"DFZQP_bD\",\"frontend_network_protocols_rest.md\":\"BF9ueIoL\",\"frontend_network_protocols_sse.md\":\"viFCC0AZ\",\"frontend_network_protocols_websocket.md\":\"B3mf8yY2\",\"frontend_network_security_auth.md\":\"Bu-sNlok\",\"frontend_network_security_cors.md\":\"B-BBsCLH\",\"frontend_network_security_csp.md\":\"fscVAvU2\",\"frontend_network_security_owasp.md\":\"D0-6S9Qd\",\"frontend_performance_core_lighthouse.md\":\"DxdWtyBR\",\"frontend_performance_core_rail.md\":\"r6eOEVZ_\",\"frontend_performance_core_vitals.md\":\"DJfUrLmE\",\"frontend_performance_strategies_memory.md\":\"DENgt7Nl\",\"frontend_performance_strategies_preloading.md\":\"Cy0-XpLj\",\"frontend_performance_strategies_prpl.md\":\"BsSJt8uc\",\"frontend_performance_strategies_rendering.md\":\"C2roceYu\",\"frontend_performance_tools_devtools.md\":\"BNcff4EF\",\"frontend_performance_tools_network-analysis.md\":\"D5xU4lET\",\"frontend_performance_tools_profiling.md\":\"gFE7mPzU\",\"frontend_typescript_advanced-types.md\":\"DfYKPxDo\",\"frontend_typescript_integration.md\":\"DBS0_GWi\",\"frontend_typescript_type-system.md\":\"CBuTH15s\",\"frontend_web_api_clipboard.md\":\"CcPmPhoC\",\"frontend_web_device_scanner.md\":\"CVjXZZ0_\",\"frontend_web_download_a-download.md\":\"nv_epCOW\",\"frontend_web_init.md\":\"BrvyLnkK\",\"frontend_web_upload_base.md\":\"I0TZsJRr\",\"frontend_web_upload_contenttype-mime.md\":\"CxaF1BCx\",\"frontend_web_upload_input-file.md\":\"BeHAXKz5\",\"frontend_web_upload_vue3-sample.md\":\"DHsFjvUq\",\"frontend_web_upload_webworker.md\":\"DGiTfqNK\",\"frontend_web_web-worker_base.md\":\"BwO7BzKt\",\"index.md\":\"DZUgao8h\",\"iot_index.md\":\"CyWfNFgj\",\"markdown-examples.md\":\"Cq18ix0v\",\"thoughts_index.md\":\"CaugLDG2\",\"thoughts_shortmovie_recommend.md\":\"DdzsoWk8\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-Hans\",\"dir\":\"ltr\",\"title\":\"wanglei1900 Blog\",\"description\":\"Blog\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/favicon.ico\",\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"前端工程化\",\"link\":\"/frontend/\",\"activeMatch\":\"/frontend/\"},{\"text\":\"服务端与架构\",\"link\":\"/backend/\",\"activeMatch\":\"/backend/\"},{\"text\":\"数据层开发\",\"link\":\"/data/\",\"activeMatch\":\"/data/\"},{\"text\":\"部署与运维\",\"link\":\"/devops/\",\"activeMatch\":\"/devops/\"},{\"text\":\"算法与优化\",\"link\":\"/algorithms/\",\"activeMatch\":\"/algorithms/\"},{\"text\":\"物联网\",\"link\":\"/iot/\",\"activeMatch\":\"/iot/\"},{\"text\":\"杂谈\",\"link\":\"/thoughts/\",\"activeMatch\":\"/thoughts/\"}],\"search\":{\"provider\":\"local\",\"options\":{\"placeholder\":\"搜索文档\",\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"searchBox\":{\"resetButtonTitle\":\"清除查询条件\",\"resetButtonAriaLabel\":\"清除查询条件\",\"cancelButtonText\":\"取消\",\"cancelButtonAriaLabel\":\"取消\"},\"startScreen\":{\"recentSearchesTitle\":\"搜索历史\",\"noRecentSearchesText\":\"没有搜索历史\",\"saveRecentSearchButtonTitle\":\"保存至搜索历史\",\"removeRecentSearchButtonTitle\":\"从搜索历史中移除\",\"favoriteSearchesTitle\":\"收藏\",\"removeFavoriteSearchButtonTitle\":\"从收藏中移除\"},\"errorScreen\":{\"titleText\":\"无法获取结果\",\"helpText\":\"你可能需要检查你的网络连接\"},\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\",\"closeText\":\"关闭\",\"searchByText\":\"搜索提供者\"},\"noResultsScreen\":{\"noResultsText\":\"无法找到相关结果\",\"suggestedQueryText\":\"你可以尝试查询\",\"reportMissingResultsText\":\"你认为该查询应该有结果？\",\"reportMissingResultsLinkText\":\"点击反馈\"}}}}},\"sidebar\":{\"/frontend/\":{\"base\":\"/frontend/\",\"items\":[{\"text\":\"基础核心\",\"base\":\"/frontend/core/internet/\",\"collapsed\":true,\"items\":[{\"text\":\"Internet基础\",\"collapsed\":true,\"items\":[{\"text\":\"HTTP协议工作原理\",\"base\":\"/frontend/core/internet/http/\",\"collapsed\":true,\"items\":[{\"text\":\"【ajax请求】Xhr → ajax→ axios\",\"link\":\"ajax\"},{\"text\":\"【axios+ts】class封装axios\",\"link\":\"axios\"},{\"text\":\"【fetch】 fetch\",\"link\":\"fetch\"},{\"text\":\"【HTTP】HTTP三次握手与四次挥手\",\"link\":\"connect\"}]},{\"text\":\"DNS解析机制\",\"link\":\"dns\"},{\"text\":\"浏览器渲染原理\",\"link\":\"rendering\"},{\"text\":\"HTTPS与安全传输\",\"link\":\"https\"}]},{\"text\":\"HTML\",\"base\":\"/frontend/core/html/\",\"collapsed\":true,\"items\":[{\"text\":\"语义化标签\",\"link\":\"semantic\"},{\"text\":\"表单与验证\",\"link\":\"forms\"},{\"text\":\"SEO最佳实践\",\"link\":\"seo\"},{\"text\":\"无障碍访问\",\"link\":\"a11y\"}]},{\"text\":\"CSS\",\"base\":\"/frontend/core/css/\",\"collapsed\":true,\"items\":[{\"text\":\"布局系统\",\"link\":\"layout\"},{\"text\":\"响应式设计\",\"link\":\"responsive\"},{\"text\":\"CSS架构方法论\",\"link\":\"architecture\"},{\"text\":\"现代CSS方案\",\"link\":\"modern-css\"}]},{\"text\":\"JavaScript\",\"collapsed\":true,\"items\":[{\"text\":\"基础\",\"base\":\"/frontend/core/javascript/base/\",\"collapsed\":true,\"items\":[{\"text\":\"流程语句\",\"link\":\"control-flow-statements\"},{\"text\":\"操作符\",\"link\":\"operator\"},{\"text\":\"变量、作用域与内存\",\"link\":\"variable-scope-memory\"},{\"text\":\"数组Array\",\"link\":\"array\"},{\"text\":\"迭代器与生成器\",\"link\":\"iterable-generate\"},{\"text\":\"函数Function\",\"link\":\"function\"},{\"text\":\"字符串String\",\"link\":\"string\"},{\"text\":\"对象Object\",\"link\":\"object\"},{\"text\":\"Math\",\"link\":\"math\"},{\"text\":\"集合和映射\",\"link\":\"map-set\"},{\"text\":\"JSON\",\"link\":\"json\"},{\"text\":\"BOM\",\"link\":\"bom\"},{\"text\":\"期约与异步函数\",\"link\":\"promise\"},{\"text\":\"客户端存储\",\"link\":\"client-storage\"},{\"text\":\"模块\",\"link\":\"module\"},{\"text\":\"JavaScript Api\",\"link\":\"api\"},{\"text\":\"网络请求与远程资源\",\"link\":\"ajax-fetch\"}]},{\"text\":\"高级\",\"base\":\"/frontend/core/javascript/advance/\",\"collapsed\":true,\"items\":[{\"text\":\"闭包\",\"link\":\"closure\"},{\"text\":\"循环依赖\",\"link\":\"circular-dependency\"},{\"text\":\"手写Promise\",\"link\":\"promise\"},{\"text\":\"mutationObserver 防止用户篡改水印\",\"link\":\"mutationObserver-protect-watermarks\"}]},{\"text\":\"第三方库\",\"base\":\"/frontend/core/javascript/library/\",\"collapsed\":true,\"items\":[{\"text\":\"【driver.js】 轻量库 实现引导页面\",\"link\":\"driver\"},{\"text\":\"【uglify-js】 js压缩\",\"link\":\"uglify\"},{\"text\":\"【精度库】js 数学计算精度库比 \",\"link\":\"big\"},{\"text\":\"【face-api.js】 人脸识别库\",\"link\":\"face-api\"},{\"text\":\"【echarts.js】echarts库\",\"link\":\"echarts\"},{\"text\":\"【jspdf.js】导出库\",\"link\":\"jspdf\"}]},{\"text\":\"其他\",\"base\":\"/frontend/core/javascript/other/\",\"collapsed\":true,\"items\":[{\"text\":\"JS文件的几种格式\",\"link\":\"js-files\"}]}]}]},{\"text\":\"工程化体系\",\"collapsed\":true,\"items\":[{\"text\":\"构建工具\",\"base\":\"/frontend/engineering/build/\",\"collapsed\":true,\"items\":[{\"text\":\"Vite原理与实践\",\"link\":\"vite\"},{\"text\":\"Webpack高级配置\",\"link\":\"webpack\"},{\"text\":\"Rollup打包优化\",\"link\":\"rollup\"},{\"text\":\"SWC编译器\",\"link\":\"swc\"}]},{\"text\":\"包管理\",\"base\":\"/frontend/engineering/package/\",\"collapsed\":true,\"items\":[{\"text\":\"【pnpm】新型的包管理工具pnpm\",\"link\":\"pnpm\"},{\"text\":\"【nvm】 使用问题汇总\",\"link\":\"nvm\"},{\"text\":\"【Monorepo】Monorepo实践\",\"link\":\"monorepo\"},{\"text\":\"依赖优化策略\",\"link\":\"deps-optimization\"},{\"text\":\"【node-sass】 安装失败解决办法\",\"link\":\"node-sass\"},{\"text\":\"【yarn】yarn安装中出现依赖冲突 package.json 中的resolutions 字段了\",\"link\":\"yarn\"}]},{\"text\":\"质量保障\",\"base\":\"/frontend/engineering/quality/\",\"collapsed\":true,\"items\":[{\"text\":\"代码规范\",\"link\":\"code\"},{\"text\":\"eslint规范 爱彼迎airbnb\",\"link\":\"airbnb\"},{\"text\":\"单元测试(Jest/Vitest)\",\"link\":\"unit-testing\"},{\"text\":\"E2E测试(Cypress/Playwright)\",\"link\":\"e2e\"}]},{\"text\":\"部署优化\",\"base\":\"/frontend/engineering/deploy/\",\"collapsed\":true,\"items\":[{\"text\":\"前端性能优化\",\"link\":\"base\"},{\"text\":\"Tree Shaking原理\",\"link\":\"tree-shaking\"},{\"text\":\"代码分割策略\",\"link\":\"code-splitting\"},{\"text\":\"gzip 压缩\",\"link\":\"gzip\"},{\"text\":\"Terser压缩js代码\",\"link\":\"terser\"},{\"text\":\"性能监控(Lighthouse)\",\"link\":\"perf-metrics\"},{\"text\":\"PWA实施方案\",\"link\":\"pwa\"},{\"text\":\"大文件性能优化方向\",\"link\":\"big-file\"},{\"text\":\"离线部署\",\"link\":\"offline-deploy\"}]}]},{\"text\":\"框架生态\",\"collapsed\":true,\"items\":[{\"text\":\"主流框架\",\"collapsed\":true,\"items\":[{\"text\":\"vue2\",\"base\":\"/frontend/framework/vue2/\",\"collapsed\":true,\"items\":[{\"text\":\"【vue2源码】改写数组的方法\",\"link\":\"methodsToPatch\"},{\"text\":\"【vue2源码】nexttick\",\"link\":\"nexttick\"},{\"text\":\"【vue2源码】v-for和v-if为什么不能一起用\",\"link\":\"vfor-vif\"}]},{\"text\":\"vue3\",\"base\":\"/frontend/framework/vue3/\",\"collapsed\":true,\"items\":[{\"text\":\"【vue2源码】vue2 改写数组的方法\",\"link\":\"methodsToPatch\"},{\"text\":\"vue源码\",\"link\":\"source-code\"}]},{\"text\":\"react\",\"base\":\"/frontend/framework/react/\",\"collapsed\":true,\"items\":[{\"text\":\"ES7+ React/Redux/React-Native 代码片段\",\"link\":\"snippets\"},{\"text\":\"redux-toolkit 完整学习笔记\",\"link\":\"redux-toolkit\"},{\"text\":\"react样式隔离\",\"link\":\"style-isolation\"},{\"text\":\"非react组件使用redux\",\"link\":\"redux-store-in-non-component-files\"}]}]},{\"text\":\"高级模式\",\"base\":\"/frontend/framework/advanced/\",\"collapsed\":true,\"items\":[{\"text\":\"SSR/SSG方案\",\"link\":\"ssr-ssg\"},{\"text\":\"状态管理策略\",\"link\":\"state-management\"},{\"text\":\"路由解决方案\",\"link\":\"routing\"}]},{\"text\":\"跨平台方案\",\"base\":\"/frontend/framework/cross-platform/\",\"collapsed\":true,\"items\":[{\"text\":\"React Native原理\",\"link\":\"react-native\"},{\"text\":\"Electron桌面开发\",\"link\":\"electron\"},{\"text\":\"Tauri替代方案\",\"link\":\"tauri\"}]}]},{\"text\":\"网络与通信\",\"collapsed\":true,\"items\":[{\"text\":\"网络协议\",\"base\":\"/frontend/network/protocols/\",\"collapsed\":true,\"items\":[{\"text\":\"RESTful设计规范\",\"link\":\"rest\"},{\"text\":\"GraphQL实践\",\"link\":\"graphql\"},{\"text\":\"WebSocket实时通信\",\"link\":\"websocket\"},{\"text\":\"Server-Sent Events\",\"link\":\"sse\"}]},{\"text\":\"安全机制\",\"base\":\"/frontend/network/security/\",\"collapsed\":true,\"items\":[{\"text\":\"认证策略\",\"link\":\"auth\"},{\"text\":\"CORS机制详解\",\"link\":\"cors\"},{\"text\":\"内容安全策略\",\"link\":\"csp\"},{\"text\":\"OWASP防护实践\",\"link\":\"owasp\"}]},{\"text\":\"数据交互\",\"base\":\"/frontend/network/data/\",\"collapsed\":true,\"items\":[{\"text\":\"Fetch API最佳实践\",\"link\":\"fetch\"},{\"text\":\"Axios高级封装\",\"link\":\"axios\"},{\"text\":\"文件上传方案\",\"link\":\"file-upload\"},{\"text\":\"数据压缩策略\",\"link\":\"data-compression\"}]}]},{\"text\":\"浏览器技术\",\"collapsed\":true,\"items\":[{\"text\":\"浏览器API\",\"base\":\"/frontend/browser/api/\",\"collapsed\":true,\"items\":[{\"text\":\"Service Workers\",\"link\":\"service-workers\"},{\"text\":\"Web Storage\",\"link\":\"storage\"},{\"text\":\"Geolocation API\",\"link\":\"geolocation\"},{\"text\":\"Web Workers多线程\",\"link\":\"web-workers\"}]},{\"text\":\"高级特性\",\"base\":\"/frontend/browser/advanced/\",\"collapsed\":true,\"items\":[{\"text\":\"Web Components\",\"link\":\"web-components\"},{\"text\":\"Shadow DOM封装\",\"link\":\"shadow-dom\"},{\"text\":\"Custom Elements\",\"link\":\"custom-elements\"},{\"text\":\"Intersection Observer\",\"link\":\"intersection-observer\"}]},{\"text\":\"设备交互\",\"base\":\"/frontend/browser/device/\",\"collapsed\":true,\"items\":[{\"text\":\"媒体设备访问\",\"link\":\"media-devices\"},{\"text\":\"传感器API\",\"link\":\"sensors\"},{\"text\":\"支付请求API\",\"link\":\"payment-request\"},{\"text\":\"硬件对接方案\",\"link\":\"hardware-integration\"}]}]},{\"text\":\"性能优化\",\"collapsed\":true,\"items\":[{\"text\":\"核心指标\",\"base\":\"/frontend/performance/core/\",\"collapsed\":true,\"items\":[{\"text\":\"RAIL模型\",\"link\":\"rail\"},{\"text\":\"Web Vitals监控\",\"link\":\"vitals\"},{\"text\":\"Lighthouse深度优化\",\"link\":\"lighthouse\"}]},{\"text\":\"优化策略\",\"base\":\"/frontend/performance/strategies/\",\"collapsed\":true,\"items\":[{\"text\":\"PRPL模式\",\"link\":\"prpl\"},{\"text\":\"资源预加载\",\"link\":\"preloading\"},{\"text\":\"渲染性能优化\",\"link\":\"rendering\"},{\"text\":\"内存管理\",\"link\":\"memory\"}]},{\"text\":\"调试工具\",\"base\":\"/frontend/performance/tools/\",\"collapsed\":true,\"items\":[{\"text\":\"Chrome DevTools高级\",\"link\":\"devtools\"},{\"text\":\"性能分析技巧\",\"link\":\"profiling\"},{\"text\":\"网络优化分析\",\"link\":\"network-analysis\"}]}]},{\"text\":\"类型系统\",\"collapsed\":true,\"items\":[{\"text\":\"TypeScript\",\"base\":\"/frontend/typescript/\",\"collapsed\":true,\"items\":[{\"text\":\"类型系统深入\",\"link\":\"type-system\"},{\"text\":\"工程集成方案\",\"link\":\"integration\"},{\"text\":\"高级类型技巧\",\"link\":\"advanced-types\"}]}]},{\"text\":\"媒体处理\",\"collapsed\":true,\"items\":[{\"text\":\"流媒体技术\",\"base\":\"/frontend/media/streaming/\",\"collapsed\":true,\"items\":[{\"text\":\"WebRTC实时通信\",\"link\":\"webrtc\"},{\"text\":\"HLS/DASH协议\",\"link\":\"streaming-protocols\"},{\"text\":\"媒体播放器优化\",\"link\":\"players\"}]},{\"text\":\"媒体API\",\"base\":\"/frontend/media/api/\",\"collapsed\":true,\"items\":[{\"text\":\"Video处理优化\",\"link\":\"video\"},{\"text\":\"Canvas高级应用\",\"link\":\"canvas\"},{\"text\":\"Web Audio API\",\"link\":\"audio\"}]}]},{\"text\":\"移动端\",\"collapsed\":true,\"items\":[{\"text\":\"expo框架\",\"base\":\"/frontend/app/expo/\",\"collapsed\":true,\"items\":[{\"text\":\"【expo】 常量\",\"link\":\"constants\"},{\"text\":\"【expo】 expo-secure-store 安全存储库\",\"link\":\"expo-secure-store\"},{\"text\":\"【expo】Async Storage 存储库\",\"link\":\"async-storage\"}]},{\"text\":\"其他\",\"base\":\"/frontend/app/other/\",\"collapsed\":true,\"items\":[{\"text\":\"签名\",\"link\":\"signature\"},{\"text\":\"移动端Click300毫秒点击延迟\",\"link\":\"click-delay\"},{\"text\":\"1px误差的原因以及解决方案\",\"link\":\"1px-error\"}]}]},{\"text\":\"地图\",\"collapsed\":true,\"items\":[{\"text\":\"map\",\"base\":\"/frontend/map/cesium/\",\"collapsed\":true,\"items\":[{\"text\":\"【cesium】 Draw标绘类\",\"link\":\"cesium-draw\"},{\"text\":\"【cesium】 FlyLine飞行漫游路线\",\"link\":\"cesium-flyline\"}]}]}]},\"/backend/\":{\"base\":\"/backend/\",\"items\":[{\"text\":\"编程语言\",\"collapsed\":true,\"items\":[{\"text\":\"Go\",\"base\":\"/backend/languages/go/\",\"collapsed\":true,\"items\":[{\"text\":\"基础语法\",\"link\":\"syntax\"},{\"text\":\"并发编程\",\"link\":\"concurrency\"},{\"text\":\"网络编程\",\"link\":\"networking\"},{\"text\":\"标准库\",\"link\":\"std-lib\"},{\"text\":\"测试\",\"link\":\"testing\"},{\"text\":\"性能优化\",\"link\":\"performance\"},{\"text\":\"垃圾回收\",\"link\":\"gc\"}]},{\"text\":\"Java\",\"base\":\"/backend/languages/java/\",\"collapsed\":true,\"items\":[{\"text\":\"基础语法\",\"link\":\"syntax\"},{\"text\":\"JVM原理\",\"link\":\"jvm\"},{\"text\":\"集合框架\",\"link\":\"collections\"},{\"text\":\"并发编程\",\"link\":\"concurrency\"},{\"text\":\"新特性\",\"link\":\"features\"},{\"text\":\"Spring框架\",\"link\":\"spring\"},{\"text\":\"性能调优\",\"link\":\"performance\"},{\"text\":\"字节码增强\",\"link\":\"bytecode\"}]},{\"text\":\"Python\",\"base\":\"/backend/languages/python/\",\"collapsed\":true,\"items\":[{\"text\":\"高级特性\",\"link\":\"advanced\"},{\"text\":\"异步编程\",\"link\":\"async\"},{\"text\":\"Django框架\",\"link\":\"django\"},{\"text\":\"Flask框架\",\"link\":\"flask\"},{\"text\":\"科学计算\",\"link\":\"scientific\"},{\"text\":\"性能优化\",\"link\":\"performance\"},{\"text\":\"元编程\",\"link\":\"metaprogramming\"}]}]},{\"text\":\"操作系统知识\",\"collapsed\":true,\"items\":[{\"text\":\"内存管理\",\"base\":\"/backend/os/memory/\",\"collapsed\":true,\"items\":[{\"text\":\"虚拟内存\",\"link\":\"virtual\"},{\"text\":\"分页机制\",\"link\":\"paging\"},{\"text\":\"内存分配\",\"link\":\"allocation\"},{\"text\":\"垃圾回收\",\"link\":\"gc\"},{\"text\":\"内存泄漏\",\"link\":\"leaks\"},{\"text\":\"缓存策略\",\"link\":\"caching\"}]},{\"text\":\"进程间通信\",\"base\":\"/backend/os/ipc/\",\"collapsed\":true,\"items\":[{\"text\":\"管道通信\",\"link\":\"pipes\"},{\"text\":\"信号\",\"link\":\"signals\"},{\"text\":\"消息队列\",\"link\":\"mq\"},{\"text\":\"共享内存\",\"link\":\"shared-memory\"},{\"text\":\"套接字\",\"link\":\"sockets\"},{\"text\":\"RPC机制\",\"link\":\"rpc\"}]},{\"text\":\"I/O管理\",\"base\":\"/backend/os/io/\",\"collapsed\":true,\"items\":[{\"text\":\"阻塞/非阻塞\",\"link\":\"blocking\"},{\"text\":\"同步/异步\",\"link\":\"sync\"},{\"text\":\"IO多路复用\",\"link\":\"multiplexing\"},{\"text\":\"零拷贝\",\"link\":\"zero-copy\"},{\"text\":\"缓冲区管理\",\"link\":\"buffers\"},{\"text\":\"文件系统\",\"link\":\"filesystems\"}]}]},{\"text\":\"网络基础\",\"collapsed\":true,\"items\":[{\"text\":\"HTTP协议\",\"base\":\"/backend/internet/http/\",\"collapsed\":true,\"items\":[{\"text\":\"请求方法\",\"link\":\"methods\"},{\"text\":\"状态码\",\"link\":\"status-codes\"},{\"text\":\"头部字段\",\"link\":\"headers\"},{\"text\":\"缓存机制\",\"link\":\"caching\"},{\"text\":\"HTTPS实现\",\"link\":\"https\"},{\"text\":\"HTTP/2特性\",\"link\":\"http2\"},{\"text\":\"HTTP/3特性\",\"link\":\"http3\"}]},{\"text\":\"DNS原理\",\"base\":\"/backend/internet/dns/\",\"collapsed\":true,\"items\":[{\"text\":\"域名解析\",\"link\":\"resolution\"},{\"text\":\"记录类型\",\"link\":\"record-types\"},{\"text\":\"DNS安全\",\"link\":\"security\"},{\"text\":\"负载均衡\",\"link\":\"load-balancing\"},{\"text\":\"CDN集成\",\"link\":\"cdn\"},{\"text\":\"EDNS扩展\",\"link\":\"edns\"}]},{\"text\":\"gRPC\",\"base\":\"/backend/internet/grpc/\",\"collapsed\":true,\"items\":[{\"text\":\"Protocol Buffers\",\"link\":\"protobuf\"},{\"text\":\"服务定义\",\"link\":\"service-definition\"},{\"text\":\"流式处理\",\"link\":\"streaming\"},{\"text\":\"拦截器\",\"link\":\"interceptors\"},{\"text\":\"负载均衡\",\"link\":\"load-balancing\"},{\"text\":\"错误处理\",\"link\":\"error-handling\"},{\"text\":\"性能优化\",\"link\":\"performance\"}]}]},{\"text\":\"API开发\",\"collapsed\":true,\"items\":[{\"text\":\"REST\",\"base\":\"/backend/api/rest/\",\"collapsed\":true,\"items\":[{\"text\":\"资源设计\",\"link\":\"resource-design\"},{\"text\":\"HTTP方法\",\"link\":\"http-methods\"},{\"text\":\"状态码\",\"link\":\"status-codes\"},{\"text\":\"版本管理\",\"link\":\"versioning\"},{\"text\":\"超媒体控制\",\"link\":\"hypermedia\"},{\"text\":\"认证授权\",\"link\":\"auth\"}]},{\"text\":\"GraphQL\",\"base\":\"/backend/api/graphql/\",\"collapsed\":true,\"items\":[{\"text\":\"模式设计\",\"link\":\"schema\"},{\"text\":\"查询优化\",\"link\":\"query-optimization\"},{\"text\":\"解析器实现\",\"link\":\"resolvers\"},{\"text\":\"数据加载\",\"link\":\"dataloader\"},{\"text\":\"订阅机制\",\"link\":\"subscriptions\"},{\"text\":\"错误处理\",\"link\":\"error-handling\"},{\"text\":\"性能监控\",\"link\":\"monitoring\"},{\"text\":\"安全实践\",\"link\":\"security\"}]}]},{\"text\":\"认证与授权\",\"collapsed\":true,\"items\":[{\"text\":\"OAuth\",\"base\":\"/backend/auth/oauth/\",\"collapsed\":true,\"items\":[{\"text\":\"核心概念\",\"link\":\"concepts\"},{\"text\":\"授权流程\",\"link\":\"flows\"},{\"text\":\"OpenID Connect\",\"link\":\"oidc\"},{\"text\":\"JWT集成\",\"link\":\"jwt\"},{\"text\":\"PKCE扩展\",\"link\":\"pkce\"},{\"text\":\"安全实践\",\"link\":\"security\"},{\"text\":\"实现模式\",\"link\":\"patterns\"},{\"text\":\"常见漏洞\",\"link\":\"vulnerabilities\"}]},{\"text\":\"JWT\",\"base\":\"/backend/auth/jwt/\",\"collapsed\":true,\"items\":[{\"text\":\"令牌结构\",\"link\":\"structure\"},{\"text\":\"签名算法\",\"link\":\"algorithms\"},{\"text\":\"令牌生命周期\",\"link\":\"lifecycle\"},{\"text\":\"刷新令牌\",\"link\":\"refresh-tokens\"},{\"text\":\"安全存储\",\"link\":\"storage\"},{\"text\":\"无状态会话\",\"link\":\"stateless\"}]}]},{\"text\":\"网络安全\",\"collapsed\":true,\"items\":[{\"text\":\"HTTPS/SSL\",\"base\":\"/backend/security/https/\",\"collapsed\":true,\"items\":[{\"text\":\"证书管理\",\"link\":\"certificates\"},{\"text\":\"TLS配置\",\"link\":\"tls-config\"},{\"text\":\"HSTS策略\",\"link\":\"hsts\"},{\"text\":\"OCSP装订\",\"link\":\"ocsp\"},{\"text\":\"密钥交换\",\"link\":\"key-exchange\"}]},{\"text\":\"OWASP风险\",\"base\":\"/backend/security/owasp/\",\"collapsed\":true,\"items\":[{\"text\":\"注入防护\",\"link\":\"injection\"},{\"text\":\"XSS防护\",\"link\":\"xss\"},{\"text\":\"CSRF防护\",\"link\":\"csrf\"},{\"text\":\"访问控制\",\"link\":\"access-control\"},{\"text\":\"安全配置\",\"link\":\"configuration\"}]}]},{\"text\":\"架构模式\",\"collapsed\":true,\"items\":[{\"text\":\"微服务\",\"base\":\"/backend/architecture/microservices/\",\"collapsed\":true,\"items\":[{\"text\":\"设计原则\",\"link\":\"principles\"},{\"text\":\"服务拆分\",\"link\":\"decomposition\"},{\"text\":\"通信机制\",\"link\":\"communication\"},{\"text\":\"API网关\",\"link\":\"api-gateway\"},{\"text\":\"服务发现\",\"link\":\"service-discovery\"},{\"text\":\"配置管理\",\"link\":\"configuration\"},{\"text\":\"分布式事务\",\"link\":\"transactions\"},{\"text\":\"容错设计\",\"link\":\"resilience\"}]},{\"text\":\"事件溯源\",\"base\":\"/backend/architecture/event-sourcing/\",\"collapsed\":true,\"items\":[{\"text\":\"核心概念\",\"link\":\"concepts\"},{\"text\":\"事件存储\",\"link\":\"storage\"},{\"text\":\"状态重建\",\"link\":\"replay\"},{\"text\":\"快照机制\",\"link\":\"snapshots\"},{\"text\":\"CQRS集成\",\"link\":\"cqrs\"}]},{\"text\":\"服务网格\",\"base\":\"/backend/architecture/service-mesh/\",\"collapsed\":true,\"items\":[{\"text\":\"Istio架构\",\"link\":\"istio\"},{\"text\":\"Envoy代理\",\"link\":\"envoy\"},{\"text\":\"流量管理\",\"link\":\"traffic\"},{\"text\":\"可观测性\",\"link\":\"observability\"},{\"text\":\"安全策略\",\"link\":\"security\"}]}]},{\"text\":\"消息系统\",\"collapsed\":true,\"items\":[{\"text\":\"Kafka\",\"base\":\"/backend/messaging/kafka/\",\"collapsed\":true,\"items\":[{\"text\":\"架构设计\",\"link\":\"architecture\"},{\"text\":\"分区策略\",\"link\":\"partitioning\"},{\"text\":\"副本机制\",\"link\":\"replication\"},{\"text\":\"生产者配置\",\"link\":\"producers\"},{\"text\":\"消费者组\",\"link\":\"consumer-groups\"},{\"text\":\"流处理\",\"link\":\"streams\"}]},{\"text\":\"RabbitMQ\",\"base\":\"/backend/messaging/rabbitmq/\",\"collapsed\":true,\"items\":[{\"text\":\"交换机类型\",\"link\":\"exchanges\"},{\"text\":\"队列管理\",\"link\":\"queues\"},{\"text\":\"消息确认\",\"link\":\"ack\"},{\"text\":\"集群部署\",\"link\":\"clustering\"},{\"text\":\"消息持久化\",\"link\":\"persistence\"}]}]},{\"text\":\"可观测性\",\"collapsed\":true,\"items\":[{\"text\":\"性能分析\",\"base\":\"/backend/observability/profiling/\",\"collapsed\":true,\"items\":[{\"text\":\"CPU分析\",\"link\":\"cpu\"},{\"text\":\"内存分析\",\"link\":\"memory\"},{\"text\":\"I/O分析\",\"link\":\"io\"},{\"text\":\"分布式追踪\",\"link\":\"tracing\"},{\"text\":\"火焰图\",\"link\":\"flamegraphs\"}]},{\"text\":\"日志管理\",\"base\":\"/backend/observability/logging/\",\"collapsed\":true,\"items\":[{\"text\":\"结构化日志\",\"link\":\"structured\"},{\"text\":\"日志收集\",\"link\":\"collection\"},{\"text\":\"日志分析\",\"link\":\"analysis\"},{\"text\":\"日志轮转\",\"link\":\"rotation\"},{\"text\":\"分布式追踪\",\"link\":\"tracing\"}]},{\"text\":\"链路追踪\",\"base\":\"/backend/observability/tracing/\",\"collapsed\":true,\"items\":[{\"text\":\"OpenTelemetry\",\"link\":\"opentelemetry\"},{\"text\":\"采样策略\",\"link\":\"sampling\"},{\"text\":\"上下文传播\",\"link\":\"context-propagation\"},{\"text\":\"性能分析\",\"link\":\"performance\"}]}]},{\"text\":\"测试策略\",\"collapsed\":true,\"items\":[{\"text\":\"单元测试\",\"base\":\"/backend/testing/unit/\",\"collapsed\":true,\"items\":[{\"text\":\"Mock技术\",\"link\":\"/backend/testing/unit/mocking\"},{\"text\":\"测试覆盖率\",\"link\":\"/backend/testing/unit/coverage\"},{\"text\":\"测试替身\",\"link\":\"/backend/testing/unit/test-doubles\"},{\"text\":\"参数化测试\",\"link\":\"/backend/testing/unit/parameterized\"},{\"text\":\"测试驱动开发\",\"link\":\"/backend/testing/unit/tdd\"}]},{\"text\":\"集成测试\",\"base\":\"/backend/testing/integration/\",\"collapsed\":true,\"items\":[{\"text\":\"测试环境\",\"link\":\"/backend/testing/integration/environments\"},{\"text\":\"测试数据\",\"link\":\"/backend/testing/integration/test-data\"},{\"text\":\"契约测试\",\"link\":\"/backend/testing/integration/contract\"},{\"text\":\"端到端测试\",\"link\":\"/backend/testing/integration/e2e\"}]}]},{\"text\":\"开发原则\",\"collapsed\":true,\"items\":[{\"text\":\"设计模式\",\"base\":\"/backend/principles/patterns/\",\"collapsed\":true,\"items\":[{\"text\":\"创建型模式\",\"link\":\"creational\"},{\"text\":\"结构型模式\",\"link\":\"structural\"},{\"text\":\"行为型模式\",\"link\":\"behavioral\"},{\"text\":\"并发模式\",\"link\":\"concurrency\"},{\"text\":\"反模式\",\"link\":\"anti-patterns\"}]},{\"text\":\"领域驱动设计\",\"base\":\"/backend/principles/ddd/\",\"collapsed\":true,\"items\":[{\"text\":\"限界上下文\",\"link\":\"/backend/principles/ddd/bounded-contexts\"},{\"text\":\"实体与值对象\",\"link\":\"/backend/principles/ddd/entities\"},{\"text\":\"聚合根\",\"link\":\"/backend/principles/ddd/aggregates\"},{\"text\":\"领域事件\",\"link\":\"/backend/principles/ddd/events\"},{\"text\":\"领域服务\",\"link\":\"/backend/principles/ddd/services\"}]}]},{\"text\":\"系统扩展\",\"collapsed\":true,\"items\":[{\"text\":\"扩展策略\",\"base\":\"/backend/scaling/strategies/\",\"collapsed\":true,\"items\":[{\"text\":\"水平扩展\",\"link\":\"horizontal\"},{\"text\":\"垂直扩展\",\"link\":\"vertical\"},{\"text\":\"自动扩缩\",\"link\":\"autoscaling\"},{\"text\":\"容量规划\",\"link\":\"capacity\"},{\"text\":\"负载测试\",\"link\":\"load-testing\"}]},{\"text\":\"限流策略\",\"base\":\"/backend/scaling/throttling/\",\"collapsed\":true,\"items\":[{\"text\":\"令牌桶算法\",\"link\":\"token-bucket\"},{\"text\":\"漏桶算法\",\"link\":\"leaky-bucket\"},{\"text\":\"自适应限流\",\"link\":\"adaptive\"},{\"text\":\"分布式限流\",\"link\":\"distributed\"}]}]}]},\"/data/\":{\"base\":\"/data/\",\"items\":[{\"text\":\"数据存储引擎\",\"collapsed\":true,\"items\":[{\"text\":\"关系型数据库\",\"base\":\"/data/database/relational/\",\"collapsed\":true,\"items\":[{\"text\":\"PostgreSQL\",\"base\":\"/data/database/relational/postgres/\",\"collapsed\":true,\"items\":[{\"text\":\"架构设计与存储引擎\",\"link\":\"architecture\"},{\"text\":\"高级索引与查询优化\",\"link\":\"indexing\"},{\"text\":\"事务隔离与MVCC实现\",\"link\":\"mvcc\"},{\"text\":\"分区表与表继承\",\"link\":\"partitioning\"},{\"text\":\"逻辑复制与物理复制\",\"link\":\"replication\"},{\"text\":\"FDW外部数据包装器\",\"link\":\"fdw\"},{\"text\":\"全文搜索与模糊查询\",\"link\":\"fulltext-search\"},{\"text\":\"JSONB与半结构化数据处理\",\"link\":\"jsonb\"},{\"text\":\"性能调优与监控\",\"link\":\"performance\"}]},{\"text\":\"MySQL\",\"base\":\"/data/database/relational/mysql/\",\"collapsed\":true,\"items\":[{\"text\":\"InnoDB存储引擎深度解析\",\"link\":\"innodb\"},{\"text\":\"索引优化与执行计划分析\",\"link\":\"index-optimization\"},{\"text\":\"事务与锁机制\",\"link\":\"transactions\"},{\"text\":\"主从复制与GTID\",\"link\":\"replication\"},{\"text\":\"高可用架构(MHA, Orchestrator)\",\"link\":\"high-availability\"},{\"text\":\"查询优化器原理\",\"link\":\"optimizer\"},{\"text\":\"分区表与分库分表\",\"link\":\"sharding\"},{\"text\":\"性能诊断与慢查询分析\",\"link\":\"performance\"}]},{\"text\":\"分布式关系数据库\",\"base\":\"/data/database/relational/distributed/\",\"collapsed\":true,\"items\":[{\"text\":\"CockroachDB架构\",\"link\":\"cockroachdb\"},{\"text\":\"TiDB设计与实现\",\"link\":\"tidb\"},{\"text\":\"YugabyteDB分布式SQL\",\"link\":\"yugabytedb\"},{\"text\":\"Google Spanner原理\",\"link\":\"spanner\"},{\"text\":\"分布式事务实现\",\"link\":\"distributed-tx\"}]}]},{\"text\":\"NoSQL数据库\",\"base\":\"/data/database/nosql/\",\"collapsed\":true,\"items\":[{\"text\":\"文档数据库\",\"base\":\"/data/database/nosql/document/\",\"collapsed\":true,\"items\":[{\"text\":\"MongoDB\",\"base\":\"/data/database/nosql/document/mongodb/\",\"collapsed\":true,\"items\":[{\"text\":\"分片集群架构\",\"link\":\"sharding\"},{\"text\":\"复制集与选举机制\",\"link\":\"replication\"},{\"text\":\"聚合框架与MapReduce\",\"link\":\"aggregation\"},{\"text\":\"事务与ACID支持\",\"link\":\"transactions\"},{\"text\":\"Change Streams实时数据流\",\"link\":\"change-streams\"},{\"text\":\"索引优化与查询计划\",\"link\":\"indexing\"},{\"text\":\"数据建模最佳实践\",\"link\":\"data-modeling\"},{\"text\":\"Atlas云服务管理\",\"link\":\"atlas\"}]},{\"text\":\"CouchDB\",\"base\":\"/data/database/nosql/document/couchdb/\",\"collapsed\":true,\"items\":[{\"text\":\"MVCC与冲突解决\",\"link\":\"mvcc\"},{\"text\":\"MapReduce视图\",\"link\":\"mapreduce\"},{\"text\":\"复制协议与同步机制\",\"link\":\"replication\"},{\"text\":\"Fauxton管理界面\",\"link\":\"fauxton\"},{\"text\":\"PouchDB离线同步\",\"link\":\"pouchdb\"}]}]},{\"text\":\"时序数据库\",\"base\":\"/data/database/nosql/timeseries/\",\"collapsed\":true,\"items\":[{\"text\":\"InfluxDB\",\"base\":\"/data/database/nosql/timeseries/influxdb/\",\"collapsed\":true,\"items\":[{\"text\":\"TSM存储引擎\",\"link\":\"tsm\"},{\"text\":\"连续查询与降采样\",\"link\":\"cq\"},{\"text\":\"Flux查询语言\",\"link\":\"flux\"},{\"text\":\"存储策略与保留机制\",\"link\":\"retention\"},{\"text\":\"Telegraf数据收集\",\"link\":\"telegraf\"}]},{\"text\":\"TimescaleDB\",\"base\":\"/data/database/nosql/timeseries/timescaledb/\",\"collapsed\":true,\"items\":[{\"text\":\"Hypertable分块管理\",\"link\":\"hypertables\"},{\"text\":\"连续聚合\",\"link\":\"continuous-aggs\"},{\"text\":\"压缩与归档策略\",\"link\":\"compression\"},{\"text\":\"分布式架构\",\"link\":\"distributed\"}]},{\"text\":\"Prometheus\",\"base\":\"/data/database/nosql/timeseries/prometheus/\",\"collapsed\":true,\"items\":[{\"text\":\"数据模型与指标类型\",\"link\":\"data-model\"},{\"text\":\"PromQL查询语言\",\"link\":\"promql\"},{\"text\":\"存储格式与压缩\",\"link\":\"database\"},{\"text\":\"远程读写协议\",\"link\":\"remote-write\"}]}]},{\"text\":\"键值存储\",\"base\":\"/data/database/nosql/keyvalue/\",\"collapsed\":true,\"items\":[{\"text\":\"Redis\",\"base\":\"/data/database/nosql/keyvalue/redis/\",\"collapsed\":true,\"items\":[{\"text\":\"数据结构与内部实现\",\"link\":\"data-structures\"},{\"text\":\"持久化机制(RDB/AOF)\",\"link\":\"persistence\"},{\"text\":\"集群与分片\",\"link\":\"cluster\"},{\"text\":\"Streams与消息队列\",\"link\":\"streams\"},{\"text\":\"Lua脚本与模块\",\"link\":\"lua\"},{\"text\":\"RediSearch全文搜索\",\"link\":\"redisearch\"}]},{\"text\":\"etcd\",\"base\":\"/data/database/nosql/keyvalue/etcd/\",\"collapsed\":true,\"items\":[{\"text\":\"Raft共识算法实现\",\"link\":\"raft\"},{\"text\":\"租约与TTL机制\",\"link\":\"leases\"},{\"text\":\"Watch机制与事件流\",\"link\":\"watch\"},{\"text\":\"事务与MVCC\",\"link\":\"transactions\"}]}]},{\"text\":\"图数据库\",\"base\":\"/data/database/nosql/graph/\",\"collapsed\":true,\"items\":[{\"text\":\"Neo4j\",\"base\":\"/data/database/nosql/graph/neo4j/\",\"collapsed\":true,\"items\":[{\"text\":\"属性图模型\",\"link\":\"property-graph\"},{\"text\":\"Cypher查询语言\",\"link\":\"cypher\"},{\"text\":\"遍历与路径查找\",\"link\":\"traversal\"},{\"text\":\"索引与约束\",\"link\":\"indexing\"},{\"text\":\"APOC扩展过程\",\"link\":\"apoc\"}]},{\"text\":\"Dgraph\",\"base\":\"/data/database/nosql/graph/dgraph/\",\"collapsed\":true,\"items\":[{\"text\":\"GraphQL+-查询语言\",\"link\":\"graphql\"},{\"text\":\"分布式架构\",\"link\":\"distributed\"},{\"text\":\"RDF数据模型\",\"link\":\"rdf\"},{\"text\":\"ACID事务支持\",\"link\":\"acid\"}]}]}]},{\"text\":\"大数据存储系统\",\"base\":\"/data/database/bigdata/\",\"collapsed\":true,\"items\":[{\"text\":\"Hadoop生态系统\",\"base\":\"/data/database/bigdata/hadoop/\",\"collapsed\":true,\"items\":[{\"text\":\"HDFS架构与原理\",\"link\":\"hdfs\"},{\"text\":\"HBase存储引擎\",\"link\":\"hbase\"},{\"text\":\"Parquet/ORC列式存储\",\"link\":\"columnar\"},{\"text\":\"ZooKeeper协调服务\",\"link\":\"zookeeper\"}]},{\"text\":\"数据湖架构\",\"base\":\"/data/database/bigdata/datalake/\",\"collapsed\":true,\"items\":[{\"text\":\"Delta Lake事务支持\",\"link\":\"delta\"},{\"text\":\"Apache Iceberg表格式\",\"link\":\"iceberg\"},{\"text\":\"Hudi数据管理\",\"link\":\"hudi\"},{\"text\":\"Lakehouse架构设计\",\"link\":\"lakehouse\"}]}]}]},{\"text\":\"数据访问层\",\"collapsed\":true,\"items\":[{\"text\":\"ORM与查询构建\",\"base\":\"/data/access/orm/\",\"collapsed\":true,\"items\":[{\"text\":\"Java生态\",\"base\":\"/data/access/orm/java/\",\"collapsed\":true,\"items\":[{\"text\":\"Hibernate高级特性\",\"link\":\"hibernate\"},{\"text\":\"JPA规范实现\",\"link\":\"jpa\"},{\"text\":\"MyBatis与动态SQL\",\"link\":\"mybatis\"},{\"text\":\"Spring Data抽象\",\"link\":\"spring-data\"},{\"text\":\"QueryDSL类型安全查询\",\"link\":\"querydsl\"}]},{\"text\":\"Python生态\",\"base\":\"/data/access/orm/python/\",\"collapsed\":true,\"items\":[{\"text\":\"SQLAlchemy核心\",\"link\":\"sqlalchemy\"},{\"text\":\"Django ORM优化\",\"link\":\"django-orm\"},{\"text\":\"Peewee轻量级ORM\",\"link\":\"peewee\"},{\"text\":\"Pony ORM高级查询\",\"link\":\"pony\"}]},{\"text\":\"Node.js生态\",\"base\":\"/data/access/orm/nodejs/\",\"collapsed\":true,\"items\":[{\"text\":\"TypeORM高级特性\",\"link\":\"typeorm\"},{\"text\":\"Sequelize事务管理\",\"link\":\"sequelize\"},{\"text\":\"Prisma下一代ORM\",\"link\":\"prisma\"},{\"text\":\"Knex查询构建器\",\"link\":\"knex\"}]},{\"text\":\"Go生态\",\"base\":\"/data/access/orm/go/\",\"collapsed\":true,\"items\":[{\"text\":\"GORM高级用法\",\"link\":\"gorm\"},{\"text\":\"Ent框架设计\",\"link\":\"ent\"},{\"text\":\"SQLX与原生查询\",\"link\":\"sqlx\"},{\"text\":\"Bun现代SQL客户端\",\"link\":\"bun\"}]}]},{\"text\":\"查询优化\",\"base\":\"/data/access/optimization/\",\"collapsed\":true,\"items\":[{\"text\":\"执行计划分析\",\"base\":\"/data/access/optimization/execution/\",\"collapsed\":true,\"items\":[{\"text\":\"EXPLAIN深入解读\",\"link\":\"explain\"},{\"text\":\"索引优化策略\",\"link\":\"indexing\"},{\"text\":\"统计信息与优化器\",\"link\":\"statistics\"},{\"text\":\"连接算法优化\",\"link\":\"joins\"}]},{\"text\":\"高级优化技术\",\"base\":\"/data/access/optimization/advanced/\",\"collapsed\":true,\"items\":[{\"text\":\"物化视图优化\",\"link\":\"materialized-views\"},{\"text\":\"查询重写技术\",\"link\":\"rewriting\"},{\"text\":\"参数化查询优化\",\"link\":\"parameterized\"},{\"text\":\"分页性能优化\",\"link\":\"pagination\"}]},{\"text\":\"常见问题解决方案\",\"base\":\"/data/access/optimization/solutions/\",\"collapsed\":true,\"items\":[{\"text\":\"N+1查询问题\",\"link\":\"nplusone\"},{\"text\":\"锁竞争与死锁\",\"link\":\"locking\"},{\"text\":\"热点数据问题\",\"link\":\"hotspots\"},{\"text\":\"慢查询诊断\",\"link\":\"slow-query\"}]}]},{\"text\":\"事务管理\",\"base\":\"/data/access/transactions/\",\"collapsed\":true,\"items\":[{\"text\":\"ACID实现原理\",\"base\":\"/data/access/transactions/acid/\",\"collapsed\":true,\"items\":[{\"text\":\"原子性实现机制\",\"link\":\"atomicity\"},{\"text\":\"隔离级别实现\",\"link\":\"isolation\"},{\"text\":\"持久性保证\",\"link\":\"durability\"},{\"text\":\"一致性约束\",\"link\":\"consistency\"}]},{\"text\":\"高级事务模式\",\"base\":\"/data/access/transactions/patterns/\",\"collapsed\":true,\"items\":[{\"text\":\"Saga分布式事务\",\"link\":\"saga\"},{\"text\":\"TCC补偿事务\",\"link\":\"tcc\"},{\"text\":\"本地消息表\",\"link\":\"local-message\"},{\"text\":\"事务型发件箱\",\"link\":\"outbox\"}]},{\"text\":\"并发控制\",\"base\":\"/data/access/transactions/concurrency/\",\"collapsed\":true,\"items\":[{\"text\":\"锁机制与死锁检测\",\"link\":\"locking\"},{\"text\":\"多版本并发控制(MVCC)\",\"link\":\"mvcc\"},{\"text\":\"乐观并发控制\",\"link\":\"optimistic\"},{\"text\":\"时间戳排序\",\"link\":\"timestamp\"}]}]},{\"text\":\"数据连接池\",\"base\":\"/data/access/connection-pooling/\",\"collapsed\":true,\"items\":[{\"text\":\"HikariCP原理与优化\",\"link\":\"hikaricp\"},{\"text\":\"Druid监控与防护\",\"link\":\"druid\"},{\"text\":\"PgBouncer连接池\",\"link\":\"pgbouncer\"},{\"text\":\"ProxySQL高级路由\",\"link\":\"proxysql\"}]}]},{\"text\":\"高性能访问\",\"collapsed\":true,\"items\":[{\"text\":\"缓存策略\",\"base\":\"/data/performance/caching/\",\"collapsed\":true,\"items\":[{\"text\":\"缓存模式\",\"base\":\"/data/performance/caching/patterns/\",\"collapsed\":true,\"items\":[{\"text\":\"Cache-Aside模式\",\"link\":\"cache-aside\"},{\"text\":\"Read-Through/Write-Through\",\"link\":\"read-write-through\"},{\"text\":\"Write-Behind模式\",\"link\":\"write-behind\"},{\"text\":\"Refresh-Ahead模式\",\"link\":\"refresh-ahead\"}]},{\"text\":\"缓存技术\",\"base\":\"/data/performance/caching/technologies/\",\"collapsed\":true,\"items\":[{\"text\":\"Redis高级特性\",\"link\":\"redis\"},{\"text\":\"Memcached最佳实践\",\"link\":\"memcached\"},{\"text\":\"Caffeine内存缓存\",\"link\":\"caffeine\"},{\"text\":\"Ehcache分布式缓存\",\"link\":\"ehcache\"}]},{\"text\":\"缓存问题与解决方案\",\"base\":\"/data/performance/caching/problems/\",\"collapsed\":true,\"items\":[{\"text\":\"缓存穿透解决方案\",\"link\":\"penetration\"},{\"text\":\"缓存雪崩预防\",\"link\":\"avalanche\"},{\"text\":\"缓存击穿处理\",\"link\":\"breakdown\"},{\"text\":\"缓存一致性策略\",\"link\":\"consistency\"}]}]},{\"text\":\"数据分片\",\"base\":\"/data/performance/sharding/\",\"collapsed\":true,\"items\":[{\"text\":\"分片策略\",\"base\":\"/data/performance/sharding/strategies/\",\"collapsed\":true,\"items\":[{\"text\":\"范围分片\",\"link\":\"range\"},{\"text\":\"哈希分片\",\"link\":\"hash\"},{\"text\":\"目录分片\",\"link\":\"directory\"},{\"text\":\"地理位置分片\",\"link\":\"geo\"}]},{\"text\":\"分片管理\",\"base\":\"/data/performance/sharding/management/\",\"collapsed\":true,\"items\":[{\"text\":\"分片路由\",\"link\":\"routing\"},{\"text\":\"分片重平衡\",\"link\":\"rebalancing\"},{\"text\":\"跨分片查询\",\"link\":\"cross-shard\"},{\"text\":\"分片监控\",\"link\":\"monitoring\"}]},{\"text\":\"分片工具与框架\",\"base\":\"/data/performance/sharding/tools/\",\"collapsed\":true,\"items\":[{\"text\":\"Vitess分片管理\",\"link\":\"vitess\"},{\"text\":\"ShardingSphere生态\",\"link\":\"shardingsphere\"},{\"text\":\"Citus分布式PostgreSQL\",\"link\":\"citus\"}]}]},{\"text\":\"读写分离\",\"base\":\"/data/performance/read-write-split/\",\"collapsed\":true,\"items\":[{\"text\":\"实现模式\",\"base\":\"/data/performance/read-write-split/patterns/\",\"collapsed\":true,\"items\":[{\"text\":\"客户端分离\",\"link\":\"client\"},{\"text\":\"代理层分离\",\"link\":\"proxy\"},{\"text\":\"数据库中间件\",\"link\":\"middleware\"}]},{\"text\":\"数据同步\",\"base\":\"/data/performance/read-write-split/replication/\",\"collapsed\":true,\"items\":[{\"text\":\"主从复制原理\",\"link\":\"master-slave\"},{\"text\":\"多源复制\",\"link\":\"multi-source\"},{\"text\":\"半同步复制\",\"link\":\"semi-sync\"},{\"text\":\"延迟问题处理\",\"link\":\"lag\"}]},{\"text\":\"一致性保证\",\"base\":\"/data/performance/read-write-split/consistency/\",\"collapsed\":true,\"items\":[{\"text\":\"最终一致性策略\",\"link\":\"eventual\"},{\"text\":\"读己之写一致性\",\"link\":\"read-your-writes\"},{\"text\":\"单调读一致性\",\"link\":\"monotonic\"}]}]},{\"text\":\"数据预取与批处理\",\"base\":\"/data/performance/batching/\",\"collapsed\":true,\"items\":[{\"text\":\"批量加载技术\",\"link\":\"bulk-loading\"},{\"text\":\"预取模式\",\"link\":\"prefetching\"},{\"text\":\"批处理优化\",\"link\":\"batch-processing\"},{\"text\":\"数据流水线\",\"link\":\"pipelining\"}]}]},{\"text\":\"数据检索\",\"collapsed\":true,\"items\":[{\"text\":\"搜索引擎\",\"base\":\"/data/search/engines/\",\"collapsed\":true,\"items\":[{\"text\":\"Elasticsearch\",\"base\":\"/data/search/engines/elasticsearch/\",\"collapsed\":true,\"items\":[{\"text\":\"分布式架构原理\",\"link\":\"architecture\"},{\"text\":\"索引与分片管理\",\"link\":\"indexing\"},{\"text\":\"分词器与文本分析\",\"link\":\"analysis\"},{\"text\":\"DSL查询语法\",\"link\":\"dsl\"},{\"text\":\"聚合分析\",\"link\":\"aggregations\"},{\"text\":\"性能优化\",\"link\":\"performance\"},{\"text\":\"集群管理\",\"link\":\"cluster\"},{\"text\":\"安全与权限\",\"link\":\"security\"}]},{\"text\":\"OpenSearch\",\"base\":\"/data/search/engines/opensearch/\",\"collapsed\":true,\"items\":[{\"text\":\"与Elasticsearch差异\",\"link\":\"comparison\"},{\"text\":\"安全功能增强\",\"link\":\"security\"},{\"text\":\"可观测性集成\",\"link\":\"observability\"}]},{\"text\":\"Solr\",\"base\":\"/data/search/engines/solr/\",\"collapsed\":true,\"items\":[{\"text\":\"核心架构\",\"link\":\"architecture\"},{\"text\":\"查询语法解析\",\"link\":\"query\"},{\"text\":\"分面搜索\",\"link\":\"faceting\"},{\"text\":\"SolrCloud集群\",\"link\":\"cloud\"}]},{\"text\":\"Meilisearch\",\"base\":\"/data/search/engines/meilisearch/\",\"collapsed\":true,\"items\":[{\"text\":\"即时搜索体验\",\"link\":\"instant\"},{\"text\":\"容错设计\",\"link\":\"fault-tolerant\"},{\"text\":\"同义词管理\",\"link\":\"synonyms\"}]}]},{\"text\":\"索引优化\",\"base\":\"/data/search/indexing/\",\"collapsed\":true,\"items\":[{\"text\":\"索引类型\",\"base\":\"/data/search/indexing/types/\",\"collapsed\":true,\"items\":[{\"text\":\"B-Tree/B+Tree索引\",\"link\":\"btree\"},{\"text\":\"哈希索引\",\"link\":\"hash\"},{\"text\":\"位图索引\",\"link\":\"bitmap\"},{\"text\":\"倒排索引\",\"link\":\"inverted\"},{\"text\":\"空间索引\",\"link\":\"spatial\"},{\"text\":\"全文索引\",\"link\":\"fulltext\"}]},{\"text\":\"索引策略\",\"base\":\"/data/search/indexing/strategies/\",\"collapsed\":true,\"items\":[{\"text\":\"覆盖索引优化\",\"link\":\"covering\"},{\"text\":\"复合索引设计\",\"link\":\"composite\"},{\"text\":\"索引下推技术\",\"link\":\"pushdown\"},{\"text\":\"索引合并策略\",\"link\":\"merge\"},{\"text\":\"索引选择性分析\",\"link\":\"selectivity\"}]},{\"text\":\"索引维护\",\"base\":\"/data/search/indexing/maintenance/\",\"collapsed\":true,\"items\":[{\"text\":\"索引重建与优化\",\"link\":\"rebuild\"},{\"text\":\"索引碎片整理\",\"link\":\"defrag\"},{\"text\":\"索引统计信息\",\"link\":\"statistics\"}]}]},{\"text\":\"多模查询\",\"base\":\"/data/search/multimodel/\",\"collapsed\":true,\"items\":[{\"text\":\"SQL与NoSQL联合查询\",\"link\":\"hybrid\"},{\"text\":\"多源数据联合检索\",\"link\":\"federated\"},{\"text\":\"向量相似度搜索\",\"link\":\"vector\"},{\"text\":\"图遍历查询\",\"link\":\"graph\"}]}]},{\"text\":\"数据处理\",\"collapsed\":true,\"items\":[{\"text\":\"批处理\",\"base\":\"/data/processing/batch/\",\"collapsed\":true,\"items\":[{\"text\":\"批处理框架\",\"base\":\"/data/processing/batch/frameworks/\",\"collapsed\":true,\"items\":[{\"text\":\"Spark核心原理\",\"link\":\"spark\"},{\"text\":\"Flink批处理\",\"link\":\"flink-batch\"},{\"text\":\"MapReduce设计模式\",\"link\":\"mapreduce\"},{\"text\":\"Hive查询优化\",\"link\":\"hive\"}]},{\"text\":\"批处理优化\",\"base\":\"/data/processing/batch/optimization/\",\"collapsed\":true,\"items\":[{\"text\":\"数据分区策略\",\"link\":\"partitioning\"},{\"text\":\"内存管理优化\",\"link\":\"memory\"},{\"text\":\"数据倾斜处理\",\"link\":\"skew\"},{\"text\":\"容错与恢复\",\"link\":\"fault-tolerance\"}]},{\"text\":\"批处理应用场景\",\"base\":\"/data/processing/batch/use-cases/\",\"collapsed\":true,\"items\":[{\"text\":\"数据仓库ETL\",\"link\":\"etl\"},{\"text\":\"报表生成\",\"link\":\"reporting\"},{\"text\":\"离线特征工程\",\"link\":\"feature-engineering\"}]}]},{\"text\":\"流处理\",\"base\":\"/data/processing/streaming/\",\"collapsed\":true,\"items\":[{\"text\":\"流处理框架\",\"base\":\"/data/processing/streaming/frameworks/\",\"collapsed\":true,\"items\":[{\"text\":\"Flink流处理引擎\",\"link\":\"flink\"},{\"text\":\"Kafka Streams应用\",\"link\":\"kafka-streams\"},{\"text\":\"Spark Streaming\",\"link\":\"spark-streaming\"},{\"text\":\"KSQL实时查询\",\"link\":\"ksql\"}]},{\"text\":\"流处理模式\",\"base\":\"/data/processing/streaming/patterns/\",\"collapsed\":true,\"items\":[{\"text\":\"时间窗口处理\",\"link\":\"windowing\"},{\"text\":\"状态管理\",\"link\":\"state\"},{\"text\":\"CEP复杂事件处理\",\"link\":\"cep\"},{\"text\":\"Exactly-Once语义\",\"link\":\"exactly-once\"}]},{\"text\":\"流处理应用场景\",\"base\":\"/data/processing/streaming/use-cases/\",\"collapsed\":true,\"items\":[{\"text\":\"实时监控告警\",\"link\":\"monitoring\"},{\"text\":\"实时推荐系统\",\"link\":\"recommendation\"},{\"text\":\"欺诈检测\",\"link\":\"fraud\"}]}]},{\"text\":\"ETL流程\",\"base\":\"/data/processing/etl/\",\"collapsed\":true,\"items\":[{\"text\":\"ETL工具\",\"base\":\"/data/processing/etl/tools/\",\"collapsed\":true,\"items\":[{\"text\":\"Apache Airflow\",\"link\":\"airflow\"},{\"text\":\"dbt数据转换\",\"link\":\"dbt\"},{\"text\":\"Talend数据集成\",\"link\":\"talend\"},{\"text\":\"Informatica\",\"link\":\"informatica\"}]},{\"text\":\"ETL设计模式\",\"base\":\"/data/processing/etl/patterns/\",\"collapsed\":true,\"items\":[{\"text\":\"增量加载\",\"link\":\"incremental\"},{\"text\":\"缓慢变化维\",\"link\":\"scd\"},{\"text\":\"数据清洗策略\",\"link\":\"cleansing\"},{\"text\":\"数据质量检查\",\"link\":\"quality\"}]},{\"text\":\"现代ELT架构\",\"base\":\"/data/processing/etl/elt/\",\"collapsed\":true,\"items\":[{\"text\":\"云数据仓库集成\",\"link\":\"cloud-dw\"},{\"text\":\"数据湖ETL\",\"link\":\"data-lake\"},{\"text\":\"无服务器ETL\",\"link\":\"serverless\"}]}]}]},{\"text\":\"数据架构\",\"collapsed\":true,\"items\":[{\"text\":\"数据建模\",\"base\":\"/data/architecture/modeling/\",\"collapsed\":true,\"items\":[{\"text\":\"建模方法论\",\"base\":\"/data/architecture/modeling/methodologies/\",\"collapsed\":true,\"items\":[{\"text\":\"关系建模(3NF)\",\"link\":\"relational\"},{\"text\":\"维度建模(Kimball)\",\"link\":\"dimensional\"},{\"text\":\"Data Vault 2.0\",\"link\":\"datavault\"},{\"text\":\"Anchor建模\",\"link\":\"anchor\"}]},{\"text\":\"领域驱动设计\",\"base\":\"/data/architecture/modeling/ddd/\",\"collapsed\":true,\"items\":[{\"text\":\"聚合根设计\",\"link\":\"aggregates\"},{\"text\":\"值对象映射\",\"link\":\"value-objects\"},{\"text\":\"领域事件持久化\",\"link\":\"domain-events\"},{\"text\":\"CQRS模式实现\",\"link\":\"cqrs\"}]},{\"text\":\"多模型数据建模\",\"base\":\"/data/architecture/modeling/multimodel/\",\"collapsed\":true,\"items\":[{\"text\":\"文档模型设计\",\"link\":\"document\"},{\"text\":\"图数据建模\",\"link\":\"graph\"},{\"text\":\"宽列存储建模\",\"link\":\"wide-column\"},{\"text\":\"时序数据建模\",\"link\":\"time-series\"}]}]},{\"text\":\"数据迁移\",\"base\":\"/data/architecture/migration/\",\"collapsed\":true,\"items\":[{\"text\":\"迁移策略\",\"base\":\"/data/architecture/migration/strategies/\",\"collapsed\":true,\"items\":[{\"text\":\"零停机迁移\",\"link\":\"zero-downtime\"},{\"text\":\"蓝绿迁移\",\"link\":\"blue-green\"},{\"text\":\"双写迁移\",\"link\":\"dual-write\"},{\"text\":\"分阶段迁移\",\"link\":\"phased\"}]},{\"text\":\"数据同步工具\",\"base\":\"/data/architecture/migration/tools/\",\"collapsed\":true,\"items\":[{\"text\":\"Debezium CDC\",\"link\":\"debezium\"},{\"text\":\"Airbyte数据管道\",\"link\":\"airbyte\"},{\"text\":\"Fivetran云集成\",\"link\":\"fivetran\"},{\"text\":\"AWS DMS\",\"link\":\"dms\"}]},{\"text\":\"迁移验证\",\"base\":\"/data/architecture/migration/validation/\",\"collapsed\":true,\"items\":[{\"text\":\"数据一致性检查\",\"link\":\"consistency\"},{\"text\":\"数据质量评估\",\"link\":\"quality\"},{\"text\":\"性能基准测试\",\"link\":\"benchmark\"}]}]},{\"text\":\"数据治理\",\"base\":\"/data/architecture/governance/\",\"collapsed\":true,\"items\":[{\"text\":\"元数据管理\",\"base\":\"/data/architecture/governance/metadata/\",\"collapsed\":true,\"items\":[{\"text\":\"数据目录建设\",\"link\":\"catalog\"},{\"text\":\"血缘分析\",\"link\":\"lineage\"},{\"text\":\"Apache Atlas\",\"link\":\"atlas\"},{\"text\":\"DataHub架构\",\"link\":\"datahub\"}]},{\"text\":\"数据质量管理\",\"base\":\"/data/architecture/governance/quality/\",\"collapsed\":true,\"items\":[{\"text\":\"数据剖析\",\"link\":\"profiling\"},{\"text\":\"异常检测\",\"link\":\"anomaly\"},{\"text\":\"数据清洗规则\",\"link\":\"cleansing\"},{\"text\":\"质量监控\",\"link\":\"monitoring\"}]},{\"text\":\"数据安全\",\"base\":\"/data/architecture/governance/security/\",\"collapsed\":true,\"items\":[{\"text\":\"数据脱敏\",\"link\":\"masking\"},{\"text\":\"访问控制\",\"link\":\"access-control\"},{\"text\":\"加密技术\",\"link\":\"encryption\"},{\"text\":\"GDPR合规\",\"link\":\"gdpr\"}]},{\"text\":\"主数据管理\",\"base\":\"/data/architecture/governance/mdm/\",\"collapsed\":true,\"items\":[{\"text\":\"主数据模型\",\"link\":\"model\"},{\"text\":\"实体解析\",\"link\":\"entity-resolution\"},{\"text\":\"黄金记录创建\",\"link\":\"golden-record\"}]}]},{\"text\":\"数据仓库与湖仓一体\",\"base\":\"/data/architecture/dw/\",\"collapsed\":true,\"items\":[{\"text\":\"数据仓库设计\",\"base\":\"/data/architecture/dw/design/\",\"collapsed\":true,\"items\":[{\"text\":\"星型模型\",\"link\":\"star\"},{\"text\":\"雪花模型\",\"link\":\"snowflake\"},{\"text\":\"星座模型\",\"link\":\"galaxy\"},{\"text\":\"物化视图优化\",\"link\":\"materialized\"}]},{\"text\":\"现代数据栈\",\"base\":\"/data/architecture/dw/modern-stack/\",\"collapsed\":true,\"items\":[{\"text\":\"Snowflake架构\",\"link\":\"snowflake\"},{\"text\":\"BigQuery最佳实践\",\"link\":\"bigquery\"},{\"text\":\"Redshift性能优化\",\"link\":\"redshift\"},{\"text\":\"Databricks湖仓\",\"link\":\"databricks\"}]},{\"text\":\"数据中台架构\",\"base\":\"/data/architecture/dw/data-mesh/\",\"collapsed\":true,\"items\":[{\"text\":\"领域驱动数据产品\",\"link\":\"domain-driven\"},{\"text\":\"数据产品自治\",\"link\":\"autonomy\"},{\"text\":\"联邦治理\",\"link\":\"federated\"}]}]}]}]},\"/devops/\":{\"base\":\"/devops/\",\"items\":[{\"text\":\"Web服务器\",\"collapsed\":true,\"items\":[{\"text\":\"Nginx\",\"base\":\"/devops/web-servers/nginx/\",\"collapsed\":true,\"items\":[{\"text\":\"配置优化\",\"link\":\"configuration\"},{\"text\":\"负载均衡策略\",\"link\":\"load-balancing\"},{\"text\":\"反向代理实现\",\"link\":\"reverse-proxy\"},{\"text\":\"缓存加速机制\",\"link\":\"caching\"},{\"text\":\"Lua脚本扩展\",\"link\":\"lua\"},{\"text\":\"性能调优\",\"link\":\"performance\"},{\"text\":\"安全加固实践\",\"link\":\"security\"}]},{\"text\":\"Apache\",\"base\":\"/devops/web-servers/apache/\",\"collapsed\":true,\"items\":[{\"text\":\"MPM模块原理\",\"link\":\"mpm\"},{\"text\":\".htaccess配置\",\"link\":\"htaccess\"},{\"text\":\"模块开发指南\",\"link\":\"modules\"},{\"text\":\"虚拟主机管理\",\"link\":\"vhosts\"},{\"text\":\"性能优化策略\",\"link\":\"performance\"}]},{\"text\":\"Caddy\",\"base\":\"/devops/web-servers/caddy/\",\"collapsed\":true,\"items\":[{\"text\":\"自动HTTPS配置\",\"link\":\"auto-https\"},{\"text\":\"Caddyfile语法\",\"link\":\"caddyfile\"},{\"text\":\"插件开发\",\"link\":\"plugins\"}]}]},{\"text\":\"容器化技术\",\"collapsed\":true,\"items\":[{\"text\":\"Docker\",\"base\":\"/devops/container/docker/\",\"collapsed\":true,\"items\":[{\"text\":\"核心架构原理\",\"link\":\"architecture\"},{\"text\":\"镜像构建最佳实践\",\"link\":\"image-build\"},{\"text\":\"存储驱动选择\",\"link\":\"storage\"},{\"text\":\"网络模型详解\",\"link\":\"networking\"},{\"text\":\"安全实践指南\",\"link\":\"security\"},{\"text\":\"多阶段构建\",\"link\":\"multi-stage\"},{\"text\":\"资源限制配置\",\"link\":\"resource-limits\"},{\"text\":\"Swarm集群管理\",\"link\":\"swarm\"}]},{\"text\":\"Kubernetes\",\"base\":\"/devops/container/kubernetes/\",\"collapsed\":true,\"items\":[{\"text\":\"架构设计原理\",\"link\":\"architecture\"},{\"text\":\"Pod生命周期管理\",\"link\":\"pods\"},{\"text\":\"服务暴露策略\",\"link\":\"services\"},{\"text\":\"配置管理方案\",\"link\":\"config\"},{\"text\":\"持久化存储方案\",\"link\":\"volumes\"},{\"text\":\"自动扩缩机制\",\"link\":\"autoscaling\"},{\"text\":\"Operator开发模式\",\"link\":\"operators\"},{\"text\":\"网络策略实现\",\"link\":\"network-policies\"},{\"text\":\"集群升级策略\",\"link\":\"upgrades\"}]},{\"text\":\"容器编排\",\"base\":\"/devops/container/orchestration/\",\"collapsed\":true,\"items\":[{\"text\":\"Helm包管理\",\"link\":\"helm\"},{\"text\":\"Kustomize配置管理\",\"link\":\"kustomize\"},{\"text\":\"服务网格(Istio)\",\"link\":\"service-mesh\"},{\"text\":\"Serverless框架(Knative)\",\"link\":\"serverless\"}]}]},{\"text\":\"部署与持续交付\",\"collapsed\":true,\"items\":[{\"text\":\"CI/CD工具\",\"base\":\"/devops/deployment/cicd-tools/\",\"collapsed\":true,\"items\":[{\"text\":\"Jenkins\",\"base\":\"/devops/deployment/cicd-tools/jenkins/\",\"collapsed\":true,\"items\":[{\"text\":\"流水线设计\",\"link\":\"pipelines\"},{\"text\":\"共享库开发\",\"link\":\"shared-libraries\"},{\"text\":\"分布式构建\",\"link\":\"distributed-builds\"},{\"text\":\"安全加固\",\"link\":\"security\"}]},{\"text\":\"GitLab CI\",\"base\":\"/devops/deployment/cicd-tools/gitlab-ci/\",\"collapsed\":true,\"items\":[{\"text\":\".gitlab-ci.yml详解\",\"link\":\"configuration\"},{\"text\":\"Runner配置优化\",\"link\":\"runners\"},{\"text\":\"多阶段流水线\",\"link\":\"stages\"}]},{\"text\":\"GitHub Actions\",\"base\":\"/devops/deployment/cicd-tools/github-actions/\",\"collapsed\":true,\"items\":[{\"text\":\"工作流设计\",\"link\":\"workflows\"},{\"text\":\"自定义Action开发\",\"link\":\"custom-actions\"},{\"text\":\"矩阵构建策略\",\"link\":\"matrix\"}]}]},{\"text\":\"部署策略\",\"base\":\"/devops/deployment/strategies/\",\"collapsed\":true,\"items\":[{\"text\":\"蓝绿部署实现\",\"link\":\"blue-green\"},{\"text\":\"金丝雀发布策略\",\"link\":\"canary\"},{\"text\":\"滚动更新机制\",\"link\":\"rolling\"},{\"text\":\"特性开关管理\",\"link\":\"feature-flags\"},{\"text\":\"渐进式交付\",\"link\":\"progressive\"}]},{\"text\":\"GitOps实践\",\"base\":\"/devops/deployment/gitops/\",\"collapsed\":true,\"items\":[{\"text\":\"Argo CD实现\",\"link\":\"argo-cd\"},{\"text\":\"Flux CD工作流\",\"link\":\"flux\"},{\"text\":\"应用同步策略\",\"link\":\"sync-strategies\"},{\"text\":\"多集群管理\",\"link\":\"multi-cluster\"}]}]},{\"text\":\"基础设施管理\",\"collapsed\":true,\"items\":[{\"text\":\"基础设施即代码\",\"base\":\"/devops/infrastructure/iac/\",\"collapsed\":true,\"items\":[{\"text\":\"Terraform\",\"base\":\"/devops/infrastructure/iac/terraform/\",\"collapsed\":true,\"items\":[{\"text\":\"核心概念与HCL语法\",\"link\":\"concepts\"},{\"text\":\"模块开发与复用\",\"link\":\"modules\"},{\"text\":\"State管理策略\",\"link\":\"state\"},{\"text\":\"多云部署方案\",\"link\":\"multi-cloud\"}]},{\"text\":\"Pulumi\",\"base\":\"/devops/infrastructure/iac/pulumi/\",\"collapsed\":true,\"items\":[{\"text\":\"多语言支持\",\"link\":\"multi-language\"},{\"text\":\"组件开发\",\"link\":\"components\"},{\"text\":\"Kubernetes集成\",\"link\":\"k8s\"}]},{\"text\":\"Crossplane\",\"base\":\"/devops/infrastructure/iac/crossplane/\",\"collapsed\":true,\"items\":[{\"text\":\"CRD定义\",\"link\":\"crds\"},{\"text\":\"Composition开发\",\"link\":\"compositions\"},{\"text\":\"多云资源管理\",\"link\":\"multi-cloud\"}]}]},{\"text\":\"配置管理\",\"base\":\"/devops/infrastructure/configuration/\",\"collapsed\":true,\"items\":[{\"text\":\"Ansible\",\"base\":\"/devops/infrastructure/configuration/ansible/\",\"collapsed\":true,\"items\":[{\"text\":\"Playbook设计\",\"link\":\"playbooks\"},{\"text\":\"Role开发\",\"link\":\"roles\"},{\"text\":\"动态Inventory\",\"link\":\"dynamic-inventory\"}]},{\"text\":\"Chef\",\"base\":\"/devops/infrastructure/configuration/chef/\",\"collapsed\":true,\"items\":[{\"text\":\"Cookbook开发\",\"link\":\"cookbooks\"},{\"text\":\"Policy管理\",\"link\":\"policies\"},{\"text\":\"Test Kitchen\",\"link\":\"test-kitchen\"}]},{\"text\":\"SaltStack\",\"base\":\"/devops/infrastructure/configuration/saltstack/\",\"collapsed\":true,\"items\":[{\"text\":\"State系统\",\"link\":\"states\"},{\"text\":\"事件驱动架构\",\"link\":\"reactor\"},{\"text\":\"Salt Cloud\",\"link\":\"salt-cloud\"}]}]}]},{\"text\":\"监控与日志\",\"collapsed\":true,\"items\":[{\"text\":\"指标监控\",\"base\":\"/devops/monitoring/metrics/\",\"collapsed\":true,\"items\":[{\"text\":\"Prometheus\",\"base\":\"/devops/monitoring/metrics/prometheus/\",\"collapsed\":true,\"items\":[{\"text\":\"数据模型与指标\",\"link\":\"data-model\"},{\"text\":\"Exporter开发\",\"link\":\"exporters\"},{\"text\":\"Alertmanager配置\",\"link\":\"alertmanager\"},{\"text\":\"长期存储方案\",\"link\":\"long-term-storage\"}]},{\"text\":\"Grafana\",\"base\":\"/devops/monitoring/metrics/grafana/\",\"collapsed\":true,\"items\":[{\"text\":\"仪表盘设计\",\"link\":\"dashboards\"},{\"text\":\"告警配置\",\"link\":\"alerts\"},{\"text\":\"插件开发\",\"link\":\"plugins\"}]},{\"text\":\"云监控方案\",\"base\":\"/devops/monitoring/metrics/cloud/\",\"collapsed\":true,\"items\":[{\"text\":\"CloudWatch\",\"link\":\"cloudwatch\"},{\"text\":\"Stackdriver\",\"link\":\"stackdriver\"},{\"text\":\"Azure Monitor\",\"link\":\"azure-monitor\"}]}]},{\"text\":\"日志管理\",\"base\":\"/devops/monitoring/logging/\",\"collapsed\":true,\"items\":[{\"text\":\"ELK Stack\",\"base\":\"/devops/monitoring/logging/elk/\",\"collapsed\":true,\"items\":[{\"text\":\"Elasticsearch集群\",\"link\":\"elasticsearch\"},{\"text\":\"Logstash管道\",\"link\":\"logstash\"},{\"text\":\"Kibana可视化\",\"link\":\"kibana\"}]},{\"text\":\"EFK Stack\",\"base\":\"/devops/monitoring/logging/efk/\",\"collapsed\":true,\"items\":[{\"text\":\"Fluentd配置\",\"link\":\"fluentd\"},{\"text\":\"Fluent Bit\",\"link\":\"fluent-bit\"}]},{\"text\":\"Loki\",\"base\":\"/devops/monitoring/logging/loki/\",\"collapsed\":true,\"items\":[{\"text\":\"架构设计\",\"link\":\"architecture\"},{\"text\":\"日志标签策略\",\"link\":\"labels\"},{\"text\":\"Promtail配置\",\"link\":\"promtail\"}]}]},{\"text\":\"分布式追踪\",\"base\":\"/devops/monitoring/tracing/\",\"collapsed\":true,\"items\":[{\"text\":\"Jaeger部署\",\"link\":\"jaeger\"},{\"text\":\"Zipkin实现\",\"link\":\"zipkin\"},{\"text\":\"OpenTelemetry\",\"link\":\"opentelemetry\"}]}]},{\"text\":\"云服务平台\",\"collapsed\":true,\"items\":[{\"text\":\"AWS\",\"base\":\"/devops/cloud/aws/\",\"collapsed\":true,\"items\":[{\"text\":\"EC2与自动扩缩\",\"link\":\"ec2\"},{\"text\":\"S3对象存储\",\"link\":\"s3\"},{\"text\":\"RDS数据库服务\",\"link\":\"rds\"},{\"text\":\"Lambda无服务器\",\"link\":\"lambda\"},{\"text\":\"EKS容器服务\",\"link\":\"eks\"},{\"text\":\"IAM权限管理\",\"link\":\"iam\"},{\"text\":\"VPC网络配置\",\"link\":\"vpc\"}]},{\"text\":\"Azure\",\"base\":\"/devops/cloud/azure/\",\"collapsed\":true,\"items\":[{\"text\":\"虚拟机规模集\",\"link\":\"vmss\"},{\"text\":\"Blob存储\",\"link\":\"blob\"},{\"text\":\"AKS容器服务\",\"link\":\"aks\"},{\"text\":\"Functions无服务器\",\"link\":\"functions\"},{\"text\":\"AD身份管理\",\"link\":\"ad\"},{\"text\":\"虚拟网络\",\"link\":\"vnet\"}]},{\"text\":\"Google Cloud\",\"base\":\"/devops/cloud/gcp/\",\"collapsed\":true,\"items\":[{\"text\":\"Compute Engine\",\"link\":\"compute\"},{\"text\":\"Cloud Storage\",\"link\":\"storage\"},{\"text\":\"GKE容器服务\",\"link\":\"gke\"},{\"text\":\"Cloud Functions\",\"link\":\"functions\"},{\"text\":\"Cloud IAM\",\"link\":\"iam\"},{\"text\":\"VPC网络\",\"link\":\"vpc\"}]},{\"text\":\"多云管理\",\"base\":\"/devops/cloud/multi-cloud/\",\"collapsed\":true,\"items\":[{\"text\":\"跨云网络架构\",\"link\":\"networking\"},{\"text\":\"统一身份管理\",\"link\":\"identity\"},{\"text\":\"成本优化策略\",\"link\":\"cost-optimization\"},{\"text\":\"灾难恢复方案\",\"link\":\"disaster-recovery\"}]}]},{\"text\":\"网络与安全\",\"collapsed\":true,\"items\":[{\"text\":\"网络安全\",\"base\":\"/devops/security/network/\",\"collapsed\":true,\"items\":[{\"text\":\"防火墙配置\",\"link\":\"firewalls\"},{\"text\":\"VPN实现方案\",\"link\":\"vpn\"},{\"text\":\"负载均衡策略\",\"link\":\"load-balancing\"},{\"text\":\"DDoS防护\",\"link\":\"ddos\"},{\"text\":\"WAF应用防护\",\"link\":\"waf\"}]},{\"text\":\"应用安全\",\"base\":\"/devops/security/application/\",\"collapsed\":true,\"items\":[{\"text\":\"TLS/SSL配置\",\"link\":\"tls\"},{\"text\":\"密钥管理方案\",\"link\":\"secrets\"},{\"text\":\"漏洞扫描\",\"link\":\"vulnerability-scanning\"},{\"text\":\"安全合规\",\"link\":\"compliance\"}]},{\"text\":\"身份认证\",\"base\":\"/devops/security/authentication/\",\"collapsed\":true,\"items\":[{\"text\":\"SSO单点登录\",\"link\":\"sso\"},{\"text\":\"OAuth2.0实现\",\"link\":\"oauth\"},{\"text\":\"OpenID Connect\",\"link\":\"oidc\"},{\"text\":\"RBAC权限控制\",\"link\":\"rbac\"}]}]},{\"text\":\"性能优化\",\"collapsed\":true,\"items\":[{\"text\":\"系统调优\",\"base\":\"/devops/performance/system/\",\"collapsed\":true,\"items\":[{\"text\":\"Linux内核参数\",\"link\":\"kernel-params\"},{\"text\":\"文件系统优化\",\"link\":\"filesystems\"},{\"text\":\"网络栈调优\",\"link\":\"networking\"},{\"text\":\"内存管理优化\",\"link\":\"memory\"}]},{\"text\":\"应用性能\",\"base\":\"/devops/performance/application/\",\"collapsed\":true,\"items\":[{\"text\":\"性能分析工具\",\"link\":\"profiling\"},{\"text\":\"GC调优策略\",\"link\":\"gc\"},{\"text\":\"连接池优化\",\"link\":\"connection-pooling\"},{\"text\":\"缓存策略实施\",\"link\":\"caching\"}]},{\"text\":\"数据库优化\",\"base\":\"/devops/performance/database/\",\"collapsed\":true,\"items\":[{\"text\":\"查询优化\",\"link\":\"query-optimization\"},{\"text\":\"索引策略\",\"link\":\"indexing\"},{\"text\":\"连接管理\",\"link\":\"connections\"},{\"text\":\"分库分表方案\",\"link\":\"sharding\"}]}]},{\"text\":\"开发工具\",\"collapsed\":true,\"items\":[{\"text\":\"版本控制\",\"base\":\"/devops/tools/vcs/\",\"collapsed\":true,\"items\":[{\"text\":\"Git\",\"base\":\"/devops/tools/vcs/git/\",\"collapsed\":true,\"items\":[{\"text\":\"高级分支策略\",\"link\":\"branching\"},{\"text\":\"变基与合并\",\"link\":\"rebase-merge\"},{\"text\":\"子模块管理\",\"link\":\"submodules\"},{\"text\":\"钩子脚本\",\"link\":\"hooks\"}]},{\"text\":\"版本控制平台\",\"base\":\"/devops/tools/vcs/platforms/\",\"collapsed\":true,\"items\":[{\"text\":\"GitHub工作流\",\"link\":\"github\"},{\"text\":\"GitLab CI/CD\",\"link\":\"gitlab\"},{\"text\":\"Bitbucket流水线\",\"link\":\"bitbucket\"}]}]},{\"text\":\"命令行工具\",\"base\":\"/devops/tools/cli/\",\"collapsed\":true,\"items\":[{\"text\":\"Linux工具集\",\"link\":\"linux\"},{\"text\":\"网络诊断工具\",\"link\":\"networking\"},{\"text\":\"容器调试工具\",\"link\":\"container\"},{\"text\":\"Kubernetes CLI\",\"link\":\"kubectl\"}]},{\"text\":\"基础设施工具\",\"base\":\"/devops/tools/infrastructure/\",\"collapsed\":true,\"items\":[{\"text\":\"Packer镜像构建\",\"link\":\"packer\"},{\"text\":\"Vagrant环境管理\",\"link\":\"vagrant\"},{\"text\":\"Consul服务发现\",\"link\":\"consul\"},{\"text\":\"Vault密钥管理\",\"link\":\"vault\"}]}]}]},\"/algorithms/\":{\"base\":\"/algorithms/\",\"items\":[{\"text\":\"基础数据结构\",\"collapsed\":true,\"items\":[{\"text\":\"线性结构\",\"base\":\"/algorithms/data-structures/linear/\",\"collapsed\":true,\"items\":[{\"text\":\"数组\",\"base\":\"/algorithms/data-structures/linear/array/\",\"collapsed\":true,\"items\":[{\"text\":\"动态数组实现\",\"link\":\"dynamic\"},{\"text\":\"多维数组操作\",\"link\":\"multidimensional\"},{\"text\":\"数组算法优化\",\"link\":\"optimization\"}]},{\"text\":\"链表\",\"base\":\"/algorithms/data-structures/linear/linked-list/\",\"collapsed\":true,\"items\":[{\"text\":\"单链表与双链表\",\"link\":\"types\"},{\"text\":\"循环链表实现\",\"link\":\"circular\"},{\"text\":\"链表反转算法\",\"link\":\"reversal\"},{\"text\":\"链表排序技术\",\"link\":\"sorting\"}]},{\"text\":\"栈与队列\",\"base\":\"/algorithms/data-structures/linear/stack-queue/\",\"collapsed\":true,\"items\":[{\"text\":\"栈的应用场景\",\"link\":\"stack\"},{\"text\":\"队列的实现变体\",\"link\":\"queue\"},{\"text\":\"单调栈技巧\",\"link\":\"monotonic\"},{\"text\":\"双端队列算法\",\"link\":\"deque\"}]}]},{\"text\":\"树形结构\",\"base\":\"/algorithms/data-structures/trees/\",\"collapsed\":true,\"items\":[{\"text\":\"二叉树\",\"base\":\"/algorithms/data-structures/trees/binary/\",\"collapsed\":true,\"items\":[{\"text\":\"遍历算法(前/中/后序)\",\"link\":\"traversal\"},{\"text\":\"平衡二叉树实现\",\"link\":\"balanced\"},{\"text\":\"二叉搜索树操作\",\"link\":\"bst\"},{\"text\":\"堆与优先队列\",\"link\":\"heaps\"}]},{\"text\":\"多叉树\",\"base\":\"/algorithms/data-structures/trees/multiway/\",\"collapsed\":true,\"items\":[{\"text\":\"B树原理与应用\",\"link\":\"b-tree\"},{\"text\":\"B+树数据库索引\",\"link\":\"b-plus\"},{\"text\":\"Trie树实现\",\"link\":\"trie\"},{\"text\":\"线段树与区间查询\",\"link\":\"segment\"}]},{\"text\":\"平衡树\",\"base\":\"/algorithms/data-structures/trees/balanced/\",\"collapsed\":true,\"items\":[{\"text\":\"AVL树旋转操作\",\"link\":\"avl\"},{\"text\":\"红黑树实现原理\",\"link\":\"red-black\"},{\"text\":\"伸展树自调整\",\"link\":\"splay\"},{\"text\":\"跳表数据结构\",\"link\":\"skip-list\"}]}]},{\"text\":\"哈希结构\",\"base\":\"/algorithms/data-structures/hash/\",\"collapsed\":true,\"items\":[{\"text\":\"哈希函数设计\",\"link\":\"functions\"},{\"text\":\"冲突解决策略\",\"link\":\"collisions\"},{\"text\":\"布隆过滤器\",\"link\":\"bloom-filter\"},{\"text\":\"一致性哈希\",\"link\":\"consistent-hashing\"}]}]},{\"text\":\"算法设计范式\",\"collapsed\":true,\"items\":[{\"text\":\"分治策略\",\"base\":\"/algorithms/paradigms/divide-conquer/\",\"collapsed\":true,\"items\":[{\"text\":\"递归实现技巧\",\"link\":\"recursion\"},{\"text\":\"归并排序优化\",\"link\":\"merge-sort\"},{\"text\":\"快速排序变体\",\"link\":\"quick-sort\"},{\"text\":\"最近点对问题\",\"link\":\"closest-pair\"},{\"text\":\"主定理分析\",\"link\":\"master-theorem\"}]},{\"text\":\"动态规划\",\"base\":\"/algorithms/paradigms/dp/\",\"collapsed\":true,\"items\":[{\"text\":\"经典问题\",\"base\":\"/algorithms/paradigms/dp/classic/\",\"collapsed\":true,\"items\":[{\"text\":\"背包问题\",\"link\":\"knapsack\"},{\"text\":\"最长公共子序列\",\"link\":\"lcs\"},{\"text\":\"编辑距离\",\"link\":\"edit-distance\"},{\"text\":\"矩阵链乘法\",\"link\":\"matrix-chain\"}]},{\"text\":\"优化技巧\",\"base\":\"/algorithms/paradigms/dp/optimization/\",\"collapsed\":true,\"items\":[{\"text\":\"状态压缩\",\"link\":\"state-compression\"},{\"text\":\"斜率优化\",\"link\":\"convex-hull\"},{\"text\":\"四边形不等式\",\"link\":\"quadrangle\"}]},{\"text\":\"高级应用\",\"base\":\"/algorithms/paradigms/dp/advanced/\",\"collapsed\":true,\"items\":[{\"text\":\"树形DP\",\"link\":\"tree\"},{\"text\":\"数位DP\",\"link\":\"digit\"},{\"text\":\"概率DP\",\"link\":\"probability\"}]}]},{\"text\":\"贪心算法\",\"base\":\"/algorithms/paradigms/greedy/\",\"collapsed\":true,\"items\":[{\"text\":\"活动选择问题\",\"link\":\"activity-selection\"},{\"text\":\"霍夫曼编码\",\"link\":\"huffman\"},{\"text\":\"最小生成树\",\"link\":\"mst\"},{\"text\":\"拟阵理论\",\"link\":\"matroid\"}]},{\"text\":\"回溯算法\",\"base\":\"/algorithms/paradigms/backtracking/\",\"collapsed\":true,\"items\":[{\"text\":\"排列组合问题\",\"link\":\"permutations\"},{\"text\":\"N皇后问题\",\"link\":\"n-queens\"},{\"text\":\"剪枝优化\",\"link\":\"pruning\"},{\"text\":\"启发式搜索\",\"link\":\"heuristics\"}]}]},{\"text\":\"图论算法\",\"collapsed\":true,\"items\":[{\"text\":\"图遍历\",\"base\":\"/algorithms/graph/traversal/\",\"collapsed\":true,\"items\":[{\"text\":\"BFS应用场景\",\"link\":\"bfs\"},{\"text\":\"DFS变体\",\"link\":\"dfs\"},{\"text\":\"拓扑排序\",\"link\":\"topological\"},{\"text\":\"连通分量\",\"link\":\"components\"}]},{\"text\":\"最短路径\",\"base\":\"/algorithms/graph/shortest-path/\",\"collapsed\":true,\"items\":[{\"text\":\"Dijkstra算法\",\"link\":\"dijkstra\"},{\"text\":\"Bellman-Ford\",\"link\":\"bellman-ford\"},{\"text\":\"Floyd-Warshall\",\"link\":\"floyd\"},{\"text\":\"A*搜索算法\",\"link\":\"a-star\"}]},{\"text\":\"网络流\",\"base\":\"/algorithms/graph/network-flow/\",\"collapsed\":true,\"items\":[{\"text\":\"最大流算法\",\"link\":\"max-flow\"},{\"text\":\"最小割问题\",\"link\":\"min-cut\"},{\"text\":\"费用流模型\",\"link\":\"min-cost\"},{\"text\":\"二分图匹配\",\"link\":\"bipartite\"}]},{\"text\":\"高级图论\",\"base\":\"/algorithms/graph/advanced/\",\"collapsed\":true,\"items\":[{\"text\":\"欧拉回路\",\"link\":\"euler\"},{\"text\":\"哈密顿回路\",\"link\":\"hamilton\"},{\"text\":\"平面图算法\",\"link\":\"planar\"},{\"text\":\"强连通分量\",\"link\":\"scc\"}]}]},{\"text\":\"搜索算法\",\"collapsed\":true,\"items\":[{\"text\":\"基本搜索\",\"base\":\"/algorithms/search/basic/\",\"collapsed\":true,\"items\":[{\"text\":\"线性搜索优化\",\"link\":\"linear\"},{\"text\":\"二分搜索变体\",\"link\":\"binary\"},{\"text\":\"三分搜索\",\"link\":\"ternary\"},{\"text\":\"跳跃搜索\",\"link\":\"jump\"}]},{\"text\":\"启发式搜索\",\"base\":\"/algorithms/search/heuristic/\",\"collapsed\":true,\"items\":[{\"text\":\"A*算法优化\",\"link\":\"a-star\"},{\"text\":\"IDA*迭代深化\",\"link\":\"ida\"},{\"text\":\"模拟退火\",\"link\":\"simulated-annealing\"},{\"text\":\"遗传算法\",\"link\":\"genetic\"}]},{\"text\":\"高级搜索\",\"base\":\"/algorithms/search/advanced/\",\"collapsed\":true,\"items\":[{\"text\":\"双向BFS\",\"link\":\"bidirectional\"},{\"text\":\"迭代深化DFS\",\"link\":\"iddfs\"},{\"text\":\"蒙特卡洛树搜索\",\"link\":\"mcts\"},{\"text\":\"分支限界法\",\"link\":\"branch-bound\"}]}]},{\"text\":\"字符串算法\",\"collapsed\":true,\"items\":[{\"text\":\"模式匹配\",\"base\":\"/algorithms/string/pattern-matching/\",\"collapsed\":true,\"items\":[{\"text\":\"KMP算法\",\"link\":\"kmp\"},{\"text\":\"Rabin-Karp\",\"link\":\"rabin-karp\"},{\"text\":\"Boyer-Moore\",\"link\":\"boyer-moore\"},{\"text\":\"Z算法\",\"link\":\"z-algorithm\"}]},{\"text\":\"字符串处理\",\"base\":\"/algorithms/string/manipulation/\",\"collapsed\":true,\"items\":[{\"text\":\"Trie应用\",\"link\":\"trie\"},{\"text\":\"后缀数组\",\"link\":\"suffix-array\"},{\"text\":\"后缀自动机\",\"link\":\"suffix-automaton\"},{\"text\":\"AC自动机\",\"link\":\"aho-corasick\"}]},{\"text\":\"文本压缩\",\"base\":\"/algorithms/string/compression/\",\"collapsed\":true,\"items\":[{\"text\":\"LZ77/LZ78\",\"link\":\"lz\"},{\"text\":\"Huffman编码\",\"link\":\"huffman\"},{\"text\":\"Burrows-Wheeler\",\"link\":\"bwt\"},{\"text\":\"算术编码\",\"link\":\"arithmetic\"}]}]},{\"text\":\"计算几何\",\"collapsed\":true,\"items\":[{\"text\":\"基本概念\",\"base\":\"/algorithms/geometry/basics/\",\"collapsed\":true,\"items\":[{\"text\":\"点与向量\",\"link\":\"points-vectors\"},{\"text\":\"线与多边形\",\"link\":\"lines-polygons\"},{\"text\":\"凸包算法\",\"link\":\"convex-hull\"},{\"text\":\"空间变换\",\"link\":\"transformations\"}]},{\"text\":\"几何算法\",\"base\":\"/algorithms/geometry/algorithms/\",\"collapsed\":true,\"items\":[{\"text\":\"线段相交\",\"link\":\"line-intersection\"},{\"text\":\"点定位\",\"link\":\"point-location\"},{\"text\":\"最近点对\",\"link\":\"closest-pair\"},{\"text\":\"多边形剖分\",\"link\":\"triangulation\"}]},{\"text\":\"高级几何\",\"base\":\"/algorithms/geometry/advanced/\",\"collapsed\":true,\"items\":[{\"text\":\"旋转卡壳\",\"link\":\"rotating-calipers\"},{\"text\":\"半平面交\",\"link\":\"half-plane\"},{\"text\":\"Voronoi图\",\"link\":\"voronoi\"},{\"text\":\"Delaunay三角化\",\"link\":\"delaunay\"}]}]},{\"text\":\"数论与组合\",\"collapsed\":true,\"items\":[{\"text\":\"数论基础\",\"base\":\"/algorithms/number-theory/basics/\",\"collapsed\":true,\"items\":[{\"text\":\"质数算法\",\"link\":\"primes\"},{\"text\":\"模运算\",\"link\":\"modular\"},{\"text\":\"欧几里得算法\",\"link\":\"euclidean\"},{\"text\":\"中国剩余定理\",\"link\":\"crt\"}]},{\"text\":\"组合数学\",\"base\":\"/algorithms/number-theory/combinatorics/\",\"collapsed\":true,\"items\":[{\"text\":\"排列组合\",\"link\":\"permutations\"},{\"text\":\"二项式系数\",\"link\":\"binomial\"},{\"text\":\"容斥原理\",\"link\":\"inclusion\"},{\"text\":\"生成函数\",\"link\":\"generating\"}]},{\"text\":\"高级数论\",\"base\":\"/algorithms/number-theory/advanced/\",\"collapsed\":true,\"items\":[{\"text\":\"原根与离散对数\",\"link\":\"primitive\"},{\"text\":\"Miller-Rabin测试\",\"link\":\"primality\"},{\"text\":\"Pollard Rho分解\",\"link\":\"factorization\"},{\"text\":\"数论函数\",\"link\":\"functions\"}]}]},{\"text\":\"算法优化\",\"collapsed\":true,\"items\":[{\"text\":\"时间复杂度优化\",\"base\":\"/algorithms/optimization/time-complexity/\",\"collapsed\":true,\"items\":[{\"text\":\"常数优化\",\"link\":\"constant\"},{\"text\":\"记忆化搜索\",\"link\":\"memoization\"},{\"text\":\"循环优化\",\"link\":\"loop\"},{\"text\":\"位运算技巧\",\"link\":\"bitwise\"}]},{\"text\":\"空间复杂度优化\",\"base\":\"/algorithms/optimization/space-complexity/\",\"collapsed\":true,\"items\":[{\"text\":\"滚动数组\",\"link\":\"rolling-array\"},{\"text\":\"就地算法\",\"link\":\"in-place\"},{\"text\":\"数据压缩\",\"link\":\"compression\"},{\"text\":\"稀疏数据结构\",\"link\":\"sparse\"}]},{\"text\":\"并行算法\",\"base\":\"/algorithms/optimization/parallel/\",\"collapsed\":true,\"items\":[{\"text\":\"分治并行\",\"link\":\"divide-conquer\"},{\"text\":\"MapReduce模型\",\"link\":\"mapreduce\"},{\"text\":\"GPU加速\",\"link\":\"gpu\"},{\"text\":\"多线程同步\",\"link\":\"multithreading\"}]},{\"text\":\"近似算法\",\"base\":\"/algorithms/optimization/approximation/\",\"collapsed\":true,\"items\":[{\"text\":\"贪心近似\",\"link\":\"greedy\"},{\"text\":\"随机化算法\",\"link\":\"randomized\"},{\"text\":\"线性规划舍入\",\"link\":\"lp-rounding\"},{\"text\":\"PTAS与FPTAS\",\"link\":\"ptas\"}]}]},{\"text\":\"算法分析\",\"collapsed\":true,\"items\":[{\"text\":\"复杂度分析\",\"base\":\"/algorithms/analysis/complexity/\",\"collapsed\":true,\"items\":[{\"text\":\"渐进表示法\",\"link\":\"asymptotic\"},{\"text\":\"平摊分析\",\"link\":\"amortized\"},{\"text\":\"递归关系求解\",\"link\":\"recurrence\"},{\"text\":\"空间复杂度\",\"link\":\"space\"}]},{\"text\":\"正确性证明\",\"base\":\"/algorithms/analysis/correctness/\",\"collapsed\":true,\"items\":[{\"text\":\"循环不变式\",\"link\":\"loop-invariant\"},{\"text\":\"数学归纳法\",\"link\":\"induction\"},{\"text\":\"反证法应用\",\"link\":\"contradiction\"},{\"text\":\"不变量证明\",\"link\":\"invariant\"}]},{\"text\":\"实验分析\",\"base\":\"/algorithms/analysis/empirical/\",\"collapsed\":true,\"items\":[{\"text\":\"基准测试\",\"link\":\"benchmarking\"},{\"text\":\"性能剖析\",\"link\":\"profiling\"},{\"text\":\"缓存优化\",\"link\":\"cache\"},{\"text\":\"分支预测\",\"link\":\"branch-prediction\"}]}]},{\"text\":\"高级算法\",\"collapsed\":true,\"items\":[{\"text\":\"随机化算法\",\"base\":\"/algorithms/advanced/randomized/\",\"collapsed\":true,\"items\":[{\"text\":\"随机快速排序\",\"link\":\"quicksort\"},{\"text\":\"蒙特卡洛方法\",\"link\":\"monte-carlo\"},{\"text\":\"拉斯维加斯算法\",\"link\":\"las-vegas\"},{\"text\":\"随机游走\",\"link\":\"random-walk\"}]},{\"text\":\"在线算法\",\"base\":\"/algorithms/advanced/online/\",\"collapsed\":true,\"items\":[{\"text\":\"竞争分析\",\"link\":\"competitive\"},{\"text\":\"分页算法\",\"link\":\"paging\"},{\"text\":\"k服务器问题\",\"link\":\"k-server\"},{\"text\":\"滑雪租赁问题\",\"link\":\"ski-rental\"}]},{\"text\":\"量子算法\",\"base\":\"/algorithms/advanced/quantum/\",\"collapsed\":true,\"items\":[{\"text\":\"量子比特\",\"link\":\"qubit\"},{\"text\":\"Deutsch算法\",\"link\":\"deutsch\"},{\"text\":\"Shor算法\",\"link\":\"shor\"},{\"text\":\"Grover搜索\",\"link\":\"grover\"}]},{\"text\":\"机器学习算法\",\"base\":\"/algorithms/advanced/ml/\",\"collapsed\":true,\"items\":[{\"text\":\"梯度下降优化\",\"link\":\"gradient-descent\"},{\"text\":\"决策树算法\",\"link\":\"decision-tree\"},{\"text\":\"聚类分析\",\"link\":\"clustering\"},{\"text\":\"支持向量机\",\"link\":\"svm\"}]}]},{\"text\":\"算法实战\",\"collapsed\":true,\"items\":[{\"text\":\"编程竞赛\",\"base\":\"/algorithms/practice/competitions/\",\"collapsed\":true,\"items\":[{\"text\":\"Codeforces策略\",\"link\":\"codeforces\"},{\"text\":\"LeetCode模式\",\"link\":\"leetcode\"},{\"text\":\"ACM竞赛技巧\",\"link\":\"acm\"},{\"text\":\"面试算法题\",\"link\":\"interview\"}]},{\"text\":\"实际问题\",\"base\":\"/algorithms/practice/real-world/\",\"collapsed\":true,\"items\":[{\"text\":\"路径规划\",\"link\":\"path-planning\"},{\"text\":\"调度算法\",\"link\":\"scheduling\"},{\"text\":\"数据压缩\",\"link\":\"compression\"},{\"text\":\"加密算法\",\"link\":\"encryption\"}]},{\"text\":\"代码优化\",\"base\":\"/algorithms/practice/code-optimization/\",\"collapsed\":true,\"items\":[{\"text\":\"编译器优化\",\"link\":\"compiler\"},{\"text\":\"缓存友好代码\",\"link\":\"cache-friendly\"},{\"text\":\"SIMD指令\",\"link\":\"simd\"},{\"text\":\"并行化实践\",\"link\":\"parallelization\"}]}]}]},\"/iot/\":{\"base\":\"/iot/\",\"items\":[{\"text\":\"物联网\",\"items\":[{\"text\":\"iot\",\"base\":\"/iot/cicd/jenkins/\",\"collapsed\":false,\"items\":[{\"text\":\"【手把手教你部署前端项目CI/CD】 第一篇 Docker 篇\",\"link\":\"docker\"},{\"text\":\"【手把手教你部署前端项目CI/CD】 第二篇 Jenkins freestyle 篇\",\"link\":\"freestyle\"},{\"text\":\"【手把手教你部署前端项目CI/CD】 第三篇 Jenkins pipeline 篇\",\"link\":\"pipeline\"}]}]}]},\"/thoughts/\":{\"base\":\"/thoughts/\",\"items\":[{\"text\":\"杂谈\",\"items\":[{\"text\":\"短片\",\"base\":\"/thoughts/shortMovie/\",\"collapsed\":false,\"items\":[{\"text\":\"推荐\",\"link\":\"recommend\"}]}]}]}},\"footer\":{\"message\":\"基于 MIT 许可发布\",\"copyright\":\"版权所有 © 2023-2025 王磊\"},\"docFooter\":{\"prev\":\"上一页\",\"next\":\"下一页\"},\"outline\":{\"level\":[2,3],\"label\":\"本页导航\"},\"lastUpdated\":{\"text\":\"更新于\",\"formatOptions\":{\"dateStyle\":\"full\",\"timeStyle\":\"medium\"}},\"notFound\":{\"title\":\"页面未找到\",\"quote\":\"但如果你不改变方向，并且继续寻找，你可能最终会到达你所前往的地方。\",\"linkLabel\":\"前往首页\",\"linkText\":\"带我回首页\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/wanglei1900\"},{\"icon\":{\"svg\":\"<svg width=\\\"150\\\" height=\\\"55\\\" id=\\\"layer_1\\\" data-name=\\\"layer 1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" viewBox=\\\"0 0 280 102.66\\\"><defs><style>.cls-1{fill:url(#gradient);}.cls-2{fill:#8dcefc;}.cls-3,.cls-4{fill:none;stroke-miterlimit:10;stroke-width:2px;}.cls-3{stroke:#457ab5;}.cls-4{stroke:url(#gradient_3);}.cls-5{fill:url(#gradient_2);}.cls-6{fill:#2e7acc;}.cls-7{fill:#e33e06;}.cls-8{fill:#8c8c8c;}</style><radialGradient id=\\\"gradient\\\" cx=\\\"49.22\\\" cy=\\\"-6550.95\\\" r=\\\"44.62\\\" gradientTransform=\\\"matrix(1, 0, 0, -0.07, 0, -359.49)\\\" gradientUnits=\\\"userSpaceOnUse\\\"><stop offset=\\\"0\\\" stop-color=\\\"#8c8c8c\\\"/><stop offset=\\\"0.13\\\" stop-color=\\\"#919191\\\" stop-opacity=\\\"0.95\\\"/><stop offset=\\\"0.32\\\" stop-color=\\\"#a0a0a0\\\" stop-opacity=\\\"0.83\\\"/><stop offset=\\\"0.54\\\" stop-color=\\\"#b8b8b8\\\" stop-opacity=\\\"0.61\\\"/><stop offset=\\\"0.78\\\" stop-color=\\\"#dadada\\\" stop-opacity=\\\"0.32\\\"/><stop offset=\\\"1\\\" stop-color=\\\"#fff\\\" stop-opacity=\\\"0\\\"/></radialGradient><radialGradient id=\\\"gradient_3\\\" cx=\\\"-147.55\\\" cy=\\\"-262.27\\\" r=\\\"23.26\\\" gradientTransform=\\\"matrix(0.95, -0.32, -0.32, -0.95, 121.5, -275.63)\\\" gradientUnits=\\\"userSpaceOnUse\\\"><stop offset=\\\"0\\\" stop-color=\\\"#fff\\\"/><stop offset=\\\"0.21\\\" stop-color=\\\"#fff\\\" stop-opacity=\\\"0.99\\\"/><stop offset=\\\"0.34\\\" stop-color=\\\"#fff\\\" stop-opacity=\\\"0.96\\\"/><stop offset=\\\"0.46\\\" stop-color=\\\"#fff\\\" stop-opacity=\\\"0.9\\\"/><stop offset=\\\"0.56\\\" stop-color=\\\"#fff\\\" stop-opacity=\\\"0.81\\\"/><stop offset=\\\"0.66\\\" stop-color=\\\"#fff\\\" stop-opacity=\\\"0.71\\\"/><stop offset=\\\"0.74\\\" stop-color=\\\"#fff\\\" stop-opacity=\\\"0.58\\\"/><stop offset=\\\"0.83\\\" stop-color=\\\"#fff\\\" stop-opacity=\\\"0.42\\\"/><stop offset=\\\"0.91\\\" stop-color=\\\"#fff\\\" stop-opacity=\\\"0.24\\\"/><stop offset=\\\"0.99\\\" stop-color=\\\"#fff\\\" stop-opacity=\\\"0.04\\\"/><stop offset=\\\"1\\\" stop-color=\\\"#fff\\\" stop-opacity=\\\"0\\\"/></radialGradient><radialGradient id=\\\"gradient_2\\\" cx=\\\"61.19\\\" cy=\\\"57.93\\\" r=\\\"54.56\\\" gradientUnits=\\\"userSpaceOnUse\\\"><stop offset=\\\"0\\\" stop-color=\\\"#7aacdf\\\"/><stop offset=\\\"0.27\\\" stop-color=\\\"#70a6dd\\\"/><stop offset=\\\"0.73\\\" stop-color=\\\"#5496d9\\\"/><stop offset=\\\"1\\\" stop-color=\\\"#408bd6\\\"/></radialGradient></defs><title>博客园logo</title><g id=\\\"layer_2\\\" data-name=\\\"layer 2\\\"><g id=\\\"layer_1-2\\\" data-name=\\\"layer 1-2\\\"><ellipse class=\\\"cls-1\\\" cx=\\\"49.22\\\" cy=\\\"99.44\\\" rx=\\\"44.62\\\" ry=\\\"3.22\\\"/><path class=\\\"cls-2\\\" d=\\\"M49.22,1A48.22,48.22,0,1,0,97.44,49.22,48.22,48.22,0,0,0,49.22,1ZM34,77.06A10.46,10.46,0,1,1,44.43,66.6,10.46,10.46,0,0,1,34,77.06Zm25.11-4a6.5,6.5,0,0,1-6.5-6.5c0-9.81-8.51-18.1-18.58-18.1a6.5,6.5,0,0,1,0-13c17.12,0,31.58,14.24,31.58,31.1A6.5,6.5,0,0,1,59.08,73.1ZM79.72,67l-.56,0a6.5,6.5,0,0,1-6.47-6C71.35,45.29,59.57,28.5,40.4,28.5a6.5,6.5,0,0,1,0-13C64,15.5,83.48,34.63,85.65,60A6.51,6.51,0,0,1,79.72,67Z\\\"/><circle class=\\\"cls-3\\\" cx=\\\"49.22\\\" cy=\\\"49.22\\\" r=\\\"48.22\\\"/><path class=\\\"cls-4\\\" d=\\\"M35.2,5.89c23.88-7.78,50,5.36,57.41,29.05\\\"/><path class=\\\"cls-5\\\" d=\\\"M49.22,4.6A44.62,44.62,0,1,0,93.84,49.22,44.62,44.62,0,0,0,49.22,4.6ZM34,77.06A10.46,10.46,0,1,1,44.43,66.6,10.46,10.46,0,0,1,34,77.06Zm25.11-4a6.5,6.5,0,0,1-6.5-6.5c0-9.81-8.51-18.1-18.58-18.1a6.5,6.5,0,0,1,0-13c17.12,0,31.58,14.24,31.58,31.1A6.5,6.5,0,0,1,59.08,73.1ZM79.72,67l-.56,0a6.5,6.5,0,0,1-6.47-6C71.35,45.29,59.57,28.5,40.4,28.5a6.5,6.5,0,0,1,0-13C64,15.5,83.48,34.63,85.65,60A6.51,6.51,0,0,1,79.72,67Z\\\"/><path class=\\\"cls-6\\\" d=\\\"M79.72,67l-.56,0a6.5,6.5,0,0,1-6.47-6,39.24,39.24,0,0,0-4.45-15,56.64,56.64,0,0,0-37-13.58A57,57,0,0,0,5.93,38.39,44.61,44.61,0,0,0,85.62,75a51.4,51.4,0,0,0-2.86-9A6.55,6.55,0,0,1,79.72,67ZM34,77.06A10.46,10.46,0,1,1,44.43,66.6,10.46,10.46,0,0,1,34,77.06Zm25.11-4a6.5,6.5,0,0,1-6.5-6.5c0-9.81-8.51-18.1-18.58-18.1a6.5,6.5,0,0,1,0-13c17.12,0,31.58,14.24,31.58,31.1A6.5,6.5,0,0,1,59.08,73.1Z\\\"/><path class=\\\"cls-7\\\" d=\\\"M115.08,24.88V10.24h4.26V24.88h6.06v4.2h-6.06v36h-4.26v-36H108.6v-4.2ZM150.84,47.8v-3H155v3h7.86v3.84H155V60.4c0,3.12-1.56,4.68-4.62,4.68h-6.6l-.9-4c2.1.18,4.14.3,6.06.3,1.2,0,1.86-.66,1.86-2V51.64h-26V47.8Zm-9-33.36V10.3H146v4.14h7a34.08,34.08,0,0,0-1.74-3.6l3.72-.6a39.19,39.19,0,0,1,1.56,4.2h5.16V18.1H146v4.14h13.6V44h-4V39.82H146V43.6h-4.14V39.82H132.3V44h-4V22.24h13.56V18.1H126.18V14.44ZM142,59.38l-2.7,2.7A56.61,56.61,0,0,0,131,54.34l2.64-2.52A58.52,58.52,0,0,1,142,59.38Zm-.12-29.58V25.6H132.3v4.2Zm0,7.08V32.8H132.3v4.08ZM146,29.8h9.6V25.6H146Zm0,7.08h9.6V32.8H146Z\\\"/><path class=\\\"cls-7\\\" d=\\\"M192.06,20.68c-.9,1.38-1.8,2.7-2.76,4h22.14v3.48a32.73,32.73,0,0,1-10.62,9.06,74.75,74.75,0,0,0,22,4.74l-1,3.9a70,70,0,0,1-25.5-6.42c-7.08,3.24-16,5.76-26.82,7.62l-1.62-3.84c9.66-1.56,17.7-3.54,24.06-6.06A54.93,54.93,0,0,1,183.48,31a57.2,57.2,0,0,1-7.5,5.64l-2.76-3.36a44.52,44.52,0,0,0,14.64-13.5ZM219.78,26H215.4V18.52h-40V26H171V14.62h22a39.15,39.15,0,0,0-2.22-4.2l4.74-.72c.72,1.44,1.38,3.12,2.1,4.92h22.14Zm-6.72,39.36h-4.2V62.74h-25.8v2.58h-4.2V46.54h34.2Zm-4.2-6.48v-8.4h-25.8v8.4ZM206.28,28.3h-20.1l-.18.18a53.6,53.6,0,0,0,10.38,6.72A36,36,0,0,0,206.28,28.3Z\\\"/><path class=\\\"cls-7\\\" d=\\\"M280,65.14h-4.32v-2.4H235.2v2.4h-4.32V12.82H280Zm-4.32-6.24V16.78H235.2V58.9Zm-4.2-26.34V36.4h-9.6V48.7c0,1.44.6,2.16,1.92,2.16H266a3.05,3.05,0,0,0,1.92-.54c.72-.42,1.14-2.52,1.38-6.24l3.6,1.2c-.48,4.44-1.08,7.14-1.92,8s-2.16,1.08-4.14,1.14H262.5a4.46,4.46,0,0,1-3.42-1.32,5,5,0,0,1-1.2-3.48V36.4h-5.7c-.54,4.92-1.68,8.7-3.48,11.46-2,3.12-5.22,5.52-9.42,7.32l-2-3.48a16.49,16.49,0,0,0,8.16-6.12,22.43,22.43,0,0,0,2.88-9.18H239.4V32.56Zm-3.4-10.26v3.84H242.82V22.3Z\\\"/><path class=\\\"cls-8\\\" d=\\\"M123.37,79a6.18,6.18,0,0,1,5.31,2.52l-1.5,1.38a4.32,4.32,0,0,0-3.69-1.9c-3.09,0-5,2.37-5,5.58s1.92,5.61,5,5.61a4.37,4.37,0,0,0,3.69-1.89l1.5,1.38a6.18,6.18,0,0,1-5.31,2.52c-4.32,0-7.23-3.3-7.23-7.62S119.05,79,123.37,79Z\\\"/><path class=\\\"cls-8\\\" d=\\\"M141.61,84.36c0-2.55-1.29-3.36-3.24-3.36a5.59,5.59,0,0,0-4.29,2.25V93.84h-2.25V79.35h2.25v2.1A7.22,7.22,0,0,1,139.24,79c3,0,4.62,1.53,4.62,4.68V93.84h-2.25Z\\\"/><path class=\\\"cls-8\\\" d=\\\"M148.36,73.83h2.25v7.71A6,6,0,0,1,155.5,79c3.78,0,6.45,3,6.45,7.62s-2.67,7.59-6.45,7.59a6.11,6.11,0,0,1-4.89-2.52v2.16h-2.25Zm6.57,18.36c2.94,0,4.68-2.37,4.68-5.58S157.87,81,154.93,81a5.39,5.39,0,0,0-4.32,2.34v6.57a5.36,5.36,0,0,0,4.32,2.28Z\\\"/><path class=\\\"cls-8\\\" d=\\\"M165.61,73.83h2.25v20h-2.25Z\\\"/><path class=\\\"cls-8\\\" d=\\\"M171.52,86.58c0-4.2,2.76-7.59,7.17-7.59s7.17,3.39,7.17,7.59-2.76,7.62-7.17,7.62S171.52,90.78,171.52,86.58Zm12,0c0-2.94-1.71-5.58-4.8-5.58s-4.83,2.64-4.83,5.58,1.74,5.61,4.83,5.61,4.77-2.64,4.77-5.61Z\\\"/><path class=\\\"cls-8\\\" d=\\\"M190.63,95.88a5.53,5.53,0,0,0,4.71,2c2.4,0,4.65-1.17,4.65-4.35V91.44A6.06,6.06,0,0,1,195.13,94c-3.78,0-6.45-2.82-6.45-7.5s2.64-7.5,6.45-7.5A6,6,0,0,1,200,81.54V79.35h2.25V93.42c0,4.8-3.36,6.3-6.9,6.3a7.39,7.39,0,0,1-5.85-2.16ZM200,83.34A5.34,5.34,0,0,0,195.67,81c-2.91,0-4.65,2.31-4.65,5.52S192.76,92,195.67,92A5.36,5.36,0,0,0,200,89.67Z\\\"/><path class=\\\"cls-8\\\" d=\\\"M206.65,90.3a6.54,6.54,0,0,0,4.77,2.07c2.22,0,3.42-1,3.42-2.4,0-1.59-1.77-2.1-3.72-2.58-2.46-.57-5.25-1.23-5.25-4.23,0-2.25,1.95-4.17,5.4-4.17a7.36,7.36,0,0,1,5.37,2.1l-1,1.56a5.62,5.62,0,0,0-4.32-1.83c-2,0-3.21.9-3.21,2.19s1.65,1.86,3.54,2.31c2.52.57,5.43,1.29,5.43,4.5,0,2.43-2,4.38-5.7,4.38a7.71,7.71,0,0,1-5.85-2.28Z\\\"/><path class=\\\"cls-8\\\" d=\\\"M221.89,90.84a1.65,1.65,0,1,1-1.65,1.65h0A1.66,1.66,0,0,1,221.89,90.84Z\\\"/><path class=\\\"cls-8\\\" d=\\\"M233.77,79a6.18,6.18,0,0,1,5.31,2.52l-1.5,1.38a4.32,4.32,0,0,0-3.69-1.9c-3.09,0-5,2.37-5,5.58s1.92,5.61,5,5.61a4.37,4.37,0,0,0,3.69-1.89l1.5,1.38a6.18,6.18,0,0,1-5.31,2.52c-4.32,0-7.23-3.3-7.23-7.62S229.45,79,233.77,79Z\\\"/><path class=\\\"cls-8\\\" d=\\\"M241.39,86.58c0-4.2,2.76-7.59,7.17-7.59s7.17,3.39,7.17,7.59S253,94.2,248.56,94.2,241.39,90.78,241.39,86.58Zm12,0c0-2.94-1.71-5.58-4.8-5.58s-4.83,2.64-4.83,5.58,1.74,5.61,4.83,5.61,4.77-2.64,4.77-5.61Z\\\"/><path class=\\\"cls-8\\\" d=\\\"M276.88,84c0-1.83-.81-3-2.67-3a5.07,5.07,0,0,0-3.84,2.22V93.84h-2.25V84c0-1.83-.78-3-2.67-3a5.09,5.09,0,0,0-3.81,2.25V93.84h-2.25V79.35h2.25v2.1A6.25,6.25,0,0,1,266.32,79a3.72,3.72,0,0,1,3.9,2.7,6.1,6.1,0,0,1,4.86-2.7c2.64,0,4.05,1.47,4.05,4.38V93.84h-2.25Z\\\"/></g></g></svg>\"},\"link\":\"https://www.cnblogs.com/wanglei1900\"},{\"icon\":\"github\",\"link\":\"https://vitepress.dev/zh\"}],\"returnToTopLabel\":\"回到顶部\",\"sidebarMenuLabel\":\"菜单\",\"darkModeSwitchLabel\":\"主题\",\"lightModeSwitchTitle\":\"切换到浅色模式\",\"darkModeSwitchTitle\":\"切换到深色模式\",\"skipToContentLabel\":\"跳转到内容\"},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>