import{_ as i,c as n,o as a,a7 as l}from"./chunks/framework.Dtft01Yp.js";const p="/img/cicd/%E6%8F%92%E4%BB%B6%E6%AD%A5%E9%AA%A41.png",e="/img/cicd/%E6%8F%92%E4%BB%B6%E6%AD%A5%E9%AA%A42.png",h="/img/cicd/SSH%E6%AD%A5%E9%AA%A41.png",t="/img/cicd/SSH%E6%AD%A5%E9%AA%A42.png",k="/img/cicd/SSH%E6%AD%A5%E9%AA%A43.png",r="/img/cicd/nodejs%E6%AD%A5%E9%AA%A41.png",d="/img/cicd/nodejs%E6%AD%A5%E9%AA%A42.png",c="/img/cicd/nodejs%E6%AD%A5%E9%AA%A43.png",o="/img/cicd/%E5%87%AD%E8%AF%81%E6%AD%A5%E9%AA%A41.png",g="/img/cicd/%E5%87%AD%E8%AF%81%E6%AD%A5%E9%AA%A42.png",F="/img/cicd/%E5%87%AD%E8%AF%81%E6%AD%A5%E9%AA%A43.png",b="/img/cicd/%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E6%AD%A5%E9%AA%A41.png",m="/img/cicd/%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E6%AD%A5%E9%AA%A42.png",y="/img/cicd/%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E6%AD%A5%E9%AA%A43.png",u="/img/cicd/%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E6%AD%A5%E9%AA%A44.png",E="/img/cicd/webhook%E6%AD%A5%E9%AA%A41.png",C="/img/cicd/webhook%E6%AD%A5%E9%AA%A42.png",A="/img/cicd/webhook%E6%AD%A5%E9%AA%A43.png",B="/img/cicd/webhook%E6%AD%A5%E9%AA%A44.png",D="/img/cicd/%E6%9E%84%E5%BB%BA%E7%8E%AF%E5%A2%83.png",_="/img/cicd/buildstep%E6%AD%A5%E9%AA%A41.png",v="/img/cicd/buildstep%E6%AD%A5%E9%AA%A42.png",x="/img/cicd/%E6%89%A7%E8%A1%8Cshell%E6%AD%A5%E9%AA%A41.png",q="/img/cicd/%E6%89%A7%E8%A1%8Cshell%E6%AD%A5%E9%AA%A42.png",f="/img/cicd/%E6%89%A7%E8%A1%8Cshell%E6%AD%A5%E9%AA%A43.png",j="/img/cicd/%E6%89%A7%E8%A1%8Cshell%E6%AD%A5%E9%AA%A44.png",S="/img/cicd/%E6%89%A7%E8%A1%8Cshell%E6%AD%A5%E9%AA%A45.png",w="/img/cicd/%E6%9E%84%E5%BB%BA%E5%90%8E%E6%AD%A5%E9%AA%A41.png",P="/img/cicd/%E6%9E%84%E5%BB%BA%E5%90%8E%E6%AD%A5%E9%AA%A42.png",J="/img/cicd/%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E6%AD%A5%E9%AA%A41.png",H="/img/cicd/%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E6%AD%A5%E9%AA%A42.png",z="/img/cicd/%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E6%AD%A5%E9%AA%A43.png",U=JSON.parse('{"title":"ğŸ¤– Jenkins","description":"","frontmatter":{},"headers":[],"relativePath":"devops/cicd/jenkins/freestyle.md","filePath":"devops/cicd/jenkins/freestyle.md","lastUpdated":1751620819000}'),N={name:"devops/cicd/jenkins/freestyle.md"};function T(R,s,$,G,I,M){return a(),n("div",null,s[0]||(s[0]=[l(`<h1 id="ğŸ¤–-jenkins" tabindex="-1">ğŸ¤– Jenkins <a class="header-anchor" href="#ğŸ¤–-jenkins" aria-label="Permalink to &quot;ğŸ¤– Jenkins&quot;">â€‹</a></h1><blockquote><p>Jenkinsæ˜¯ä¸€ä¸ªå¼€æºçš„è‡ªåŠ¨åŒ–æœåŠ¡å™¨ï¼Œç”¨äºæ”¯æŒè½¯ä»¶å¼€å‘ä¸­çš„æŒç»­é›†æˆä¸æŒç»­éƒ¨ç½²ï¼ˆCI/CDï¼‰ã€‚å®ƒæ˜¯ä¸€ä¸ªè‡ªç”±åŠå¼€æºçš„è‡ªåŠ¨åŒ–å·¥å…·ï¼Œæä¾›äº†å‹å¥½çš„æ“ä½œç•Œé¢ï¼Œå…è®¸å¼€å‘å›¢é˜Ÿè‡ªåŠ¨åŒ–åœ°æ‰§è¡Œå„ç§ä»»åŠ¡ï¼Œå¦‚ä»£ç æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²ç­‰ã€‚Jenkinsç”±Javaè¯­è¨€ç¼–å†™ï¼Œå¯åœ¨Tomcatç­‰æµè¡Œçš„servletå®¹å™¨ä¸­è¿è¡Œï¼Œä¹Ÿå¯ç‹¬ç«‹è¿è¡Œã€‚</p></blockquote><h2 id="_1-jenkins" tabindex="-1">1 Jenkins <a class="header-anchor" href="#_1-jenkins" aria-label="Permalink to &quot;1 Jenkins&quot;">â€‹</a></h2><p>å‰ç½®çŸ¥è¯†ï¼š</p><h3 id="_1-1-jenkins-æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1">1.1 Jenkins æ ¸å¿ƒæ¦‚å¿µ <a class="header-anchor" href="#_1-1-jenkins-æ ¸å¿ƒæ¦‚å¿µ" aria-label="Permalink to &quot;1.1 Jenkins æ ¸å¿ƒæ¦‚å¿µ&quot;">â€‹</a></h3><ul><li>å¼€æºæ€§ï¼šJenkinsæ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç è½¯ä»¶ï¼Œä»»ä½•äººéƒ½å¯ä»¥æŸ¥çœ‹å…¶æºä»£ç ã€è¿›è¡Œä¿®æ”¹å’Œè´¡çŒ®ã€‚è¿™ä½¿å¾—Jenkinsèƒ½å¤Ÿå…è´¹æä¾›ï¼Œå¹¶ç¡®ä¿å…¶é•¿æœŸçš„å‘å±•å’Œç»´æŠ¤ã€‚</li><li>æŒç»­é›†æˆä¸æŒç»­éƒ¨ç½²ï¼šJenkinsä¸ºå¼€å‘å›¢é˜Ÿæä¾›äº†ä¸€ä¸ªå¹³å°ï¼Œä½¿å…¶èƒ½å¤Ÿè‡ªåŠ¨åŒ–åœ°æ‰§è¡Œæ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²ç­‰ä»»åŠ¡ã€‚è¿™ç§è‡ªåŠ¨åŒ–ä½¿å¾—å¼€å‘æµç¨‹æ›´ä¸ºæµç•…ï¼Œå¯ä»¥å¿«é€Ÿåœ°å‘ç°å’Œä¿®å¤é—®é¢˜ï¼Œä»è€ŒåŠ å¿«è½¯ä»¶çš„å‘å¸ƒé€Ÿåº¦ã€‚</li><li>ä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€ç³»ç»Ÿï¼šJenkinsæ‹¥æœ‰ä¸€ä¸ªå¼ºå¤§çš„æ’ä»¶ç”Ÿæ€ç³»ç»Ÿï¼Œæ¶µç›–äº†ä»æºä»£ç ç®¡ç†ã€æ„å»ºã€æµ‹è¯•åˆ°éƒ¨ç½²çš„å„ä¸ªç¯èŠ‚ã€‚è¿™äº›æ’ä»¶å…è®¸ç”¨æˆ·æ ¹æ®ç‰¹å®šéœ€æ±‚å®šåˆ¶Jenkinsï¼Œä»¥æ»¡è¶³ä¸åŒçš„è‡ªåŠ¨åŒ–éœ€æ±‚ã€‚</li><li>è·¨å¹³å°æ”¯æŒï¼šJenkinså¯ä»¥åœ¨Windowsã€Linuxå’ŒMac OSç­‰æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œï¼Œå…·æœ‰å¾ˆå¼ºçš„è·¨å¹³å°æ”¯æŒèƒ½åŠ›ã€‚</li></ul><h3 id="_1-2-jenkins-ä¼˜ç‚¹" tabindex="-1">1.2 Jenkins ä¼˜ç‚¹ <a class="header-anchor" href="#_1-2-jenkins-ä¼˜ç‚¹" aria-label="Permalink to &quot;1.2 Jenkins ä¼˜ç‚¹&quot;">â€‹</a></h3><ol><li>æé«˜å¼€å‘æ•ˆç‡ï¼š <ul><li>Jenkins è‡ªåŠ¨åŒ–äº†æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²ç­‰ä»»åŠ¡ï¼Œå‡å°‘äº†äººå·¥æ“ä½œçš„æ—¶é—´å’Œé”™è¯¯ï¼Œä½¿å¼€å‘å›¢é˜Ÿèƒ½å¤Ÿæ›´ä¸“æ³¨äºç¼–å†™é«˜è´¨é‡çš„ä»£ç ã€‚</li><li>è‡ªåŠ¨åŒ–æµç¨‹ç¼©çŸ­äº†åé¦ˆå‘¨æœŸï¼Œä½¿é—®é¢˜èƒ½å¤Ÿæ›´å¿«åœ°è¢«å‘ç°å’Œä¿®å¤ã€‚</li></ul></li><li>å¢å¼ºè½¯ä»¶è´¨é‡ï¼š <ul><li>æŒç»­çš„é›†æˆå’Œæµ‹è¯•æœ‰åŠ©äºåœ¨æ—©æœŸå‘ç°å¹¶ä¿®å¤é—®é¢˜ï¼Œé¿å…é—®é¢˜ç´¯ç§¯åˆ°åæœŸé€ æˆæ›´å¤§çš„å½±å“ã€‚</li><li>Jenkins æ”¯æŒå¤šç§æµ‹è¯•æ¡†æ¶ï¼Œå¯ä»¥æ‰§è¡Œå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ç­‰å¤šç§ç±»å‹çš„æµ‹è¯•ï¼Œç¡®ä¿è½¯ä»¶çš„å…¨é¢è´¨é‡ã€‚</li></ul></li><li>æ”¯æŒå¿«é€Ÿè¿­ä»£ï¼š <ul><li>Jenkins ä½¿å¾—è½¯ä»¶å‘å¸ƒè¿‡ç¨‹æ›´åŠ é«˜æ•ˆå’Œçµæ´»ï¼Œæ”¯æŒé¢‘ç¹çš„å‘å¸ƒå’Œè¿­ä»£ï¼Œæ»¡è¶³ç°ä»£è½¯ä»¶å¼€å‘å¿«é€Ÿå˜åŒ–çš„éœ€æ±‚ã€‚</li><li>è‡ªåŠ¨åŒ–éƒ¨ç½²å‡å°‘äº†äººä¸ºé”™è¯¯ï¼Œæé«˜äº†éƒ¨ç½²çš„å¯é æ€§å’Œç¨³å®šæ€§ã€‚</li></ul></li><li>æ˜“äºé…ç½®å’Œæ‰©å±•ï¼š <ul><li>Jenkins æä¾›äº†ä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€ç³»ç»Ÿï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©å’Œå®‰è£…å„ç§æ’ä»¶æ¥æ‰©å±•å…¶åŠŸèƒ½ã€‚</li><li>é€šè¿‡ç®€å•çš„é…ç½®å’Œè„šæœ¬ç¼–å†™ï¼Œç”¨æˆ·å¯ä»¥è½»æ¾å®šä¹‰è‡ªå·±çš„æ„å»ºå’Œéƒ¨ç½²æµç¨‹ã€‚</li></ul></li><li>ç¤¾åŒºæ”¯æŒå’Œæ–‡æ¡£ä¸°å¯Œï¼š <ul><li>Jenkins æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ‹¥æœ‰åºå¤§çš„ç”¨æˆ·ç¤¾åŒºå’Œæ´»è·ƒçš„å¼€å‘è€…è´¡çŒ®è€…ï¼Œç”¨æˆ·å¯ä»¥è·å¾—åŠæ—¶çš„æŠ€æœ¯æ”¯æŒå’Œè§£å†³æ–¹æ¡ˆã€‚</li><li>Jenkins çš„å®˜æ–¹æ–‡æ¡£å’Œç¤¾åŒºèµ„æºä¹Ÿéå¸¸ä¸°å¯Œï¼Œæœ‰åŠ©äºç”¨æˆ·å¿«é€Ÿä¸Šæ‰‹å’Œè§£å†³é—®é¢˜ã€‚</li></ul></li><li>è·¨å¹³å°æ”¯æŒï¼š <ul><li>Jenkins å¯ä»¥åœ¨å¤šç§æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œï¼ŒåŒ…æ‹¬Linuxã€Windowså’ŒMac OSç­‰ï¼Œæä¾›äº†è‰¯å¥½çš„è·¨å¹³å°æ”¯æŒèƒ½åŠ›ã€‚</li></ul></li></ol><br><br><br><h2 id="_2-jenkins-å®‰è£…" tabindex="-1">2 Jenkins å®‰è£… <a class="header-anchor" href="#_2-jenkins-å®‰è£…" aria-label="Permalink to &quot;2 Jenkins å®‰è£…&quot;">â€‹</a></h2><h3 id="_2-1-å‰ç½®å‡†å¤‡å·¥ä½œ" tabindex="-1">2.1 å‰ç½®å‡†å¤‡å·¥ä½œ <a class="header-anchor" href="#_2-1-å‰ç½®å‡†å¤‡å·¥ä½œ" aria-label="Permalink to &quot;2.1 å‰ç½®å‡†å¤‡å·¥ä½œ&quot;">â€‹</a></h3><p><a href="./docker">ğŸš€ æ‰‹æŠŠæ‰‹æ•™ä½ éƒ¨ç½²å‰ç«¯é¡¹ç›®CI/CD ç¬¬ä¸€ç¯‡ Docker ç¯‡ </a></p><h4 id="_2-1-1-git-å®‰è£…" tabindex="-1">2.1.1 git å®‰è£… <a class="header-anchor" href="#_2-1-1-git-å®‰è£…" aria-label="Permalink to &quot;2.1.1 git å®‰è£…&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># enter åˆ°åº•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹gitç‰ˆæœ¬å· éªŒè¯gitå®‰è£…æˆåŠŸ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># git version 1.8.3.1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_2-1-2-é…ç½®ssh" tabindex="-1">2.1.2 é…ç½®SSH <a class="header-anchor" href="#_2-1-2-é…ç½®ssh" aria-label="Permalink to &quot;2.1.2 é…ç½®SSH&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Enteråˆ°åº•ï¼Œæœ€ç»ˆä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># /root/.ssh/authorized_keys å…è®¸æ— å¯†ç ç™»å½•çš„å…¬é’¥åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># /root/.ssh/id_rsa ç§é’¥æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># /root/.ssh/id_rsa.pub å…¬é’¥æ–‡ä»¶  æ³¨æ„è¯¥æ–‡ä»¶é‡Œçš„å†…å®¹æ˜¯æ¥ä¸‹æ¥è¦ç”¨çš„</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-keygen</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;root&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¤åˆ¶å…¬é’¥æ–‡ä»¶çš„å†…å®¹ï¼Œæ·»åŠ åˆ°GitHub çš„ SSH keys æˆ– ä»»æ„å…¶ä»–è¿œç¨‹ä»“åº“</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/.ssh/id_rsa.pub</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_2-1-3-è¿œç¨‹ä»“åº“æ·»åŠ -ssh-keys" tabindex="-1">2.1.3 è¿œç¨‹ä»“åº“æ·»åŠ  SSH keys <a class="header-anchor" href="#_2-1-3-è¿œç¨‹ä»“åº“æ·»åŠ -ssh-keys" aria-label="Permalink to &quot;2.1.3 è¿œç¨‹ä»“åº“æ·»åŠ  SSH keys&quot;">â€‹</a></h4><p>ï¼ˆä»¥githubä¸ºä¾‹ï¼‰</p><ol><li>ç‚¹å‡»ç”¨æˆ·å¤´åƒï¼Œè¿›å…¥ settings é¡µé¢</li><li>ç‚¹å‡»å·¦ä¾§èœå•ï¼Œè¿›å…¥ SSH and GPG keys</li><li>ç‚¹å‡» new SSH keys</li><li>title =&gt; <code>&lt;ä½ çš„ip SSH keys&gt;</code> ä»…ä¸ºç¤ºä¾‹å‘½å</li><li>key type =&gt; é»˜è®¤é€‰æ‹©Authentication Keys</li><li>keys =&gt; é»è´´ä¸Šé¢å…¬é’¥æ–‡ä»¶é‡Œçš„å†…å®¹åˆ°è¿™è¾¹ï¼Œä¿å­˜å®Œæˆã€‚</li></ol><h4 id="_2-1-4-æœåŠ¡å™¨æ‹‰å–é¡¹ç›®" tabindex="-1">2.1.4 æœåŠ¡å™¨æ‹‰å–é¡¹ç›® <a class="header-anchor" href="#_2-1-4-æœåŠ¡å™¨æ‹‰å–é¡¹ç›®" aria-label="Permalink to &quot;2.1.4 æœåŠ¡å™¨æ‹‰å–é¡¹ç›®&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># root ç›®å½•æ–°å»º homeæ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudu</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/home</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿›å…¥ home æ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/home</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…ç™»å½•æ‹‰å–å‰ç«¯é¡¹ç›®æºç ,æ³¨æ„æœåŠ¡å™¨é¦–æ¬¡æ‹‰å–githubä¼šæç¤ºç¡®è®¤æŒ‡çº¹ï¼Œç‚¹å‡»ç¡®å®šã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŒ‡çº¹ä¸€èˆ¬å­˜äº ~/.ssh/known_hosts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git@github.com:wanglei1900/React18_Vite4_Admin.git</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_2-2-å®‰è£…-nginx-å’Œ-jenkins-é•œåƒ" tabindex="-1">2.2 å®‰è£… nginx å’Œ jenkins é•œåƒ <a class="header-anchor" href="#_2-2-å®‰è£…-nginx-å’Œ-jenkins-é•œåƒ" aria-label="Permalink to &quot;2.2 å®‰è£… nginx å’Œ jenkins é•œåƒ&quot;">â€‹</a></h3><p>docker æ‹‰å–é•œåƒ</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‹‰å–nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‹‰å–jenkins</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenkins/jenkins:lts</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹é•œåƒæ˜¯å¦å®‰è£…æˆåŠŸ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> images</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># REPOSITORY        TAG       IMAGE ID       CREATED         SIZE</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># nginx             latest    fffffc90d343   2 weeks ago     188MB</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># jenkins/jenkins   lts       5dea1f4edf69   3 weeks ago     470MB</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># hello-world       latest    d2c94e258dcb   14 months ago   13.3kB</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>åˆ›å»ºdocker ç›¸å…³ç›®å½•</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºdockerçš„ç›¸å…³ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /docker/{compose,jenkins_home,nginx/conf,html/origin/{master,dev}}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºdocker-compose.ymlé…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /docker/compose</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…·ä½“é…ç½®å†…å®¹è§ä¸‹é¢</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker-compose.yml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºnginx.confé…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /docker/nginx/conf</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…·ä½“é…ç½®å†…å®¹è§ä¸‹é¢</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx.conf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>æœ€ç»ˆæ–‡ä»¶ç»“æ„</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker-compose.yml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker-composeé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> html</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">             //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> å„ç¯å¢ƒä»£ç ç›®å½•</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">å®é™…é¡¹ç›®å¯èƒ½ä¸åœ¨åŒä¸€ç›®å½•</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">				+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">						+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> master</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	 //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> masteråˆ†æ”¯ä»£ç ï¼Œåç»­ä¼šè‡ªåŠ¨åˆ›å»º</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">						+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">			 //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> devåˆ†æ”¯ä»£ç ï¼Œåç»­ä¼šè‡ªåŠ¨åˆ›å»º</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenkins_home</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Jenkinså·¥ç¨‹ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginxå·¥ç¨‹ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx.conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginxé…ç½®</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>nginx.confé…ç½®</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># nginx.conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  nginx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">worker_processes</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error_log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  /var/log/nginx/error.log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> warn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pid</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        /var/run/nginx.pid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">events</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    worker_connections</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">http</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       /etc/nginx/mime.types</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    default_type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  application/octet-stream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    log_format</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  main</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    access_log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  /var/log/nginx/access.log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    sendfile</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #tcp_nopush     on;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    keepalive_timeout</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  65</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    gzip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		#è¿™é‡Œä¸¤ä¸ªç¯å¢ƒä½¿ç”¨ä¸€ä¸ªnginx.confæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥å•ç‹¬åˆ†å¼€æ¥</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #proç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        #ç›‘å¬çš„ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        listen</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  8001</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        server_name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  localhost</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        #è®¾ç½®æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#        access_log  logs/dev.access.log  main;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        #å®šä½åˆ°index.html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">           location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               #linuxä¸‹HTMLæ–‡ä»¶å¤¹,å°±æ˜¯ä½ çš„å‰ç«¯é¡¹ç›®æ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">               root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  /usr/share/nginx/html/origin/master/dist</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#               root  /home/html/dev/dist;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               #è¾“å…¥ç½‘å€ï¼ˆserver_nameï¼športï¼‰åï¼Œé»˜è®¤çš„è®¿é—®é¡µé¢</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">               index</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  index.html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">               try_files</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $uri $uri</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /index.html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #devç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        #ç›‘å¬çš„ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        listen</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  8002</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        server_name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  localhost</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        #è®¾ç½®æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#        access_log  logs/sit.access.log  main;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        #å®šä½åˆ°index.html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">           location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               #linuxä¸‹HTMLæ–‡ä»¶å¤¹,å°±æ˜¯ä½ çš„å‰ç«¯é¡¹ç›®æ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">               root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  /usr/share/nginx/html/origin/dev/dist</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#               root  /home/html/dev/dist;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               #è¾“å…¥ç½‘å€ï¼ˆserver_nameï¼športï¼‰åï¼Œé»˜è®¤çš„è®¿é—®é¡µé¢</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">               index</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  index.html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">               try_files</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $uri $uri</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /index.html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    include /etc/nginx/conf.d/*.conf;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br></div></div><p>docker-compose.ymlé…ç½®</p><p>8080:å¯¹åº”jenkins å®¹å™¨ 8001:å¯¹åº”masterç¯å¢ƒ å®¹å™¨ 8002:å¯¹åº”devç¯å¢ƒ å®¹å™¨</p><ul><li>docker_jenkins æ˜¯ä¸€ä¸ªå®šä¹‰çš„æœåŠ¡åç§°ã€‚</li><li>user: root æŒ‡å®šäº† Jenkins å®¹å™¨ä½¿ç”¨ root æƒé™ã€‚</li><li>restart: always è¡¨ç¤ºå®¹å™¨æ€»æ˜¯åœ¨é€€å‡ºæ—¶é‡å¯ã€‚</li><li>image: jenkins/jenkins:lts æŒ‡å®šäº† Jenkins é•œåƒåŠå…¶ç‰ˆæœ¬ã€‚</li><li>container_name: jenkins æ˜¯å®¹å™¨çš„åç§°ã€‚</li><li>ports å®šä¹‰äº†å®¹å™¨å†…å¤–ç«¯å£çš„æ˜ å°„ã€‚</li><li>volumes å®šä¹‰äº†ä¸»æœºæ–‡ä»¶ç³»ç»Ÿè·¯å¾„ä¸å®¹å™¨å†…è·¯å¾„çš„æŒ‚è½½å…³ç³»ã€‚</li><li>image: nginxæŒ‡å®šäº† Nginx é•œåƒã€‚</li><li>container_name: nginx_dev æ˜¯å®¹å™¨çš„åç§°ã€‚</li></ul><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ–°ç‰ˆdocker-composeä¸ç”¨å†™è‡ªåŠ¨å¼•ç”¨æœ€æ–°ç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># version: &#39;3&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">networks:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  frontend:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    external:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">services:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                                      # å®¹å™¨</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  docker_jenkins:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    user:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                                 # rootæƒé™</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    restart:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> always</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                            # é‡å¯æ–¹å¼</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    image:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenkins/jenkins:lts</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                 # ä½¿ç”¨çš„é•œåƒ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    container_name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenkins</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    # å®¹å™¨åç§°</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    environment:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TZ=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;JENKINS_OPTS=--prefix=/jenkins_home&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ## è‡ªå®šä¹‰ jenkins è®¿é—®å‰ç¼€ï¼ˆä¸Šä¸‹æ–‡contextï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ports:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                                     # å¯¹å¤–æš´éœ²çš„ç«¯å£å®šä¹‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8080:8080</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 50000:50000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    volumes:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                                   # å·æŒ‚è½½è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /docker/jenkins_home/:/var/jenkins_home</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # æŒ‚è½½åˆ°å®¹å™¨å†…çš„jenkins_homeç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/bin/docker-compose:/usr/local/bin/docker-compose</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  docker_nginx_pro:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                            # nginx-proç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    restart:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> always</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    image:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    container_name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx_pro</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ports:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8001:8001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    volumes:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /docker/nginx/conf/nginx.conf:/etc/nginx/nginx.conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /docker/html:/usr/share/nginx/html</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  	 # å®¿ä¸»æœº/docker/html æ˜ å°„dockerå®¹å™¨å†…çš„/usr/share/nginx/html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /docker/nginx/logs:/var/log/nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  docker_nginx_dev:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                            # nginx-devç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    restart:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> always</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    image:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    container_name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx_dev</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ports:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8002:8002</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    volumes:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /docker/nginx/conf/nginx.conf:/etc/nginx/nginx.conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /docker/html:/usr/share/nginx/html</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 		 # å®¿ä¸»æœº/docker/html æ˜ å°„dockerå®¹å™¨å†…çš„/usr/share/nginx/html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /docker/nginx/logs:/var/log/nginx</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h3 id="_2-3-å¯åŠ¨docker" tabindex="-1">2.3 å¯åŠ¨docker <a class="header-anchor" href="#_2-3-å¯åŠ¨docker" aria-label="Permalink to &quot;2.3 å¯åŠ¨docker&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯åŠ¨docker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯åŠ¨docker-compose</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨docker-compose.ymlé…ç½®æ–‡ä»¶å¯åŠ¨ï¼Œæ‰€ä»¥ä¸éœ€è¦å¦å¤–æ‰‹åŠ¨åˆ›å»ºå®¹å™¨é‡Œï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä½¿ç”¨docker-compose.ymlé…ç½®æ–‡ä»¶çš„åŸå› </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /docker/compose/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker-compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å‡ºä»¥ä¸‹å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># WARN[0000] /docker/compose/docker-compose.yml: \`version\` is obsolete</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># NAME        IMAGE                 COMMAND                   SERVICE            CREATED          STATUS          PORTS</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># jenkins     jenkins/jenkins:lts   &quot;/usr/bin/tini -- /uâ€¦&quot;   docker_jenkins     16 seconds ago   Up 15 seconds   0.0.0.0:8080-&gt;8080/tcp, :::8080-&gt;8080/tcp, 0.0.0.0:50000-&gt;50000/tcp, :::50000-&gt;50000/tcp</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># nginx_pro   nginx                 &quot;/docker-entrypoint.â€¦&quot;   docker_nginx_pro   16 seconds ago   Up 15 seconds   80/tcp, 0.0.0.0:8001-&gt;8001/tcp, :::8001-&gt;8001/tcp</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># nginx_dev   nginx                 &quot;/docker-entrypoint.â€¦&quot;   docker_nginx_dev   16 seconds ago   Up 15 seconds   80/tcp, 0.0.0.0:8002-&gt;8002/tcp, :::8002-&gt;8002/tcp</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_2-4-æ£€æŸ¥nginxé…ç½®" tabindex="-1">2.4 æ£€æŸ¥nginxé…ç½® <a class="header-anchor" href="#_2-4-æ£€æŸ¥nginxé…ç½®" aria-label="Permalink to &quot;2.4 æ£€æŸ¥nginxé…ç½®&quot;">â€‹</a></h3><p>æµ‹è¯•nginxé…ç½®æ˜¯å¦æ­£ç¡®</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç›®å½•ä¸‹åˆ›å»ºindex.htmlæ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /docker/html/origin/dev/dist</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é»è´´ä¸‹é¢çš„htmlå†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.html</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">doctype</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;en&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> charset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;viewport&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Document&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;welcome to Nginx&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>æµè§ˆå™¨æ‰“å¼€ <code>ip:8001</code> å¯ä»¥çœ‹åˆ°welcome to Nginx é¡µé¢ï¼Œè¯æ˜nginxé…ç½®æ­£ç¡®ã€‚</p><h3 id="_2-5-ç™»å½•jenkins-webç«¯" tabindex="-1">2.5 ç™»å½•jenkins webç«¯ <a class="header-anchor" href="#_2-5-ç™»å½•jenkins-webç«¯" aria-label="Permalink to &quot;2.5 ç™»å½•jenkins webç«¯&quot;">â€‹</a></h3><ol><li>ç™»å½• <code>æœåŠ¡å™¨åœ°å€:8080/jenkins_home</code> è¿›å…¥jenkins çš„webç«¯</li><li>å»æœåŠ¡å™¨ä¸Š <code>vim /docker/jenkins_home/secrets/initialAdminPassword</code> å¤åˆ¶åˆå§‹å¯†ç </li><li>å›åˆ°jenkins çš„webç«¯ï¼Œè¾“å…¥åˆå§‹å¯†ç ã€‚</li><li>ç™»å½•åï¼Œå®‰è£…æ¨èçš„æ’ä»¶ï¼ˆä¸è¦é€‰æ‹©è‡ªå®šä¹‰æ’ä»¶ï¼‰ã€‚</li><li>æ³¨å†Œç®¡ç†å‘˜è´¦å·å®Œæˆç™»å½•</li></ol><br><br><br><h2 id="_3-jenkins-é…ç½®" tabindex="-1">3 Jenkins é…ç½® <a class="header-anchor" href="#_3-jenkins-é…ç½®" aria-label="Permalink to &quot;3 Jenkins é…ç½®&quot;">â€‹</a></h2><p>ç¬¬ä¸€éæ“ä½œï¼Œå»ºè®®å®Œå…¨ç…§æŠ„ã€‚åé¢å†é‡åˆ°åœ¨è‡ªå·±æ‹“å±•</p><h3 id="_3-1-å®‰è£…å¿…è¦æ’ä»¶" tabindex="-1">3.1 å®‰è£…å¿…è¦æ’ä»¶ <a class="header-anchor" href="#_3-1-å®‰è£…å¿…è¦æ’ä»¶" aria-label="Permalink to &quot;3.1 å®‰è£…å¿…è¦æ’ä»¶&quot;">â€‹</a></h3><p>dashbord =&gt; Manage Jenkinsï¼ˆç³»ç»Ÿç®¡ç†ï¼‰ =&gt; pluginï¼ˆæ’ä»¶ï¼‰ =&gt; Available plugins</p><ol><li>local (å¦‚æœç•Œé¢æ˜¯å…¨è‹±æ–‡è¿˜éœ€è¦å®‰è£…ä¸­æ–‡æ’ä»¶,å¦‚æœå·²ç»æœ‰éƒ¨åˆ†ä¸­æ–‡è¯·è·³è¿‡è¿™ä¸ªæ’ä»¶)</li><li>Publish Over SSH é…ç½®è¿œç¨‹æœåŠ¡å™¨</li><li>NodeJS æœåŠ¡ç«¯æ‰“åŒ…</li><li>Git Parameter å‚æ•°åŒ–æ„å»º</li></ol><p><img src="`+p+'" alt="æ’ä»¶æ­¥éª¤1" loading="lazy"></p><p><img src="'+e+'" alt="æ’ä»¶æ­¥éª¤2" loading="lazy"></p><h3 id="_3-2-publish-over-ssh-é…ç½®è¿œç¨‹æœåŠ¡å™¨" tabindex="-1">3.2 Publish Over SSH é…ç½®è¿œç¨‹æœåŠ¡å™¨ <a class="header-anchor" href="#_3-2-publish-over-ssh-é…ç½®è¿œç¨‹æœåŠ¡å™¨" aria-label="Permalink to &quot;3.2 Publish Over SSH é…ç½®è¿œç¨‹æœåŠ¡å™¨&quot;">â€‹</a></h3><p>dashbord =&gt; Manage Jenkinsï¼ˆç³»ç»Ÿç®¡ç†ï¼‰ =&gt; ç³»ç»Ÿé…ç½® =&gt; ctrl F <code>Publish over SSH</code></p><ol><li>æ‰¾åˆ°SSH Servers å¹¶æ–°å¢</li><li>å¡«å†™ name è‡ªå®šä¹‰å¡«å†™åç§°ï¼ˆç¤ºä¾‹ï¼šjenkins_nodeï¼‰</li><li>å¡«å†™ Hostname æœåŠ¡å™¨ipåœ°å€</li><li>å¡«å†™ Username æœåŠ¡å™¨ç™»å½•åç§°</li><li>å¡«å†™ Remote Directory ç™»å½•åè®¿é—®çš„åœ°å€</li><li>ç‚¹å‡» é«˜çº§ å¼¹å‡ºé¢å¤–é…ç½®</li><li>å‹¾é€‰ Use password authentication, or use a different keyã€‚</li><li>å‡ºç° Passphrase / Passwordï¼Œè¾“å…¥æœåŠ¡å™¨ç™»å½•å¯†ç </li><li>æ£€æŸ¥é»˜è®¤port æ˜¯å¦ä¸º22 ã€‚ä¸€èˆ¬ä¸ç”¨ä¿®æ”¹</li><li>ç‚¹å‡» Test Configurationï¼Œæ˜¾ç¤ºsuccessåˆ™ jenkins é…ç½®SSHè¿œç¨‹æœåŠ¡å™¨æˆåŠŸ</li><li>ç‚¹å‡» åº”ç”¨æŒ‰é’® ç‚¹å‡» ä¿å­˜æŒ‰é’®</li></ol><p><img src="'+h+'" alt="SSHæ­¥éª¤1" loading="lazy"></p><p><img src="'+t+'" alt="SSHæ­¥éª¤2" loading="lazy"></p><p><img src="'+k+'" alt="SSHæ­¥éª¤3" loading="lazy"></p><h3 id="_3-3-nodejsé…ç½®" tabindex="-1">3.3 NodeJSé…ç½® <a class="header-anchor" href="#_3-3-nodejsé…ç½®" aria-label="Permalink to &quot;3.3 NodeJSé…ç½®&quot;">â€‹</a></h3><p>dashbord =&gt; Manage Jenkinsï¼ˆç³»ç»Ÿç®¡ç†ï¼‰ =&gt; å…¨å±€å·¥å…·é…ç½® =&gt; ctrl F <code>NodeJS å®‰è£…</code></p><ol><li>æ–°å¢ NodeJS</li><li>å¡«å†™ åˆ«å è‡ªå®šä¹‰å¡«å†™åç§°ï¼Œç…§æŠ„ä¸‹é¢çš„ç‰ˆæœ¬å·ï¼ˆç¤ºä¾‹ï¼šNodeJS 22.4.1ï¼‰</li><li>é€‰æ‹© NodeJSç‰ˆæœ¬ï¼Œä¹‹å‰å·²ç»ä¸‹è½½å¥½æ’ä»¶ï¼Œè¿™é‡Œåº”è¯¥è‡ªåŠ¨è·³å‡ºæ¥çš„</li><li>ç‚¹å‡» åº”ç”¨æŒ‰é’® ç‚¹å‡» ä¿å­˜æŒ‰é’®</li></ol><p><img src="'+r+'" alt="nodejsæ­¥éª¤1" loading="lazy"></p><p><img src="'+d+'" alt="nodejsæ­¥éª¤2" loading="lazy"></p><p><img src="'+c+'" alt="nodejsæ­¥éª¤3" loading="lazy"></p><h3 id="_3-4-å‡­æ®é…ç½®" tabindex="-1">3.4 å‡­æ®é…ç½® <a class="header-anchor" href="#_3-4-å‡­æ®é…ç½®" aria-label="Permalink to &quot;3.4 å‡­æ®é…ç½®&quot;">â€‹</a></h3><p>dashbord =&gt; Manage Jenkinsï¼ˆç³»ç»Ÿç®¡ç†ï¼‰ =&gt; å‡­æ®ç®¡ç† =&gt; å…¨å±€ æŒ‰é’®ä¸‹æ‹‰é€‰æ‹© æ·»åŠ å‡­æ®</p><p>æ­¤å¤„ä»¥æ·»åŠ githubä»“åº“ä¸ºä¾‹</p><ol><li>å¡«å†™ ç”¨æˆ·å githubç”¨æˆ·å</li><li>å¡«å†™ å¯†ç  githubå¯†ç </li><li>å¡«å†™ æè¿° github ç™»å½•å‡­è¯</li><li>ç‚¹å‡» åˆ›å»º æŒ‰é’®</li></ol><p><img src="'+o+'" alt="å‡­è¯æ­¥éª¤1" loading="lazy"></p><p><img src="'+g+'" alt="å‡­è¯æ­¥éª¤2" loading="lazy"></p><p><img src="'+F+'" alt="å‡­è¯æ­¥éª¤3" loading="lazy"></p><h3 id="_3-5-åˆ›å»ºä»»åŠ¡" tabindex="-1">3.5 åˆ›å»ºä»»åŠ¡ <a class="header-anchor" href="#_3-5-åˆ›å»ºä»»åŠ¡" aria-label="Permalink to &quot;3.5 åˆ›å»ºä»»åŠ¡&quot;">â€‹</a></h3><p>dashbord =&gt; ç‚¹å‡»å±å¹•ä¸­é—´ create a job</p><ol><li>åç§°å¡«å†™ ä½ çš„é¡¹ç›®åå­—ï¼ˆç¤ºä¾‹ï¼šReact_PCï¼‰</li><li>ç‚¹å‡» æ„å»ºä¸€ä¸ªè‡ªç”±é£æ ¼çš„è½¯ä»¶é¡¹ç›®</li><li>ç‚¹å‡» ç¡®å®šæŒ‰é’®</li><li>ç‚¹å‡» githubé¡¹ç›® å¡«å†™é¡¹ç›®URL</li><li>æºç ç®¡ç† å‹¾é€‰git</li><li>å¡«å†™ Repository URL è¿™é‡Œç”¨githubä»“åº“çš„httpåœ°å€</li><li>Credentials é€‰æ‹©ä¹‹å‰é…ç½®çš„å‡­è¯</li><li>æŒ‡å®šåˆ†æ”¯æš‚æ—¶å¡«å†™ */dev</li><li>ç‚¹å‡» åº”ç”¨æŒ‰é’® ç‚¹å‡» ä¿å­˜æŒ‰é’®</li><li>ç‚¹å‡»ç«‹å³æ„å»ºæŒ‰é’®</li></ol><p><img src="'+b+'" alt="åˆ›å»ºé¡¹ç›®æ­¥éª¤1" loading="lazy"></p><p><img src="'+m+'" alt="åˆ›å»ºé¡¹ç›®æ­¥éª¤2" loading="lazy"></p><p><img src="'+y+'" alt="åˆ›å»ºé¡¹ç›®æ­¥éª¤3" loading="lazy"></p><p><img src="'+u+'" alt="åˆ›å»ºé¡¹ç›®æ­¥éª¤4" loading="lazy"></p><h3 id="_3-6-github-webhooks-é…ç½®" tabindex="-1">3.6 Github webHooks é…ç½® <a class="header-anchor" href="#_3-6-github-webhooks-é…ç½®" aria-label="Permalink to &quot;3.6 Github webHooks é…ç½®&quot;">â€‹</a></h3><p>githubä»£ç ä»“åº“ =&gt; Settings =&gt; Webhooks</p><ol><li>å¡«å†™ Payload URL <a href="http://ip:8080/jenkins_home/github-webhook/" target="_blank" rel="noreferrer">http://ip:8080/jenkins_home/github-webhook/</a></li><li>é€‰æ‹© Content type application/json</li><li>ç‚¹å‡» add webbhook æŒ‰é’®</li></ol><p>jenjins =&gt; dashbord =&gt; ç‚¹å‡»ä¹‹å‰åˆ›å»ºçš„é¡¹ç›® =&gt; é…ç½®</p><ol><li>ç‚¹å‡» æ„å»ºè§¦å‘å™¨</li><li>å‹¾é€‰ <code>GitHub hook trigger for GITScm polling</code></li></ol><p><img src="'+E+'" alt="webhookæ­¥éª¤1" loading="lazy"></p><p><img src="'+C+'" alt="webhookæ­¥éª¤2" loading="lazy"></p><p><img src="'+A+'" alt="webhookæ­¥éª¤3" loading="lazy"></p><p><img src="'+B+'" alt="webhookæ­¥éª¤4" loading="lazy"></p><h3 id="_3-7-æ„å»ºç¯å¢ƒ" tabindex="-1">3.7 æ„å»ºç¯å¢ƒ <a class="header-anchor" href="#_3-7-æ„å»ºç¯å¢ƒ" aria-label="Permalink to &quot;3.7 æ„å»ºç¯å¢ƒ&quot;">â€‹</a></h3><p>ctrl F <code>æ„å»ºç¯å¢ƒ</code></p><ol><li>ç‚¹å‡» æ„å»ºç¯å¢ƒ</li><li>å‹¾é€‰ <code>Provide Node &amp; npm bin/ folder to PATH</code></li><li>é€‰æ‹© æˆ‘ä»¬åˆšåˆšé…ç½®è¿‡çš„nodejsç‰ˆæœ¬</li><li>ç‚¹å‡» åº”ç”¨æŒ‰é’®</li></ol><p><img src="'+D+'" alt="æ„å»ºç¯å¢ƒ" loading="lazy"></p><h3 id="_3-8-build-steps" tabindex="-1">3.8 Build Steps <a class="header-anchor" href="#_3-8-build-steps" aria-label="Permalink to &quot;3.8 Build Steps&quot;">â€‹</a></h3><p>ctrl F <code>Build Steps</code></p><ol><li>å¢åŠ æ„å»ºæ­¥éª¤</li><li>é€‰æ‹© <code>Execute NodeJS script</code></li><li>é€‰æ‹© æˆ‘ä»¬åˆšåˆšé…ç½®è¿‡çš„nodejsç‰ˆæœ¬</li><li>ç‚¹å‡» åº”ç”¨ã€ä¿å­˜æŒ‰é’®</li><li>æ„å»ºé¡¹ç›®æµ‹è¯•ç›®å‰ä¸ºæ­¢æ­¥éª¤æ˜¯å¦æ­£ç¡®ï¼Œå¹¶å­¦ä¼šæ‰‹åŠ¨æ„å»ºæµç¨‹</li></ol><p><img src="'+_+'" alt="build step æ­¥éª¤1" loading="lazy"></p><p><img src="'+v+`" alt="build step æ­¥éª¤2" loading="lazy"></p><h3 id="_3-9-æ‰§è¡Œshell" tabindex="-1">3.9 æ‰§è¡Œshell <a class="header-anchor" href="#_3-9-æ‰§è¡Œshell" aria-label="Permalink to &quot;3.9 æ‰§è¡Œshell&quot;">â€‹</a></h3><p>dashbord =&gt; ç‚¹å‡»ä¹‹å‰åˆ›å»ºçš„é¡¹ç›® =&gt; é…ç½® =&gt; ctrl F <code>Build Steps</code></p><ol><li>å¢åŠ æ„å»ºæ­¥éª¤</li><li>é€‰æ‹© æ‰§è¡Œshell</li><li>å¡«å†™ä¸‹é¢bashæŒ‡ä»¤</li><li>ç‚¹å‡» åº”ç”¨ã€ä¿å­˜æŒ‰é’®</li><li>æ„å»ºé¡¹ç›®æµ‹è¯•ï¼Œæ§åˆ¶å°è¾“å‡ºåº”è¯¥èƒ½çœ‹åˆ°æ‰“å°nodejsç‰ˆæœ¬å’Œnpm ç‰ˆæœ¬</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Node.js ç‰ˆæœ¬ï¼š&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;npm ç‰ˆæœ¬ï¼š&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  npm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $PATH</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="`+x+'" alt="æ‰§è¡Œshellæ­¥éª¤1" loading="lazy"></p><p><img src="'+q+`" alt="æ‰§è¡Œshellæ­¥éª¤2" loading="lazy"></p><p>dashbord =&gt; ç‚¹å‡»ä¹‹å‰åˆ›å»ºçš„é¡¹ç›® =&gt; é…ç½® =&gt; ctrl F <code>æ‰§è¡Œshell</code></p><ol><li>å¡«å†™ä¸‹é¢bashæŒ‡ä»¤</li><li>ç‚¹å‡» åº”ç”¨ã€ä¿å­˜æŒ‰é’®</li><li>æ„å»ºé¡¹ç›®æµ‹è¯•ï¼Œæ§åˆ¶å°è¾“å‡ºåº”è¯¥èƒ½çœ‹åˆ°ä¾èµ–å®‰è£…æˆåŠŸå’Œæ‰“åŒ…æˆåŠŸå­—æ ·</li><li><code>ls /docker/html/origin/dev/dist/</code> åº”è¯¥è¿˜èƒ½æŸ¥çœ‹åˆ°distæ–‡ä»¶å¤¹ä¸‹çš„å‰ç«¯æ‰“åŒ…é¡¹ç›®</li><li>ä¸Šé¢æ­¥éª¤æˆåŠŸåï¼Œè¿œç¨‹ä»“åº“devåˆ†æ”¯pushä¸€æ¬¡æµ‹è¯•æäº¤ï¼Œjenkinsä¼šè§¦å‘è‡ªåŠ¨æ„å»º</li><li>å¦‚æœæ²¡æœ‰è‡ªåŠ¨æ„å»ºæˆåŠŸï¼Œå¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜ã€‚å…ˆå»githubæŸ¥çœ‹è¯¥webhookè§¦å‘äº†æ²¡æœ‰ï¼Œå†å»jenkins webç«¯ Github Hook logé€‰é¡¹æŸ¥çœ‹æ¨é€æ—¥å¿—</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Node.js ç‰ˆæœ¬ï¼š&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;npm ç‰ˆæœ¬ï¼š&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  npm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰è£…ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;npm install å¤±è´¥&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ä¾èµ–å®‰è£…æˆåŠŸ&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰“åŒ…æ„å»º</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./dist</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # æ¸…ç†æ—§çš„ dist ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿™é‡Œæ˜¯ç”¨ä½ é¡¹ç›®é‡Œçš„æ‰“åŒ…è„šæœ¬ï¼Œæ¯”å¦‚ä½ çš„å¯èƒ½æ˜¯npm run build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build:jenkins</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;æ„å»ºå¤±è´¥&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;æ„å»ºæˆåŠŸ&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><img src="`+f+'" alt="æ‰§è¡Œshellæ­¥éª¤3" loading="lazy"></p><p><img src="'+j+'" alt="æ‰§è¡Œshellæ­¥éª¤4" loading="lazy"></p><p><img src="'+S+`" alt="æ‰§è¡Œshellæ­¥éª¤5" loading="lazy"></p><h3 id="_3-10-è‡ªåŠ¨éƒ¨ç½²åˆ°å¯¹åº”ç¯å¢ƒ" tabindex="-1">3.10 è‡ªåŠ¨éƒ¨ç½²åˆ°å¯¹åº”ç¯å¢ƒ <a class="header-anchor" href="#_3-10-è‡ªåŠ¨éƒ¨ç½²åˆ°å¯¹åº”ç¯å¢ƒ" aria-label="Permalink to &quot;3.10 è‡ªåŠ¨éƒ¨ç½²åˆ°å¯¹åº”ç¯å¢ƒ&quot;">â€‹</a></h3><p>dashbord =&gt; ç‚¹å‡»ä¹‹å‰åˆ›å»ºçš„é¡¹ç›® =&gt; é…ç½® =&gt; ctrl F <code>æ‰§è¡Œshell</code></p><ol><li>å¡«å†™ä¸‹é¢bashæŒ‡ä»¤</li><li>ç‚¹å‡»åº”ç”¨æŒ‰é’®</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;å½“å‰æ‰“åŒ…é¡¹ç›® Github ä»“åº“åˆ†æ”¯ï¼š&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;GIT_BRANCH&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $GIT_BRANCH</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Node.js ç‰ˆæœ¬ï¼š&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;npm ç‰ˆæœ¬ï¼š&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  npm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰è£…ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;npm install å¤±è´¥&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ä¾èµ–å®‰è£…æˆåŠŸ&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰“åŒ…æ„å»º</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./dist</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # æ¸…ç†æ—§çš„ dist ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿™é‡Œæ˜¯ç”¨ä½ é¡¹ç›®é‡Œçš„æ‰“åŒ…è„šæœ¬ï¼Œæ¯”å¦‚ä½ çš„å¯èƒ½æ˜¯npm run build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build:jenkins</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;æ„å»ºå¤±è´¥&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;æ„å»ºæˆåŠŸ&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./dist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;æ„å»ºæœªç”Ÿæˆ dist ç›®å½•&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;å¼€å§‹æ‰“åŒ…...&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist.tar</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # æ¯æ¬¡æ„å»ºåˆ é™¤å·²å­˜åœ¨çš„distå‹ç¼©åŒ…</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -zcvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist.tar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./dist</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å°†distæ–‡ä»¶å‹ç¼©æˆdist.tar</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$?</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -eq</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;æ‰“åŒ…æˆåŠŸ&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;æ‰“åŒ…å¤±è´¥&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;æ„å»ºå’Œæ‰“åŒ…å®Œæˆ&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $PATH</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>è¿™é‡Œå…ˆæ˜ç¡®ä¸€ç‚¹ï¼Œæœ¬æ¬¡éƒ¨ç½²åˆ°å®¿ä¸»æœºçš„ç¯å¢ƒåœ°å€ï¼Œä¸ºä»€ä¹ˆè·¯å¾„å†™æˆè¿™æ ·ï¼Œæ˜¯ä¸ºäº†åç»­å‚æ•°åŒ–æ„å»ºçš„æ—¶å€™ï¼Œå¯ä»¥åŠ¨æ€è·å–åˆ†æ”¯åï¼Œç„¶åæ ¹æ®åˆ†æ”¯ååŠ¨æ€éƒ¨ç½²åˆ°å¯¹åº”ç¯å¢ƒã€‚ ç”Ÿäº§ç¯å¢ƒ masteråˆ†æ”¯éƒ¨ç½²åˆ° <code>/docker/html/origin/master/dist/</code> å¼€å‘ç¯å¢ƒ devåˆ†æ”¯éƒ¨ç½²åˆ° <code>/docker/html/origin/dev/dist/</code></p><ol><li>å¢åŠ æ„å»ºæ­¥éª¤</li><li>é€‰æ‹© <code>Send files or execute commands over SSH</code></li><li>å¡«å†™ æœåŠ¡åç§°Name ä¸º jenkins_node</li><li>å¡«å†™ æºæ–‡ä»¶Source ä¸º files dist.tar</li><li>å¡«å†™ ç›®æ ‡è·¯å¾„Remote directory ä¸º /dokcer/html/origin/dev</li><li>å¡«å†™ æ‰§è¡Œè„šæœ¬Exec command å¦‚ä¸‹</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /docker/html/dev</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   dist/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zxvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist.tar</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist.tar</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="`+w+'" alt="æ„å»ºåæ­¥éª¤1" loading="lazy"></p><p><img src="'+P+`" alt="æ„å»ºåæ­¥éª¤2" loading="lazy"></p><p>è®©æˆ‘ä»¬æ‹ä¸€æ‹ä»¥ä¸Šæ­¥éª¤åšäº†å“ªäº›äº‹æƒ…ï¼Ÿ æ­£å¼ç”Ÿäº§ å®¿ä¸»æœºå’Œdockerå¤§æ¦‚ç‡ä¸æ˜¯éƒ¨ç½²åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šçš„ï¼Œè¿™é‡Œæˆ‘ä»¬è‡ªå·±å­¦ä¹ ä½¿ç”¨äº†ä¸€å°æœåŠ¡å™¨</p><ol><li>åˆ é™¤dockerå®¹å™¨å†…ï¼Œä¹‹å‰æ‰“åŒ…çš„distä¸‹æ‰€æœ‰æ–‡ä»¶</li><li>dockerå®¹å™¨å†…ï¼Œæ‰“åŒ…æœ¬æ¬¡æºæ–‡ä»¶ä¸ºdist.tar</li><li>è¿æ¥åˆ°å®¿ä¸»æœºï¼ˆè¿œç¨‹æœåŠ¡å™¨ï¼‰ï¼Œæ”¾åœ¨<code>/docker/html/origin/dev</code>æ–‡ä»¶ä»·ä¸‹</li><li>è§£å‹ç¼©dist.tarï¼Œå¹¶ä¸”åˆ é™¤å‹ç¼©åŒ…</li></ol><ul><li>Source filesï¼šå‡†å¤‡å‘é€çš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ˜¯ç›¸å¯¹äºè¿™ä¸ªé¡¹ç›®çš„workspaceç›®å½•ã€‚ä¾‹å¦‚è¦å‘é€/docker/jenkins_home/workspace/gitlab_web/dist.- taråˆ°ç›®æ ‡ç›®å½•ï¼Œåˆ™è®¾ç½®Source filesä¸ºdist.tar</li><li>Remove prefixï¼šç›®æ ‡æ–‡ä»¶å‰ç¼€æ·»åŠ ï¼Œä¾‹å¦‚è¦æ“ä½œsrcä¸‹é¢çš„æŸä¸ªæ–‡ä»¶ï¼Œå°±è®¾ç½®æˆsrc,æœ¬æ¡ˆä¾‹æ˜¯è·Ÿç›®å½•ï¼Œæ— éœ€è®¾ç½®</li><li>Remote directoryï¼šç›®æ ‡ç›®å½•ï¼Œæœ¬æ¡ˆä¾‹è¦å¤åˆ¶åˆ°devç¯å¢ƒä¸‹çš„distæ–‡ä»¶ï¼Œ/docker/html/dev</li><li>Exec commandï¼šæœ€åæ‰§è¡Œçš„å‘½ä»¤ï¼Œå¯åœ¨è¿™é‡Œè¿›è¡Œè§£å‹ï¼Œåˆ é™¤ï¼Œå¤åˆ¶ç­‰æ“ä½œ</li></ul><p>åˆ°è¿™é‡Œï¼Œè®¿é—®ä½ çš„é¡¹ç›®åœ°å€ <code>localhost:8082</code> å°±å¯ä»¥çœ‹åˆ°ä½ æ‰“åŒ…å¥½çš„å‰ç«¯é¡¹ç›®äº†</p><h3 id="_3-11-å‚æ•°åŒ–æ„å»º" tabindex="-1">3.11 å‚æ•°åŒ–æ„å»º <a class="header-anchor" href="#_3-11-å‚æ•°åŒ–æ„å»º" aria-label="Permalink to &quot;3.11 å‚æ•°åŒ–æ„å»º&quot;">â€‹</a></h3><p>å‰é¢æˆ‘ä»¬éƒ½æ˜¯æ‰‹åŠ¨æ„å»ºdevåˆ†æ”¯ï¼Œç°åœ¨æˆ‘ä»¬ä½¿ç”¨å‚æ•°åŒ–æ„å»ºï¼Œå¯ä»¥åŠ¨æ€è·å–åˆ†æ”¯åï¼Œç„¶åæ ¹æ®åˆ†æ”¯ååŠ¨æ€éƒ¨ç½²åˆ°å¯¹åº”ç¯å¢ƒ</p><p>dashbord =&gt; ç‚¹å‡»ä¹‹å‰åˆ›å»ºçš„é¡¹ç›® =&gt; é…ç½® =&gt; ctrl F <code>å‚æ•°åŒ–æ„å»ºè¿‡ç¨‹</code></p><ol><li>æ·»åŠ å‚æ•°ï¼Œé€‰æ‹©GITå‚æ•°</li><li>å¡«å†™ åç§° ä¸º <code>BRANCH</code></li><li>å¡«å†™ æè¿° ä¸º ç”Ÿäº§ç¯å¢ƒ <code>origin/master</code> å¼€å‘ç¯å¢ƒ <code>origin/dev</code></li><li>å¡«å†™ é»˜è®¤å€¼ ä¸º <code>origin/dev</code></li></ol><p>ctrl F <code>Branches to build</code></p><ol><li>å¡«å†™ æŒ‡å®šåˆ†æ”¯ ç”±ä¹‹å‰çš„ <code>origin/dev</code> å˜æˆ <code>$BRANCH</code></li></ol><p>ctrl F <code>Transfer Set</code></p><ol><li>å¡«å†™ Remote directory ç”±ä¹‹å‰çš„ <code>/docker/html/origin/dev</code> å˜æˆ <code>/docker/html/\${GIT_BRANCH}</code></li><li>å¡«å†™ Exec command å¦‚ä¸‹</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /docker/html/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\${GIT_BRANCH}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   dist/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zxvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist.tar</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist.tar</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="`+J+'" alt="å‚æ•°åŒ–æ„å»ºæ­¥éª¤1" loading="lazy"></p><p><img src="'+H+'" alt="å‚æ•°åŒ–æ„å»ºæ­¥éª¤2" loading="lazy"></p><p><img src="'+z+'" alt="å‚æ•°åŒ–æ„å»ºæ­¥éª¤3" loading="lazy"></p><p>è¿™é‡Œéœ€è¦å¼ºè°ƒå‡ ç‚¹</p><ol><li>ç”±äºæˆ‘ä»¬æœ¬æ¬¡jenkinsæ„å»ºä½¿ç”¨çš„è‡ªç”±é£æ ¼ï¼Œç›¸å¯¹pipeline(æµæ°´çº¿)çš„æ–¹å¼æ²¡æœ‰é‚£ä¹ˆçµæ´»ï¼Œæ¯”å¦‚webhookæ¨é€ä¸åŒåˆ†æ”¯ï¼Œå¦‚æœä¸ä½¿ç”¨å‚æ•°åŒ–æ„å»ºåˆ™å¿…é¡»å†™æ­»åˆ†æ”¯åï¼Œä½¿ç”¨äº†å‚æ•°åŒ–æ„å»ºä¹Ÿåªèƒ½ä½¿ç”¨é»˜è®¤å€¼ï¼Œæœ¬æ¬¡æ˜¯<code>origin/dev</code>å³devåˆ†æ”¯</li><li>ä¸ºä»€ä¹ˆå‰é¢é¡¹ç›®çš„è·¯å¾„è¦ç”¨<code>origin/*</code>ï¼Œå› ä¸ºæ„å»ºåˆ†æ”¯æ˜¯åŠ¨æ€è·å–å½“å‰ä»“åº“çš„åˆ†æ”¯çš„ï¼Œé»˜è®¤æ˜¯å¸¦originå‰ç¼€çš„</li><li>ç›®å‰é…ç½®èƒ½è¾¾åˆ°çš„æ•ˆæœæ˜¯devåˆ†æ”¯ä¼šå¯ä»¥æ ¹æ®webhookè‡ªåŠ¨æ¨é€åˆ°jenkinsè§¦å‘è‡ªåŠ¨æ›´æ–°ï¼Œmasterä¸»åˆ†æ”¯åˆ™éœ€è¦æ‰‹åŠ¨è§¦å‘æ›´æ–°ã€‚</li></ol>',138)]))}const L=i(N,[["render",T]]);export{U as __pageData,L as default};
