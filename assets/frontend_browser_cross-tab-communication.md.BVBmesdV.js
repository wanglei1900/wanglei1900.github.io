import{_ as a,c as i,o as n,a7 as e}from"./chunks/framework.Dtft01Yp.js";const E=JSON.parse('{"title":"ğŸŒ æ ‡ç­¾é¡µè·¨é¡µé€šä¿¡","description":"","frontmatter":{},"headers":[],"relativePath":"frontend/browser/cross-tab-communication.md","filePath":"frontend/browser/cross-tab-communication.md","lastUpdated":1751880611000}'),l={name:"frontend/browser/cross-tab-communication.md"};function t(p,s,h,r,k,d){return n(),i("div",null,s[0]||(s[0]=[e(`<h1 id="ğŸŒ-æ ‡ç­¾é¡µè·¨é¡µé€šä¿¡" tabindex="-1">ğŸŒ æ ‡ç­¾é¡µè·¨é¡µé€šä¿¡ <a class="header-anchor" href="#ğŸŒ-æ ‡ç­¾é¡µè·¨é¡µé€šä¿¡" aria-label="Permalink to &quot;ğŸŒ æ ‡ç­¾é¡µè·¨é¡µé€šä¿¡&quot;">â€‹</a></h1><p>éœ€æ±‚ï¼šæµè§ˆå™¨ä¸åŒ tab æ ‡ç­¾é¡µä¹‹é—´æ˜¯ç‹¬ç«‹çš„ï¼Œ å¦‚æœè¦é€šä¿¡å¿…é¡»é€šè¿‡ç‰¹æ®Šæ‰‹æ®µæ¥å®ç°è·¨æ ‡ç­¾é¡µé€šä¿¡ã€‚</p><h2 id="âš“-ä¸€ã€broadcastchannel-webworker-å¯ç”¨" tabindex="-1">âš“ ä¸€ã€BroadcastChannel(webworker å¯ç”¨) <a class="header-anchor" href="#âš“-ä¸€ã€broadcastchannel-webworker-å¯ç”¨" aria-label="Permalink to &quot;âš“ ä¸€ã€BroadcastChannel(webworker å¯ç”¨)&quot;">â€‹</a></h2><h3 id="_1-broadcastchannel" tabindex="-1">1. BroadcastChannel <a class="header-anchor" href="#_1-broadcastchannel" aria-label="Permalink to &quot;1. BroadcastChannel&quot;">â€‹</a></h3><blockquote><p>BroadcastChannel æ¥å£ä»£ç†äº†ä¸€ä¸ªå‘½åé¢‘é“ï¼Œå¯ä»¥è®©æŒ‡å®š origin ä¸‹çš„ä»»æ„ browsing context æ¥è®¢é˜…å®ƒã€‚å®ƒå…è®¸åŒæºçš„ä¸åŒæµè§ˆå™¨çª—å£ï¼ŒTab é¡µï¼Œframe æˆ–è€… iframe ä¸‹çš„ä¸åŒæ–‡æ¡£ä¹‹é—´ç›¸äº’é€šä¿¡ã€‚é€šè¿‡è§¦å‘ä¸€ä¸ª message äº‹ä»¶ï¼Œæ¶ˆæ¯å¯ä»¥å¹¿æ’­åˆ°æ‰€æœ‰ç›‘å¬äº†è¯¥é¢‘é“çš„ BroadcastChannel å¯¹è±¡ã€‚</p></blockquote><p>BroadcastChannel é¡¾åæ€ä¹‰ å¹¿æ’­é¢‘é“ï¼Œè¿™ä¸ª WEB API è®¾è®¡ç”¨æ¥è·¨æ ‡ç­¾é¡µä¹‹é—´é€šä¿¡</p><ul><li><p>å±æ€§</p><ul><li><code>BroadcastChannel.name</code> é¢‘é“åç§°ï¼Œè¿”å› DOMStringã€‚</li></ul></li><li><p>äº‹ä»¶å¤„ç†ç¨‹åº</p><ul><li><p><code>BroadcastChannel.onmessage()</code>ï¼Œæˆ– <code>BroadcastChannel.addEventListener(&#39;message&#39;,callback)</code> äº‹ä»¶å¤„ç†å™¨ï¼Œç”¨äºå®šä¹‰å½“è¯¥å¯¹è±¡ä¸Šè§¦å‘äº† message äº‹ä»¶æ—¶è¦æ‰§è¡Œçš„å‡½æ•°ã€‚</p></li><li><p><code>BroadcastChannel.onmessageerror()</code>ï¼Œæˆ– <code>BroadcastChannel.addEventListener(&#39;messageerror&#39;, callback)</code> äº‹ä»¶å¤„ç†å™¨ï¼Œç”¨äºå®šä¹‰å½“è¯¥å¯¹è±¡ä¸Šè§¦å‘äº†ç±»å‹ä¸º MessageError çš„ MessageEvent äº‹ä»¶æ—¶è¦æ‰§è¡Œçš„å‡½æ•°ã€‚å½“æ¥æ”¶åˆ°ä¸€æ¡æ— æ³•ååºåˆ—åŒ–çš„æ¶ˆæ¯æ—¶ä¼šè§¦å‘æ­¤äº‹ä»¶ã€‚</p></li></ul></li><li><p>æ–¹æ³•</p><ul><li><code>BroadcastChannel.postMessage()</code> å‘æ‰€æœ‰ç›‘å¬äº†ç›¸åŒé¢‘é“çš„ BroadcastChannel å¯¹è±¡å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œæ¶ˆæ¯å†…å®¹å¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„æ•°æ®ã€‚</li><li><code>BroadcastChannel.close()</code> å…³é—­é¢‘é“å¯¹è±¡ï¼Œå‘Šè¯‰å®ƒä¸è¦å†æ¥æ”¶æ–°çš„æ¶ˆæ¯ï¼Œå¹¶å…è®¸å®ƒæœ€ç»ˆè¢«åƒåœ¾å›æ”¶ã€‚</li></ul></li></ul><h3 id="_2-ä»£ç ç¤ºä¾‹" tabindex="-1">2. ä»£ç ç¤ºä¾‹ <a class="header-anchor" href="#_2-ä»£ç ç¤ºä¾‹" aria-label="Permalink to &quot;2. ä»£ç ç¤ºä¾‹&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åœ¨ä¸€ä¸ªæ ‡ç­¾é¡µä¸­å‘é€æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> channel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BroadcastChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;myChannel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">channel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello,Bro!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åœ¨å¦ä¸€ä¸ªæˆ–å…¶ä»–æ‰€æœ‰æ ‡ç­¾é¡µä¸­æ¥å—åŒé¢‘é“æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> channel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BroadcastChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;myChannel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">channel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Received&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, event.data); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Hello,Bro!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ–­å¼€é¢‘é“è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">channel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><br><h2 id="âš“-äºŒã€storageevent-äº‹ä»¶" tabindex="-1">âš“ äºŒã€StorageEvent äº‹ä»¶ <a class="header-anchor" href="#âš“-äºŒã€storageevent-äº‹ä»¶" aria-label="Permalink to &quot;âš“ äºŒã€StorageEvent äº‹ä»¶&quot;">â€‹</a></h2><h3 id="_1-storageevent" tabindex="-1">1. StorageEvent <a class="header-anchor" href="#_1-storageevent" aria-label="Permalink to &quot;1. StorageEvent&quot;">â€‹</a></h3><p>å½“ä¸€ä¸ªæ ‡ç­¾é¡µ localStorage å˜åŒ–æ—¶ï¼ˆsessionStorage æ— æ•ˆï¼‰ï¼ŒåŒæºä¸‹å¦ä¸€ä¸ªæˆ–å…¶ä»–æ‰€æœ‰æ ‡ç­¾é¡µä½¿ç”¨ DOM2 ç›‘å¬ storage äº‹ä»¶ç›‘å¬ï¼Œä¸èƒ½ä½¿ç”¨ DOM0 ç›‘å¬ï¼Œæœ€æ–° Chrome ä¸æ”¯æŒã€‚</p><p>StorageEvent</p><blockquote><p>å½“å‰é¡µé¢ä½¿ç”¨çš„ storage è¢«å…¶ä»–é¡µé¢ä¿®æ”¹æ—¶ä¼šè§¦å‘ StorageEvent äº‹ä»¶ã€‚</p></blockquote><p>äº‹ä»¶åœ¨åŒä¸€ä¸ªåŸŸä¸‹çš„ä¸åŒé¡µé¢ä¹‹é—´è§¦å‘ï¼Œå³åœ¨ A é¡µé¢æ³¨å†Œäº† storge çš„ç›‘å¬å¤„ç†ï¼Œåªæœ‰åœ¨è·Ÿ A åŒåŸŸåä¸‹çš„ B é¡µé¢æ“ä½œ storage å¯¹è±¡ï¼ŒA é¡µé¢æ‰ä¼šè¢«è§¦å‘ storage äº‹ä»¶</p><p>äº‹ä»¶å¯¹è±¡åŒ…å«ä»¥ä¸‹å±æ€§ï¼š</p><table tabindex="0"><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>target åªè¯»</td><td>[EventTarget]</td><td>äº‹ä»¶ç›®æ ‡ (DOM æ ‘ä¸­çš„æœ€å¤§ç›®æ ‡)</td></tr><tr><td>type åªè¯»</td><td>[DOMString]</td><td>äº‹ä»¶çš„ç±»å‹</td></tr><tr><td>bubbles åªè¯»</td><td>[Boolean]</td><td>äº‹ä»¶é€šå¸¸æ˜¯å¦ä¼šå‡ºç°å†’æ³¡</td></tr><tr><td>cancelable åªè¯»</td><td>[Boolean]</td><td>äº‹ä»¶æ˜¯å¦å¯å–æ¶ˆ</td></tr><tr><td>key åªè¯»</td><td>[DOMString] (string)</td><td>é”®æ›´æ”¹æ—¶</td></tr><tr><td>oldValue åªè¯»</td><td>[DOMString] (string)</td><td>æ­£åœ¨æ›´æ”¹é”®çš„æ—§å€¼</td></tr><tr><td>newValue åªè¯»</td><td>[DOMString] (string)</td><td>æ­£åœ¨æ›´æ”¹é”®çš„æ–°å€¼</td></tr><tr><td>url åªè¯»</td><td>DOMString</td><td>é”®æ›´æ”¹çš„æ–‡æ¡£çš„åœ°å€</td></tr><tr><td>storageArea åªè¯»</td><td>[Storage]</td><td>å—å½±å“çš„å­˜å‚¨å¯¹è±¡</td></tr></tbody></table><h3 id="_2-ä»£ç ç¤ºä¾‹-1" tabindex="-1">2. ä»£ç ç¤ºä¾‹ <a class="header-anchor" href="#_2-ä»£ç ç¤ºä¾‹-1" aria-label="Permalink to &quot;2. ä»£ç ç¤ºä¾‹&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åœ¨ä¸€ä¸ªæ ‡ç­¾é¡µä¸­è®¾ç½®localStorage</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.localStorage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sendMessage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello,Bro!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åœ¨åŒæºä¸‹å¦ä¸€ä¸ªæˆ–æ‰€æœ‰çš„æ ‡ç­¾é¡µä¸‹æ‰€æœ‰æ•°æ® ç›‘å¬storage äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;storage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.key);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.oldValu);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.newValue);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (e.key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;sendMessage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.newValue); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Hello,Bro!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><br><h2 id="âš“-ä¸‰ã€window-open-é…åˆ-window-postmessage" tabindex="-1">âš“ ä¸‰ã€window.open é…åˆ window.postMessage <a class="header-anchor" href="#âš“-ä¸‰ã€window-open-é…åˆ-window-postmessage" aria-label="Permalink to &quot;âš“ ä¸‰ã€window.open é…åˆ window.postMessage&quot;">â€‹</a></h2><h3 id="_1-window-postmessage" tabindex="-1">1. <code>window.postMessage()</code> <a class="header-anchor" href="#_1-window-postmessage" aria-label="Permalink to &quot;1. \`window.postMessage()\`&quot;">â€‹</a></h3><blockquote><p>window.postMessage() æ–¹æ³•å¯ä»¥å®‰å…¨åœ°å®ç°è·¨æºé€šä¿¡ã€‚</p></blockquote><p><code>otherWindow.postMessage(message, targetOrigin, [transfer])</code>;</p><ul><li>messageï¼šè¦å‘é€çš„æ¶ˆæ¯ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„æ•°æ®ã€‚</li><li>targetOriginï¼šé€šè¿‡çª—å£çš„ origin å±æ€§æ¥æŒ‡å®šå“ªäº›çª—å£èƒ½æ¥æ”¶åˆ°æ¶ˆæ¯äº‹ä»¶ï¼Œå…¶å€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²&quot;_&quot;ï¼ˆè¡¨ç¤ºæ— é™åˆ¶ï¼‰æˆ–è€…ä¸€ä¸ª URIã€‚åœ¨å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œå¦‚æœç›®æ ‡çª—å£çš„åè®®ã€ä¸»æœºåœ°å€æˆ–ç«¯å£è¿™ä¸‰è€…çš„ä»»æ„ä¸€é¡¹ä¸åŒ¹é… targetOrigin æä¾›çš„å€¼ï¼Œé‚£ä¹ˆæ¶ˆæ¯å°±ä¸ä¼šè¢«å‘é€ï¼›åªæœ‰ä¸‰è€…å®Œå…¨åŒ¹é…ï¼Œæ¶ˆæ¯æ‰ä¼šè¢«å‘é€ã€‚è¿™ä¸ªæœºåˆ¶ç”¨æ¥æ§åˆ¶æ¶ˆæ¯å¯ä»¥å‘é€åˆ°å“ªäº›çª—å£ï¼›ä¾‹å¦‚ï¼Œå½“ç”¨ postMessage ä¼ é€å¯†ç æ—¶ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¾å¾—å°¤ä¸ºé‡è¦ï¼Œå¿…é¡»ä¿è¯å®ƒçš„å€¼ä¸è¿™æ¡åŒ…å«å¯†ç çš„ä¿¡æ¯çš„é¢„æœŸæ¥å—è€…çš„ origin å±æ€§å®Œå…¨ä¸€è‡´ï¼Œæ¥é˜²æ­¢å¯†ç è¢«æ¶æ„çš„ç¬¬ä¸‰æ–¹æˆªè·ã€‚å¦‚æœä½ æ˜ç¡®çš„çŸ¥é“æ¶ˆæ¯åº”è¯¥å‘é€åˆ°å“ªä¸ªçª—å£ï¼Œé‚£ä¹ˆè¯·å§‹ç»ˆæä¾›ä¸€ä¸ªæœ‰ç¡®åˆ‡å€¼çš„ targetOriginï¼Œè€Œä¸æ˜¯ _ã€‚ä¸æä¾›ç¡®åˆ‡çš„ç›®æ ‡å°†å¯¼è‡´æ•°æ®æ³„éœ²åˆ°ä»»ä½•å¯¹æ•°æ®æ„Ÿå…´è¶£çš„æ¶æ„ç«™ç‚¹ã€‚</li><li>transferï¼šå¯é€‰çš„ï¼Œæ˜¯ä¸€ä¸²å’Œ message åŒæ—¶ä¼ é€’çš„ Transferable å¯¹è±¡ã€‚è¿™äº›å¯¹è±¡çš„æ‰€æœ‰æƒå°†è¢«è½¬ç§»ç»™æ¶ˆæ¯çš„æ¥æ”¶æ–¹ï¼Œè€Œå‘é€ä¸€æ–¹å°†ä¸å†ä¿æœ‰æ‰€æœ‰æƒã€‚</li></ul><p>targetOrigin å€¼å¯ä»¥æ˜¯ä»¥ä¸‹ä»»æ„ä¸€ä¸ªï¼š</p><ul><li>ä¸€ä¸ª URIï¼Œè¡¨ç¤ºè¯¥ URI æ‰€è¡¨ç¤ºçš„æºã€‚</li></ul><h3 id="_2-window-open" tabindex="-1">2. <code>window.open()</code> <a class="header-anchor" href="#_2-window-open" aria-label="Permalink to &quot;2. \`window.open()\`&quot;">â€‹</a></h3><p><code>window.open(url?: string | URL, target?: string, features?: string): WindowProxy | null;</code></p><ul><li>url <ul><li>æ–°urlåœ°å€ æˆ–è€… ä¸´æ—¶ç”ŸæˆbolbUrl é¢„è§ˆ</li></ul></li><li>target <ul><li><p>å¯é€‰ <code>_selfã€_blankã€_parent å’Œ _top</code></p><ul><li><p>_selfï¼šå½“å‰é¡µé¢åŠ è½½ã€‚ï¼ˆé»˜è®¤ï¼‰</p></li><li><p>_blankï¼šé€šå¸¸åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€ï¼Œä½†ç”¨æˆ·å¯ä»¥é€šè¿‡é…ç½®é€‰æ‹©åœ¨æ–°çª—å£æ‰“å¼€ã€‚</p></li><li><p>_parentï¼šå½“å‰æµè§ˆç¯å¢ƒçš„çˆ¶çº§æµè§ˆä¸Šä¸‹æ–‡ã€‚å¦‚æœæ²¡æœ‰çˆ¶çº§æ¡†æ¶ï¼Œè¡Œä¸ºä¸ _self ç›¸åŒã€‚</p></li><li><p>_topï¼šæœ€é¡¶çº§çš„æµè§ˆä¸Šä¸‹æ–‡ï¼ˆå½“å‰æµè§ˆä¸Šä¸‹æ–‡ä¸­æœ€â€œé«˜â€çš„ç¥–å…ˆï¼‰ã€‚å¦‚æœæ²¡æœ‰ç¥–å…ˆï¼Œè¡Œä¸ºä¸ _self ç›¸åŒã€‚</p></li></ul></li><li><p>è‡ªå®šä¹‰åå­—ï¼Œå¯ä»¥ä¿è¯æ¯æ¬¡é‡å¤ç‚¹å‡»åæ‰“å¼€çš„éƒ½æ˜¯åŒä¸€ä¸ªæ–°é¡µé¢ã€‚æˆ–è€…ä½ éœ€è¦æ“ä½œæ–°æ‰“å¼€åçš„é¡µé¢ å¯ä»¥è·å–è¿”å›å€¼ const r = window.open(url, target, windowFeatures)</p></li></ul></li><li>windowFeatures <ul><li>åŸºæœ¬åªæ”¯æŒåŸºç¡€é•¿å®½å’Œä½ç½® <code>width=1080,height=780,top = 200,left=400</code> ã€‚</li><li>å…¶ä½™è¿™äº›å±æ€§<code>toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no</code> æµ‹è¯•äº†å‡ ä¸ªæµè§ˆå™¨ç°åœ¨åŸºæœ¬éƒ½æ˜¯æ— æ•ˆçš„</li></ul></li><li>replace <ul><li>ä¹Ÿå·²ç»èˆå¼ƒï¼Œä¸è¦ç”¨äº†</li></ul></li></ul><h3 id="_3-ä»£ç ç¤ºä¾‹" tabindex="-1">3. ä»£ç ç¤ºä¾‹ <a class="header-anchor" href="#_3-ä»£ç ç¤ºä¾‹" aria-label="Permalink to &quot;3. ä»£ç ç¤ºä¾‹&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åœ¨ä¸€ä¸ªæ ‡ç­¾é¡µä¸­å‘é€æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> baidu</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;baidu.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">baidu.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello,Bro!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åœ¨window.open()æ‰“å¼€çš„å¦ä¸€ä¸ªæ ‡ç­¾é¡µä¸­æ¥å—æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Received&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, event.data); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Received Hello,Bro!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><br><h2 id="âš“-å››ã€sharedworker-æ³¨æ„å…¼å®¹æ€§" tabindex="-1">âš“ å››ã€SharedWorkerï¼ˆæ³¨æ„å…¼å®¹æ€§ï¼‰ <a class="header-anchor" href="#âš“-å››ã€sharedworker-æ³¨æ„å…¼å®¹æ€§" aria-label="Permalink to &quot;âš“ å››ã€SharedWorkerï¼ˆæ³¨æ„å…¼å®¹æ€§ï¼‰&quot;">â€‹</a></h2><blockquote><p>åˆ›å»ºä¸€ä¸ªæ‰§è¡ŒæŒ‡å®š url è„šæœ¬çš„å…±äº« web workerã€‚å¦‚æœè¦ä½¿ SharedWorker è¿æ¥åˆ°å¤šä¸ªä¸åŒçš„é¡µé¢ï¼Œè¿™äº›é¡µé¢å¿…é¡»æ˜¯åŒæºçš„ï¼ˆç›¸åŒçš„åè®®ã€host ä»¥åŠç«¯å£ï¼‰ã€‚</p></blockquote><h3 id="_1-ä»£ç ç¤ºä¾‹" tabindex="-1">1. ä»£ç ç¤ºä¾‹ <a class="header-anchor" href="#_1-ä»£ç ç¤ºä¾‹" aria-label="Permalink to &quot;1. ä»£ç ç¤ºä¾‹&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// worker.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onconnect</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e.ports[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  port.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> workerResult </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Result: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e.data;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    port.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(workerResult);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  port.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨addEventListener è¦æ‰‹åŠ¨åŠ ä¸Š. å¦‚æœä½¿ç”¨onmessageåˆ™å¯ä»¥çœç•¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åœ¨ä¸åŒé¡µé¢ä¸­åˆ›å»ºå…±äº« web worker</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.shareWorker </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SharedWorker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./worker.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ¥å—ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.shareWorker.port.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onmessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.data);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å‘é€ä¿¡æ¯ï¼Œå¯ä»¥ä¼ é€’ä»»ä½•ä¸œè¥¿</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.shareWorker.port.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;notifyTab&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  payload: {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><br><h2 id="âš“-äº”ã€indexeddb-å®šæ—¶å™¨è½®è¯¢-cookie-å®šæ—¶å™¨è½®è¯¢-websocket-ç­‰" tabindex="-1">âš“ äº”ã€IndexedDB å®šæ—¶å™¨è½®è¯¢ï¼Œcookie å®šæ—¶å™¨è½®è¯¢,Websocket ç­‰ <a class="header-anchor" href="#âš“-äº”ã€indexeddb-å®šæ—¶å™¨è½®è¯¢-cookie-å®šæ—¶å™¨è½®è¯¢-websocket-ç­‰" aria-label="Permalink to &quot;âš“ äº”ã€IndexedDB å®šæ—¶å™¨è½®è¯¢ï¼Œcookie å®šæ—¶å™¨è½®è¯¢,Websocket ç­‰&quot;">â€‹</a></h2><br><h2 id="âš“-å…­ã€æ€»ç»“" tabindex="-1">âš“ å…­ã€æ€»ç»“ <a class="header-anchor" href="#âš“-å…­ã€æ€»ç»“" aria-label="Permalink to &quot;âš“ å…­ã€æ€»ç»“&quot;">â€‹</a></h2><ul><li>BroadcastChannel å®æ—¶å¹¿æ’­ï¼Œç»™æ‰€æœ‰æ‰“å¼€çš„æ ‡ç­¾é¡µå‘é€é€šçŸ¥</li><li>StorageEvent é€‚åˆåœºæ™¯ç”¨åˆ°å…±äº«æŒä¹…å­˜å‚¨ç›¸å…³</li><li>window.open é…åˆ window.postMessage å¯ä»¥è·¨æº</li></ul>`,44)]))}const g=a(l,[["render",t]]);export{E as __pageData,g as default};
