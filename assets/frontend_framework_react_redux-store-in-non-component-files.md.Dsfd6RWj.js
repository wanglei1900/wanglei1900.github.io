import{_ as i,c as a,o as n,a7 as e}from"./chunks/framework.Dtft01Yp.js";const c=JSON.parse('{"title":"ğŸŒ… åœ¨éReactç»„ä»¶çš„æ–‡ä»¶ä¸­ä½¿ç”¨Redux","description":"","frontmatter":{},"headers":[],"relativePath":"frontend/framework/react/redux-store-in-non-component-files.md","filePath":"frontend/framework/react/redux-store-in-non-component-files.md","lastUpdated":1751869578000}'),t={name:"frontend/framework/react/redux-store-in-non-component-files.md"};function p(l,s,r,h,k,d){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="ğŸŒ…-åœ¨éreactç»„ä»¶çš„æ–‡ä»¶ä¸­ä½¿ç”¨redux" tabindex="-1">ğŸŒ… åœ¨éReactç»„ä»¶çš„æ–‡ä»¶ä¸­ä½¿ç”¨Redux <a class="header-anchor" href="#ğŸŒ…-åœ¨éreactç»„ä»¶çš„æ–‡ä»¶ä¸­ä½¿ç”¨redux" aria-label="Permalink to &quot;ğŸŒ… åœ¨éReactç»„ä»¶çš„æ–‡ä»¶ä¸­ä½¿ç”¨Redux&quot;">â€‹</a></h1><h2 id="ä¸€ã€reduxçš„ä½¿ç”¨åœºæ™¯" tabindex="-1">ä¸€ã€Reduxçš„ä½¿ç”¨åœºæ™¯ <a class="header-anchor" href="#ä¸€ã€reduxçš„ä½¿ç”¨åœºæ™¯" aria-label="Permalink to &quot;ä¸€ã€Reduxçš„ä½¿ç”¨åœºæ™¯&quot;">â€‹</a></h2><ul><li>å‡½æ•°å¼ç»„ä»¶å†…ï¼ˆhooksè°ƒç”¨reduxï¼‰</li><li>å…¶ä»–æ–‡ä»¶ï¼ˆæ— æ³•ä½¿ç”¨hooksè°ƒç”¨reduxï¼‰</li></ul><h2 id="äºŒã€éå‡½æ•°å¼ç»„ä»¶çš„æ–‡ä»¶å†…ä½¿ç”¨redux" tabindex="-1">äºŒã€éå‡½æ•°å¼ç»„ä»¶çš„æ–‡ä»¶å†…ä½¿ç”¨redux <a class="header-anchor" href="#äºŒã€éå‡½æ•°å¼ç»„ä»¶çš„æ–‡ä»¶å†…ä½¿ç”¨redux" aria-label="Permalink to &quot;äºŒã€éå‡½æ•°å¼ç»„ä»¶çš„æ–‡ä»¶å†…ä½¿ç”¨redux&quot;">â€‹</a></h2><p><code>useDispatch</code> å’Œ <code>useSelector</code> è¿™ä¸¤ä¸ªhooksåªèƒ½åœ¨å‡½æ•°ç»„ä»¶å†…ä½¿ç”¨ï¼Œåœ¨éå‡½æ•°ç»„ä»¶çš„æ–‡ä»¶ï¼ˆä»¥ä¸‹ç®€ç§°ä¸‰æ–¹æ–‡ä»¶ï¼‰å°±æ— æ³•ä½¿ç”¨äº†ã€‚ æœ‰äº›äººå°±ä¼šè¯´ç®€å•å•Šï¼Œç›´æ¥æŠŠredux é‡Œçš„storeå¼•è¿‡æ¥ã€‚æ­å–œä½ ï¼Œä½ å¾ˆå¯èƒ½é€ æˆäº†ä¸€ä¸ªå¾ˆå¤§çš„éšæ‚£ã€‚</p><p>ä¸‹é¢å°±æ¥è¯¦ç»†è¯´è¯´ï¼Œredux storeæ˜¯å•ä¾‹ï¼Œæ˜¯é€šè¿‡æ³¨å…¥çš„æ–¹å¼ä½¿å¾—ä½ èƒ½åœ¨ä¸‹é¢æ‰€æœ‰å±‚çº§çš„ç»„ä»¶ä¸­ä½¿ç”¨ä»–ï¼Œ<code>&lt;Provider store={store}&gt;&lt;App /&gt;&lt;/Provider&gt;</code>ï¼Œä½†æ˜¯ä¸‰æ–¹æ–‡ä»¶æ˜æ˜¾æ— æ³•ç›´æ¥ä½¿ç”¨ä»–ã€‚ å½“ç„¶ç›´æ¥æ‹¿åˆ°storeç¤ºä¾‹ç„¶åä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œè‚¯å®šæ˜¯èƒ½æ”¹å˜ï¼Œä½†æ˜¯é€šå¸¸ä¼šé€ æˆä¸€ä¸ªé—®é¢˜é‚£å°±æ˜¯ä¼šå¯¼è‡´å¾ªç¯ä¾èµ–ã€‚å¾ªç¯ä¾èµ–å¯èƒ½ä¼šç›´æ¥è¹¦æ‰ä½ çš„ç¨‹åºã€‚</p><p><a href="https://www.cnblogs.com/wanglei1900/p/17732892.html" target="_blank" rel="noreferrer">ç«™å†…è·³è½¬ï¼Œå¾ªç¯ä¾èµ–åŠè§£å†³æ–¹æ³•</a></p><p>å¯ä»¥çœ‹åˆ°ä¸Šé¢é“¾æ¥ä¸­é€ æˆå¾ªç¯ä¾èµ–çš„æ ¹æœ¬åŸå› å°±æ˜¯åœ¨è¿™é‡Œ <code>login.ts =&gt; http.ts</code> ï¼Œ æ„æˆäº†å¾ªç¯ä¾èµ– <code>store.ts =&gt; authSlice.ts =&gt; login.ts =&gt; http.ts =&gt; store.ts</code></p><p>æ‰€ä»¥ç›´æ¥åœ¨http.ts ä¸­å¼•å…¥storeå®ä¾‹çš„æ–¹å¼æ˜¯é”™è¯¯ä¸”ä¸ç§‘å­¦çš„ã€‚</p><h2 id="ä¸‰ã€è§£å†³æ–¹æ¡ˆ" tabindex="-1">ä¸‰ã€è§£å†³æ–¹æ¡ˆ <a class="header-anchor" href="#ä¸‰ã€è§£å†³æ–¹æ¡ˆ" aria-label="Permalink to &quot;ä¸‰ã€è§£å†³æ–¹æ¡ˆ&quot;">â€‹</a></h2><p><a href="https://redux.js.org/faq/code-structure#how-can-i-use-the-redux-store-in-non-component-files" target="_blank" rel="noreferrer">ğŸ“š å®˜æ–¹æ–‡æ¡£</a></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* http.ts æ–‡ä»¶ */</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Appstore } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@/redux/store&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¯»å–æ³¨å…¥çš„storeï¼ˆéç»„ä»¶æ–‡ä»¶ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Appstore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> injectStore</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">_store</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Appstore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  store </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _store;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.service.interceptors.request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AdaptAxiosRequestConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().users;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* å…¥å£æ–‡ä»¶ä¸­ main.tsx æ–‡ä»¶ */</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { store } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@/redux/store.ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { injectStore } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@/api&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// storeæ³¨å…¥axiosï¼ˆéreactç»„ä»¶æ–‡ä»¶ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">injectStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(store);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div>`,13)]))}const E=i(t,[["render",p]]);export{c as __pageData,E as default};
