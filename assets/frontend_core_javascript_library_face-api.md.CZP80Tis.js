import{_ as h,C as e,c as p,o as i,a7 as a,b as t,w as n,a as k,G as r,a8 as E}from"./chunks/framework.Dtft01Yp.js";const m=JSON.parse('{"title":"face-api.js å…¨é¢å­¦ä¹ æŒ‡å—","description":"","frontmatter":{},"headers":[],"relativePath":"frontend/core/javascript/library/face-api.md","filePath":"frontend/core/javascript/library/face-api.md","lastUpdated":1752053266000}'),d={name:"frontend/core/javascript/library/face-api.md"};function c(g,s,y,F,o,b){const l=e("Mermaid");return i(),p("div",null,[s[1]||(s[1]=a('<h1 id="face-api-js-å…¨é¢å­¦ä¹ æŒ‡å—" tabindex="-1">face-api.js å…¨é¢å­¦ä¹ æŒ‡å— <a class="header-anchor" href="#face-api-js-å…¨é¢å­¦ä¹ æŒ‡å—" aria-label="Permalink to &quot;face-api.js å…¨é¢å­¦ä¹ æŒ‡å—&quot;">â€‹</a></h1><nav class="table-of-contents"><ul><li><a href="#ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸åŸç†">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸åŸç†</a></li><li><a href="#äºŒã€ç¯å¢ƒæ­å»ºä¸æ¨¡å‹åŠ è½½">äºŒã€ç¯å¢ƒæ­å»ºä¸æ¨¡å‹åŠ è½½</a></li><li><a href="#ä¸‰ã€åŸºç¡€åŠŸèƒ½å®ç°">ä¸‰ã€åŸºç¡€åŠŸèƒ½å®ç°</a></li><li><a href="#å››ã€é«˜çº§åº”ç”¨åœºæ™¯">å››ã€é«˜çº§åº”ç”¨åœºæ™¯</a></li><li><a href="#äº”ã€æ€§èƒ½ä¼˜åŒ–ä¸è°ƒè¯•">äº”ã€æ€§èƒ½ä¼˜åŒ–ä¸è°ƒè¯•</a></li><li><a href="#å…­ã€å®é™…æ¡ˆä¾‹">å…­ã€å®é™…æ¡ˆä¾‹</a></li><li><a href="#ä¸ƒã€è¿ç§»ä¸æ›¿ä»£æ–¹æ¡ˆ">ä¸ƒã€è¿ç§»ä¸æ›¿ä»£æ–¹æ¡ˆ</a></li><li><a href="#å…«ã€å¸¸è§é—®é¢˜è§£å†³">å…«ã€å¸¸è§é—®é¢˜è§£å†³</a></li><li><a href="#ğŸ”—-ä¹ã€å‚è€ƒèµ„æ–™">ğŸ”— ä¹ã€å‚è€ƒèµ„æ–™</a></li></ul></nav><h2 id="ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸åŸç†" tabindex="-1">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸åŸç† <a class="header-anchor" href="#ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸åŸç†" aria-label="Permalink to &quot;ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸åŸç†&quot;">â€‹</a></h2><h4 id="_1-face-api-js-æ˜¯ä»€ä¹ˆ" tabindex="-1">1. face-api.js æ˜¯ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#_1-face-api-js-æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;1. face-api.js æ˜¯ä»€ä¹ˆï¼Ÿ&quot;">â€‹</a></h4><p>åŸºäº TensorFlow.js çš„ JavaScript äººè„¸è¯†åˆ«åº“ï¼Œæ”¯æŒï¼š</p><ul><li>äººè„¸æ£€æµ‹ï¼šå®šä½å›¾åƒ/è§†é¢‘ä¸­çš„äººè„¸è¾¹ç•Œæ¡†</li><li>ç‰¹å¾ç‚¹æ ‡è®°ï¼šè¯†åˆ« 68 ä¸ªé¢éƒ¨å…³é”®ç‚¹ï¼ˆçœ¼ã€é¼»ã€å˜´ç­‰ï¼‰</li><li>äººè„¸è¯†åˆ«ï¼šè®¡ç®—äººè„¸ç‰¹å¾å‘é‡ï¼ˆ128 ç»´æè¿°ç¬¦ï¼‰å¹¶æ¯”å¯¹ç›¸ä¼¼åº¦</li><li>å±æ€§åˆ†æï¼šè¡¨æƒ…ã€å¹´é¾„ã€æ€§åˆ«é¢„æµ‹</li></ul><h4 id="_2-å·¥ä½œåŸç†" tabindex="-1">2. å·¥ä½œåŸç† <a class="header-anchor" href="#_2-å·¥ä½œåŸç†" aria-label="Permalink to &quot;2. å·¥ä½œåŸç†&quot;">â€‹</a></h4>',7)),(i(),t(E,null,{default:n(()=>[r(l,{id:"mermaid-40",class:"mermaid",graph:"graph%20LR%0AA%5B%E8%BE%93%E5%85%A5%E5%9B%BE%E5%83%8F%2F%E8%A7%86%E9%A2%91%5D%20--%3E%20B(SSD%20Mobilenet%2FTinyFace%20%E6%A3%80%E6%B5%8B%E4%BA%BA%E8%84%B8)%0AB%20--%3E%20C(68%E7%82%B9%E7%89%B9%E5%BE%81%E5%AE%9A%E4%BD%8D)%0AC%20--%3E%20D%7B%E9%9C%80%E9%AB%98%E7%BA%A7%E5%8A%9F%E8%83%BD%EF%BC%9F%7D%0AD%20--%3E%7C%E6%98%AF%7C%20E%5B%E8%A1%A8%E6%83%85%2F%E5%B9%B4%E9%BE%84%2F%E6%80%A7%E5%88%AB%E6%A8%A1%E5%9E%8B%5D%0AD%20--%3E%7C%E5%90%A6%7C%20F%5B%E8%BE%93%E5%87%BA%E8%BE%B9%E7%95%8C%E6%A1%86%5D%0AE%20--%3E%20G%5B%E7%94%9F%E6%88%90%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0%E7%AC%A6%5D%0AG%20--%3E%20H%5B%E4%BA%BA%E8%84%B8%E5%8C%B9%E9%85%8D%5D%0A"})]),fallback:n(()=>s[0]||(s[0]=[k(" Loading... ")])),_:1})),s[2]||(s[2]=a(`<p>å…³é”®ç‚¹ï¼š</p><ul><li>äººè„¸å¯¹é½ï¼šé€šè¿‡ 68 ä¸ªç‰¹å¾ç‚¹çŸ«æ­£äººè„¸è§’åº¦ï¼Œæå‡è¯†åˆ«ç²¾åº¦</li><li>ç›¸ä¼¼åº¦è®¡ç®—ï¼šæ¬§æ°è·ç¦»ï¼ˆEuclidean Distanceï¼‰æ¯”å¯¹ç‰¹å¾å‘é‡ï¼Œé˜ˆå€¼ &lt;0.6 è§†ä¸ºåŒä¸€äºº</li></ul><br><h2 id="äºŒã€ç¯å¢ƒæ­å»ºä¸æ¨¡å‹åŠ è½½" tabindex="-1">äºŒã€ç¯å¢ƒæ­å»ºä¸æ¨¡å‹åŠ è½½ <a class="header-anchor" href="#äºŒã€ç¯å¢ƒæ­å»ºä¸æ¨¡å‹åŠ è½½" aria-label="Permalink to &quot;äºŒã€ç¯å¢ƒæ­å»ºä¸æ¨¡å‹åŠ è½½&quot;">â€‹</a></h2><h4 id="_1-å®‰è£…æ–¹å¼" tabindex="-1">1. å®‰è£…æ–¹å¼ <a class="header-anchor" href="#_1-å®‰è£…æ–¹å¼" aria-label="Permalink to &quot;1. å®‰è£…æ–¹å¼&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># NPM å®‰è£…</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> face-api.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># CDN å¼•å…¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">script src</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://cdn.jsdelivr.net/npm/face-api.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/script</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_2-æ¨¡å‹åŠ è½½" tabindex="-1">2. æ¨¡å‹åŠ è½½ <a class="header-anchor" href="#_2-æ¨¡å‹åŠ è½½" aria-label="Permalink to &quot;2. æ¨¡å‹åŠ è½½&quot;">â€‹</a></h4><p>æ¨¡å‹éœ€ä»å®˜æ–¹ä»“åº“ä¸‹è½½ï¼Œå­˜æ”¾äºé¡¹ç›®ç›®å½•ï¼ˆå¦‚ /public/modelsï¼‰ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åŠ è½½åŸºç¡€æ¨¡å‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">all</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  faceapi.nets.tinyFaceDetector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadFromUri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/models&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  faceapi.nets.faceLandmark68Net.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadFromUri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/models&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  faceapi.nets.faceRecognitionNet.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadFromUri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/models&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¯é€‰æ‰©å±•æ¨¡å‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi.nets.faceExpressionNet.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadFromUri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/models&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¡¨æƒ…è¯†åˆ«</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi.nets.ageGenderNet.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadFromUri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/models&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¹´é¾„æ€§åˆ«</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>æ³¨æ„ï¼š</p><ul><li>æ¨¡å‹è·¯å¾„éœ€å¯è®¿é—®ï¼Œå¦åˆ™æŠ¥é”™ ENOENT</li><li>Webpack ç”¨æˆ·éœ€å¿½ç•¥ fs æ¨¡å—è­¦å‘Šï¼ˆé…ç½® resolve.fallback: { fs: false }ï¼‰</li></ul><h2 id="ä¸‰ã€åŸºç¡€åŠŸèƒ½å®ç°" tabindex="-1">ä¸‰ã€åŸºç¡€åŠŸèƒ½å®ç° <a class="header-anchor" href="#ä¸‰ã€åŸºç¡€åŠŸèƒ½å®ç°" aria-label="Permalink to &quot;ä¸‰ã€åŸºç¡€åŠŸèƒ½å®ç°&quot;">â€‹</a></h2><h4 id="_1-å®æ—¶æ‘„åƒå¤´äººè„¸æ£€æµ‹" tabindex="-1">1. å®æ—¶æ‘„åƒå¤´äººè„¸æ£€æµ‹ <a class="header-anchor" href="#_1-å®æ—¶æ‘„åƒå¤´äººè„¸æ£€æµ‹" aria-label="Permalink to &quot;1. å®æ—¶æ‘„åƒå¤´äººè„¸æ£€æµ‹&quot;">â€‹</a></h4><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¼€å¯æ‘„åƒå¤´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">navigator.mediaDevices.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUserMedia</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ video: {} })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">stream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    video.srcObject </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> stream;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">video.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;play&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createCanvasFromMedia</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(video);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(canvas);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> displaySize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { width: video.width, height: video.height };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  faceapi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">matchDimensions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(canvas, displaySize);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  setInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> detections</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">detectAllFaces</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(video, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TinyFaceDetectorOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withFaceLandmarks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withFaceExpressions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> resizedDetections</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resizeResults</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(detections, displaySize);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2d&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clearRect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, canvas.width, canvas.height);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    faceapi.draw.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drawDetections</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(canvas, resizedDetections);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    faceapi.draw.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drawFaceLandmarks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(canvas, resizedDetections);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    faceapi.draw.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drawFaceExpressions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(canvas, resizedDetections);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ£€æµ‹é¢‘ç‡ 100ms</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h4 id="_2-é™æ€å›¾åƒåˆ†æ" tabindex="-1">2. é™æ€å›¾åƒåˆ†æ <a class="header-anchor" href="#_2-é™æ€å›¾åƒåˆ†æ" aria-label="Permalink to &quot;2. é™æ€å›¾åƒåˆ†æ&quot;">â€‹</a></h4><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> img</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myImage&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> detections</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">detectSingleFace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(img, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SsdMobilenetv1Options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withFaceLandmarks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withAgeAndGender</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç»˜åˆ¶ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createCanvasFromMedia</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(img);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">age</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">gender</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">genderProbability</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> detections;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi.draw.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DrawTextField</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Math</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">round</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">age</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}å²\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gender</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} (\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Math</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">round</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">genderProbability</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}%)\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  detections.detection.box.bottomLeft</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">draw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(canvas);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="å››ã€é«˜çº§åº”ç”¨åœºæ™¯" tabindex="-1">å››ã€é«˜çº§åº”ç”¨åœºæ™¯ <a class="header-anchor" href="#å››ã€é«˜çº§åº”ç”¨åœºæ™¯" aria-label="Permalink to &quot;å››ã€é«˜çº§åº”ç”¨åœºæ™¯&quot;">â€‹</a></h2><h4 id="_1-äººè„¸æ¯”å¯¹-1-1-éªŒè¯" tabindex="-1">1. äººè„¸æ¯”å¯¹ï¼ˆ1:1 éªŒè¯ï¼‰ <a class="header-anchor" href="#_1-äººè„¸æ¯”å¯¹-1-1-éªŒè¯" aria-label="Permalink to &quot;1. äººè„¸æ¯”å¯¹ï¼ˆ1:1 éªŒè¯ï¼‰&quot;">â€‹</a></h4><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> img1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;img1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> img2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;img2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> descriptor1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">detectSingleFace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(img1)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withFaceDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> descriptor2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">detectSingleFace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(img2)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withFaceDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> distance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">euclideanDistance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(descriptor1.descriptor, descriptor2.descriptor);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(distance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.6</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;åŒä¸€äºº&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ä¸åŒäºº&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_2-å¤šäººè¯†åˆ«-1-n-æ£€ç´¢" tabindex="-1">2. å¤šäººè¯†åˆ«ï¼ˆ1:N æ£€ç´¢ï¼‰ <a class="header-anchor" href="#_2-å¤šäººè¯†åˆ«-1-n-æ£€ç´¢" aria-label="Permalink to &quot;2. å¤šäººè¯†åˆ«ï¼ˆ1:N æ£€ç´¢ï¼‰&quot;">â€‹</a></h4><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ³¨å†Œå·²çŸ¥äººè„¸åº“</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> labeledDescriptors</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LabeledFaceDescriptors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å¼ ä¸‰&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [descriptor1, descriptor2]),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LabeledFaceDescriptors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æå››&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [descriptor3])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> faceMatcher</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FaceMatcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(labeledDescriptors, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¯†åˆ«æœªçŸ¥äººè„¸</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> unknownDescriptor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">detectSingleFace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(img).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withFaceDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> bestMatch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceMatcher.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findBestMatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(unknownDescriptor.descriptor);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`è¯†åˆ«ç»“æœ: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bestMatch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">label</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="äº”ã€æ€§èƒ½ä¼˜åŒ–ä¸è°ƒè¯•" tabindex="-1">äº”ã€æ€§èƒ½ä¼˜åŒ–ä¸è°ƒè¯• <a class="header-anchor" href="#äº”ã€æ€§èƒ½ä¼˜åŒ–ä¸è°ƒè¯•" aria-label="Permalink to &quot;äº”ã€æ€§èƒ½ä¼˜åŒ–ä¸è°ƒè¯•&quot;">â€‹</a></h2><h4 id="_1-æ¨¡å‹é€‰å‹å»ºè®®" tabindex="-1">1. æ¨¡å‹é€‰å‹å»ºè®® <a class="header-anchor" href="#_1-æ¨¡å‹é€‰å‹å»ºè®®" aria-label="Permalink to &quot;1. æ¨¡å‹é€‰å‹å»ºè®®&quot;">â€‹</a></h4><p>| æ¨¡å‹ç±»å‹ | å¤§å° | é€Ÿåº¦ | ç²¾åº¦ | é€‚ç”¨åœºæ™¯ | | ---------------- | --------- | ---- | ----------------- | | TinyFaceDetector | 200KB âš¡ï¸âš¡ï¸âš¡ï¸ | â­ï¸â­ï¸ | å®æ—¶æ‘„åƒå¤´/ç§»åŠ¨ç«¯ | | SsdMobilenetv1 | 5.4MB âš¡ï¸âš¡ï¸ | â­ï¸â­ï¸â­ï¸ | é™æ€å›¾åƒåˆ†æ | | FaceLandmark68 | 1.2MB âš¡ï¸ | â­ï¸â­ï¸â­ï¸â­ï¸ | é«˜ç²¾åº¦ç‰¹å¾ç‚¹å®šä½ |</p><h4 id="_2-ä¼˜åŒ–ç­–ç•¥" tabindex="-1">2. ä¼˜åŒ–ç­–ç•¥ <a class="header-anchor" href="#_2-ä¼˜åŒ–ç­–ç•¥" aria-label="Permalink to &quot;2. ä¼˜åŒ–ç­–ç•¥&quot;">â€‹</a></h4><ul><li>é™ä½æ£€æµ‹é¢‘ç‡ï¼šsetInterval é—´éš”ä» 100ms è°ƒæ•´ä¸º 300ms</li><li>ç¼©å°æ£€æµ‹åŒºåŸŸï¼šå¯¹è§†é¢‘å¸§è£å‰ªäººè„¸åŒºåŸŸåå†åˆ†æ</li><li>Web Workerï¼šå°†è®¡ç®—ç§»è‡³åå°çº¿ç¨‹é¿å…é˜»å¡ UI</li><li>ç¼“å­˜æ¨¡å‹ï¼šé¦–æ¬¡åŠ è½½åç¼“å­˜æ¨¡å‹å‡å°‘é‡å¤è¯·æ±‚</li></ul><h4 id="_3-è°ƒè¯•å·¥å…·" tabindex="-1">3. è°ƒè¯•å·¥å…· <a class="header-anchor" href="#_3-è°ƒè¯•å·¥å…·" aria-label="Permalink to &quot;3. è°ƒè¯•å·¥å…·&quot;">â€‹</a></h4><ul><li>Chrome DevToolsï¼š <ul><li>æŸ¥çœ‹æ¨¡å‹åŠ è½½çŠ¶æ€</li><li>æ£€æŸ¥ canvas ç»˜åˆ¶ç»“æœ</li><li>æ¨¡æ‹Ÿç¦»çº¿ç¯å¢ƒæµ‹è¯•</li></ul></li><li>Lighthouseï¼šè¯„ä¼°æ€§èƒ½ç“¶é¢ˆ</li></ul><h2 id="å…­ã€å®é™…æ¡ˆä¾‹" tabindex="-1">å…­ã€å®é™…æ¡ˆä¾‹ <a class="header-anchor" href="#å…­ã€å®é™…æ¡ˆä¾‹" aria-label="Permalink to &quot;å…­ã€å®é™…æ¡ˆä¾‹&quot;">â€‹</a></h2><h4 id="_1-å®‰å…¨ç›‘æ§ç³»ç»Ÿ" tabindex="-1">1. å®‰å…¨ç›‘æ§ç³»ç»Ÿ <a class="header-anchor" href="#_1-å®‰å…¨ç›‘æ§ç³»ç»Ÿ" aria-label="Permalink to &quot;1. å®‰å…¨ç›‘æ§ç³»ç»Ÿ&quot;">â€‹</a></h4><ul><li>åŠŸèƒ½ï¼šå®æ—¶æ ‡è®°é™Œç”Ÿäººå¹¶æŠ¥è­¦</li><li>å®ç°ï¼š <ol><li>æ³¨å†Œå·²çŸ¥äººå‘˜äººè„¸æè¿°ç¬¦</li><li>æ‘„åƒå¤´æµä¸­æ£€æµ‹å¹¶æ¯”å¯¹</li><li>æœªåŒ¹é…æ—¶è§¦å‘è­¦æŠ¥</li></ol></li></ul><h4 id="_2-äº’åŠ¨å¨±ä¹æ»¤é•œ" tabindex="-1">2. äº’åŠ¨å¨±ä¹æ»¤é•œ <a class="header-anchor" href="#_2-äº’åŠ¨å¨±ä¹æ»¤é•œ" aria-label="Permalink to &quot;2. äº’åŠ¨å¨±ä¹æ»¤é•œ&quot;">â€‹</a></h4><ul><li>åŠŸèƒ½ï¼šåœ¨çœ¼ç›ä½ç½®å åŠ è¡¨æƒ…ç¬¦å· ğŸ‘€</li><li>ä»£ç ç‰‡æ®µï¼š</li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> landmarks</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> detection.landmarks;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> leftEye</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> landmarks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getLeftEye</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rightEye</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> landmarks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRightEye</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> eyePos</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> leftEye[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rightEye[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¡ç®—åŒçœ¼ä¸­å¿ƒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drawImage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(emojiImg, eyePos.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, eyePos.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="ä¸ƒã€è¿ç§»ä¸æ›¿ä»£æ–¹æ¡ˆ" tabindex="-1">ä¸ƒã€è¿ç§»ä¸æ›¿ä»£æ–¹æ¡ˆ <a class="header-anchor" href="#ä¸ƒã€è¿ç§»ä¸æ›¿ä»£æ–¹æ¡ˆ" aria-label="Permalink to &quot;ä¸ƒã€è¿ç§»ä¸æ›¿ä»£æ–¹æ¡ˆ&quot;">â€‹</a></h2><h4 id="_1-face-api-js-çš„å±€é™æ€§" tabindex="-1">1. face-api.js çš„å±€é™æ€§ <a class="header-anchor" href="#_1-face-api-js-çš„å±€é™æ€§" aria-label="Permalink to &quot;1. face-api.js çš„å±€é™æ€§&quot;">â€‹</a></h4><ul><li>åŸä½œè€…è‡ª 2020 å¹´åœæ­¢ç»´æŠ¤ï¼Œå­˜åœ¨å…¼å®¹æ€§é—®é¢˜</li><li>Node.js ç¯å¢ƒéœ€é¢å¤–å®‰è£… windows-build-tools å’Œ Python</li></ul><h4 id="_2-æ¨èæ›¿ä»£æ–¹æ¡ˆ" tabindex="-1">2. æ¨èæ›¿ä»£æ–¹æ¡ˆ <a class="header-anchor" href="#_2-æ¨èæ›¿ä»£æ–¹æ¡ˆ" aria-label="Permalink to &quot;2. æ¨èæ›¿ä»£æ–¹æ¡ˆ&quot;">â€‹</a></h4><ul><li>@vladmandic/face-apiï¼šç¤¾åŒºç»´æŠ¤åˆ†æ”¯ï¼Œæ”¯æŒæ–°ç‰ˆ TensorFlow.js</li><li>MediaPipe Face Detectionï¼šGoogle å¼€æºæ–¹æ¡ˆï¼Œæ”¯æŒè½»é‡çº§å®æ—¶æ£€æµ‹</li></ul><h4 id="_3-è¿ç§»ç¤ºä¾‹" tabindex="-1">3. è¿ç§»ç¤ºä¾‹ <a class="header-anchor" href="#_3-è¿ç§»ç¤ºä¾‹" aria-label="Permalink to &quot;3. è¿ç§»ç¤ºä¾‹&quot;">â€‹</a></h4><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@vladmandic/face-api&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ¥å£ä¸åŸç‰ˆåŸºæœ¬ä¸€è‡´</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> faceapi.nets.tinyFaceDetector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadFromUri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/models&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="å…«ã€å¸¸è§é—®é¢˜è§£å†³" tabindex="-1">å…«ã€å¸¸è§é—®é¢˜è§£å†³ <a class="header-anchor" href="#å…«ã€å¸¸è§é—®é¢˜è§£å†³" aria-label="Permalink to &quot;å…«ã€å¸¸è§é—®é¢˜è§£å†³&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>é—®é¢˜</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>æ¨¡å‹åŠ è½½å¤±è´¥</td><td>æ£€æŸ¥è·¯å¾„æƒé™ï¼Œç¡®ä¿æ¨¡å‹æ–‡ä»¶å¯è®¿é—®</td></tr><tr><td>æ‘„åƒå¤´æ— æ³•å¯åŠ¨</td><td>ç¡®è®¤ HTTPS ç¯å¢ƒï¼ˆæœ¬åœ° localhost é™¤å¤–ï¼‰</td></tr><tr><td>äººè„¸è¯†åˆ«ç²¾åº¦ä½</td><td>æ”¹ç”¨ SsdMobilenetv1 æ¨¡å‹å¹¶å¢åŠ å›¾åƒåˆ†è¾¨ç‡</td></tr><tr><td>Node.js æŠ¥é”™</td><td>Module not found å®‰è£… node-polyfill-webpack-plugin</td></tr></tbody></table><h2 id="ğŸ”—-ä¹ã€å‚è€ƒèµ„æ–™" tabindex="-1">ğŸ”— ä¹ã€å‚è€ƒèµ„æ–™ <a class="header-anchor" href="#ğŸ”—-ä¹ã€å‚è€ƒèµ„æ–™" aria-label="Permalink to &quot;ğŸ”— ä¹ã€å‚è€ƒèµ„æ–™&quot;">â€‹</a></h2><p><a href="https://github.com/justadudewhohacks/face-api.js-models" target="_blank" rel="noreferrer">ğŸ“š å®˜æ–¹æ¨¡å‹ä¸‹è½½</a></p><p><a href="https://github.com/vladmandic/face-api" target="_blank" rel="noreferrer">ğŸ“š @vladmandic/face-api</a></p><p><a href="https://github.com/justadudewhohacks/face-api.js-demo" target="_blank" rel="noreferrer">ğŸ“š å®Œæ•´ä»£ç ç¤ºä¾‹</a></p><blockquote><p>æç¤ºï¼šç”Ÿäº§ç¯å¢ƒåŠ¡å¿…è€ƒè™‘ä¼¦ç†é—®é¢˜ï¼ˆå¦‚æ€§åˆ«è¯†åˆ«åè§ï¼‰ï¼Œå»ºè®®ç»“åˆäººå·¥å®¡æ ¸æœºåˆ¶</p></blockquote>`,48))])}const C=h(d,[["render",c]]);export{m as __pageData,C as default};
